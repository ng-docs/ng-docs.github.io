<!doctype html><html><head><meta charset="utf-8"><title>Dependency Providers - Angular 官方文档</title><base href="/"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="search" type="application/opensearchdescription+xml" href="assets/opensearch.xml"><link rel="icon" type="image/x-icon" href="assets/images/favicons/favicon.ico"><link rel="icon" type="image/png" href="assets/images/favicons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="assets/images/favicons/favicon-194x194.png" sizes="194x194"><link rel="icon" type="image/png" href="assets/images/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="assets/images/favicons/favicon-16x16.png" sizes="16x16"><link rel="apple-touch-icon" sizes="144x144" href="assets/images/favicons/favicon-144x144.png"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/images/favicons/favicon-144x144.png"><link href="assets/fonts/Material_Icons.css" rel="stylesheet"><link href="assets/fonts/Droid_Sans_Mono.css" rel="stylesheet"><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><link rel="manifest" href="pwa-manifest.json"><meta name="theme-color" content="#1976d2"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="translucent"><script>!function(e,a,n,t,s,c,g){e.GoogleAnalyticsObject=s,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(n),g=a.getElementsByTagName(n)[0],c.async=1,c.src="assets/js/analytics.js",~e.name.indexOf("NG_DEFER_BOOTSTRAP")||g.parentNode.insertBefore(c,g)}(window,document,"script",0,"ga")</script><script>window.onerror=function(){ga("send","exception",{exDescription:function(e,r,n,a,c){var l;e=e.replace(/^Error: /,""),l=c?c.stack.replace(/^Error: /,"").replace(e+"\n","").replace(/^ +/gm,"").replace(/^at /gm,"").replace(/(?: \(|@)http.+\/([^/)]+)\)?(?:\n|$)/gm,"@$1\n").replace(/ *\(eval code(:\d+:\d+)\)(?:\n|$)/gm,"@???$1\n"):r+":"+(n=n||"?")+":"+(a=a||"?");return(e+"\n"+l).substr(0,150)}.apply(null,arguments),exFatal:!0})}</script><script nomodule src="generated/ie-polyfills.min.js"></script><link rel="stylesheet" href="styles.a7bd028f7ddaf842c042.css"></head><body><aio-shell ng-version="7.0.0-rc.1" class="mode-stable sidenav-open page-docs folder-docs view-TopBar view-SideNav aio-notification-hide"><div id="top-of-page"></div><mat-toolbar class="app-toolbar no-print mat-toolbar mat-primary mat-toolbar-multiple-rows" color="primary"><mat-toolbar-row class="notification-container mat-toolbar-row"><aio-notification expirationdate="2018-07-01" notificationid="angular-v6-announcement" class="ng-tns-c2-0 ng-trigger ng-trigger-hideAnimation" style="height:0"><span class="content"><a href="https://blog.angular.io/version-6-0-0-of-angular-now-available-cc56b0efa7a4"><mat-icon aria-label="Announcement" class="icon mat-icon" role="img" svgicon="insert_comment" aria-hidden="true"><svg fill="#ffffff" focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></mat-icon><span class="message">Version 6 of Angular Now Available!</span><span class="action-button">Learn More</span></a></span><button class="close-button mat-icon-button" aria-label="Close" mat-icon-button=""><span class="mat-button-wrapper"><mat-icon aria-label="Dismiss notification" class="mat-icon ng-tns-c2-0" role="img" svgicon="close" aria-hidden="true"><svg fill="#ffffff" focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></mat-icon></span><div class="mat-button-ripple mat-ripple mat-button-ripple-round" matripple=""></div><div class="mat-button-focus-overlay"></div></button></aio-notification></mat-toolbar-row><mat-toolbar-row class="mat-toolbar-row"><button class="hamburger mat-button" mat-button="" title="Docs menu"><span class="mat-button-wrapper"><mat-icon class="mat-icon" role="img" svgicon="menu" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></mat-icon></span><div class="mat-button-ripple mat-ripple" matripple=""></div><div class="mat-button-focus-overlay"></div></button><a class="nav-link home" href="/"><img alt="Home" height="40" src="assets/images/logos/angular/logo-nav@2x.png" title="Home" width="150" class="ng-star-inserted"></a><aio-top-menu class="ng-star-inserted"><ul role="navigation"><li class="ng-star-inserted"><a class="nav-link" href="features" title="特性">特性</a></li><li class="ng-star-inserted"><a class="nav-link" href="docs" title="文档">文档</a></li><li class="ng-star-inserted"><a class="nav-link" href="resources" title="资源">资源</a></li><li class="ng-star-inserted"><a class="nav-link" href="events" title="会议">会议</a></li><li class="ng-star-inserted"><a class="nav-link" href="https://blog.angular.io/" title="博客">博客</a></li><li class="ng-star-inserted"><a class="nav-link" href="translations/cn/home" title="关于中文版">关于中文版</a></li></ul></aio-top-menu><aio-search-box class="search-container"><input aria-label="search" placeholder="搜索" type="search"></aio-search-box><div class="toolbar-external-icons-container"><a href="https://twitter.com/angular" title="Twitter"><img src="assets/images/logos/twitter-icon.svg"></a><a href="https://github.com/angular/angular" title="GitHub"><img src="assets/images/logos/github-icon.svg"></a></div></mat-toolbar-row></mat-toolbar><mat-sidenav-container class="sidenav-container mat-drawer-container mat-sidenav-container mat-drawer-transition" role="main"><div class="mat-drawer-backdrop ng-star-inserted"></div><div class="cdk-visually-hidden cdk-focus-trap-anchor"></div><mat-sidenav class="sidenav mat-drawer mat-sidenav ng-tns-c6-1 ng-trigger ng-trigger-transform mat-drawer-side ng-star-inserted" tabindex="-1" style="transform:none;visibility:visible"><div class="mat-drawer-inner-container"><aio-nav-menu><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-1 collapsed ng-star-inserted" style="position:relative" href="guide/quickstart" title="对 Angular 和 Angular CLI 基础知识的简短介绍" target="_self">快速上手</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-1 collapsed ng-star-inserted" type="button" title="此《英雄指南》教程会带你用 TypeScript 一步步创建一个 Angular 应用。" aria-pressed="false">教程<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="tutorial" title="《英雄指南》教程简介" target="_self">简介</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="tutorial/toh-pt0" title="创建应用的外壳" target="_self">应用的“外壳”</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="tutorial/toh-pt1" title="第一部分：构建一个简单的英雄编辑器" target="_self">1. 英雄编辑器</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="tutorial/toh-pt2" title="第二部分：构建一个主从结构的页面，用于展现英雄列表。" target="_self">2. 显示英雄列表</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="tutorial/toh-pt3" title="第三部分：把主从结构的页面重构成多个组件。" target="_self">3. 主从组件</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="tutorial/toh-pt4" title="第四部分：创建一个可复用的服务来管理英雄数据。" target="_self">4. 服务</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="tutorial/toh-pt5" title="第五部分：添加 Angular 路由器，并且学习在视图之间导航。" target="_self">5. 路由</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="tutorial/toh-pt6" title="第六部分：通过 HTTP 来获取并保存英雄数据。" target="_self">6. HTTP</a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-1 collapsed ng-star-inserted" type="button" title="学习 Angular 的核心知识" aria-pressed="false">核心知识<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-2 collapsed ng-star-inserted" type="button" title="Angular 应用的基本构造块。" aria-pressed="false">架构<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/architecture" title="Angular 应用的基本构造块" target="_self">架构概览</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/architecture-modules" title="关于模块。" target="_self">模块（NgModule）简介</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/architecture-components" title="关于组件、模板和视图。" target="_self">组件简介</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/architecture-services" title="关于服务与依赖注入。" target="_self">服务与 DI 简介</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/architecture-next-steps" title="学完基础知识之后……" target="_self">后续步骤</a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-2 collapsed ng-star-inserted" type="button" title="使用数据绑定构建动态视图" aria-pressed="false">组件与模板<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/displaying-data" title="属性绑定可以帮助应用把数据显示在界面上" target="_self">显示数据</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/template-syntax" title="学习如何写模板，以便借助数据绑定机制显示数据并响应事件。" target="_self">模板语法</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/user-input" title="用户输入会触发 DOM 事件。Angular 会通过事件绑定来监听那些事件，并把修改后的值传回应用的组件和模型中。" target="_self">用户输入</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/lifecycle-hooks" title="Angular 调用指令和组件的生命周期钩子函数，包括它的创建、变更和销毁时。" target="_self">生命周期钩子</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/component-interaction" title="在不同的指令和组件之间共享信息" target="_self">组件交互</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/component-styles" title="添加专属于某个组件的样式" target="_self">组件样式</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/elements" title="把组件转换成自定义元素。" target="_self">Angular 自定义元素</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/dynamic-component-loader" title="动态加载组件" target="_self">动态组件</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/attribute-directives" title="属性型指令把行为添加到现有元素上。" target="_self">属性型指令</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/structural-directives" title="结构型指令可以操纵页面的布局" target="_self">结构型指令</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/pipes" title="管道可以在模板中转换显示的内容。" target="_self">管道</a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-2 collapsed ng-star-inserted" type="button" title="Angular 的表单" aria-pressed="false">表单<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/forms-overview" title="表单可以创建集中、高效、引人注目的输入体验。Angular 表单可以协调一组数据绑定控件，跟踪变更，验证输入，并表达错误信息。" target="_self">简介</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/reactive-forms" title="使用 FormBuilder、表单组和表单数组创建响应式表单。" target="_self">响应式表单</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/forms" title="使用指令和 Angular 模板语法创建模板驱动表单。" target="_self">模板驱动表单</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/form-validation" title="验证用户的表单输入" target="_self">表单验证</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/dynamic-form" title="使用 FormGroup 渲染动态表单。" target="_self">动态表单</a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-2 collapsed ng-star-inserted" type="button" title="Observable 与 RxJS" aria-pressed="false">Observable 与 RxJS<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/observables" title="" target="_self">可观察对象(Observable)</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/rx-library" title="" target="_self">RxJS 库</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/observables-in-angular" title="" target="_self">Angular 中的可观察对象</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/practical-observable-usage" title="" target="_self">用法实战</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/comparing-observables" title="" target="_self">与其它技术的比较</a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/bootstrapping" title="在应用的根模块（AppModule）中告诉 Angular 如何构造并引导引用。" target="_self">引导启动</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-2 collapsed ng-star-inserted" type="button" title="Angular 中的模块" aria-pressed="false">Angular 模块<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/ngmodules" title="使用 NgModule 让你的应用更高效" target="_self">NgModule 简介</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/ngmodule-vs-jsmodule" title="JavaScript 模块和 NgModule 之间的差异" target="_self">JS 模块 vs NgModule</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/frequent-ngmodules" title="介绍最常用的 Angular 模块" target="_self">常用模块</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/module-types" title="介绍特性模块的几种类型" target="_self">特性模块的分类</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/entry-components" title="关于 Angular 中入口组件的一切" target="_self">入口组件</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/feature-modules" title="创建特性模块，以组织你的代码" target="_self">特性模块</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/providers" title="服务提供商与 Angular 模块" target="_self">服务提供商</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/singleton-services" title="创建单例应用" target="_self">单例应用</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/lazy-loading-ngmodules" title="惰性加载模块，以提高应用的性能" target="_self">惰性加载的特性模块</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/sharing-ngmodules" title="共享 Angular 模块让你的应用现代化。" target="_self">共享 Angular 模块</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/ngmodule-api" title="理解 NgModule 的那些细节。" target="_self">NgModule API</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/ngmodule-faq" title="回答关于 NgModules 的常见问题。" target="_self">NgModule 常见问题</a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-2 collapsed ng-star-inserted" type="button" title="依赖注入：创建并注入各种服务。" aria-pressed="false">依赖注入<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/dependency-injection" title="Angular 的依赖注入系统能够为 Angular 创建的类创建并交付它们所依赖的服务。" target="_self">Angular 依赖注入</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/hierarchical-dependency-injection" title="与组件树平行的注入器树，并支持嵌套的依赖。" target="_self">多级注入器</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/dependency-injection-providers" title="各种提供商类型的更多知识。" target="_self">DI 提供商</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/dependency-injection-in-action" title="依赖注入的使用技巧" target="_self">DI 实战</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/dependency-injection-navtree" title="使用注入器树来查找父组件。" target="_self">在组件树中导航</a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/http" title="通过 HTTP 协议与远程服务器对话。" target="_self">HttpClient</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/router" title="揭示如何通过 Angular 路由进行基本的屏幕导航。" target="_self">路由与导航</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-2 collapsed ng-star-inserted" type="button" title="Angular 动画系统指南" aria-pressed="false">动画<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/animations" title="Angular 动画的基础技术。" target="_self">简介</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/transition-and-triggers" title="转场与触发器的高级技术。" target="_self">转场与触发器</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/complex-animation-sequences" title="复杂的 Angular 动画序列。" target="_self">复杂序列</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/reusable-animations" title="创建可复用的动画。" target="_self">可复用动画</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/route-animations" title="为路由提供转场动画。" target="_self">路由转场动画</a></div></aio-nav-item></div></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-1 collapsed ng-star-inserted" type="button" title="把 Angular 用到你的实际工作中的一些技巧" aria-pressed="false">其它技术<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/security" title="Angular 应用开发中的安全技术。" target="_self">安全</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/i18n" title="把应用模板中的文本翻译成多种语言。" target="_self">国际化 (i18n)</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-2 collapsed ng-star-inserted" type="button" title="Angular Service Worker: 控制应用资源的缓存。" aria-pressed="false">Service Worker 与 PWA<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/service-worker-intro" title="Angular 对 Service Worker 的实现提升了慢速或不稳定的网络连接下的用户体验。" target="_self">简介</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/service-worker-getting-started" title="在 CLI 项目中启用 Service Worker，并在浏览器中查看效果。" target="_self">快速起步</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/service-worker-communications" title="那些能让你和 Angular 的 Service Worker 通讯的服务类。" target="_self">与 Service Worker 通讯</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/service-worker-devops" title="使用 Service Worker 运行应用、管理应用更新、调试以及杀掉正在运行的应用。" target="_self">生产环境下的 Service Worker</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/service-worker-config" title="配置 Service Worker 的缓存行为。" target="_self">Service Worker 配置</a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/universal" title="使用 Angular Universal 在服务端渲染 HTML。" target="_self">服务端渲染</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-2 collapsed ng-star-inserted" type="button" title="把 AngularJS 应用增量式的升级到 Angular。" aria-pressed="false">从 AngularJS 升级<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/upgrade" title="把 AngularJS 应用增量式的升级到 Angular。" target="_self">升级步骤</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/upgrade-performance" title="用更灵活的方式把 AngularJS 升级到 Angular" target="_self">提高升级效率</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/ajs-quick-reference" title="学习如何把 AngularJS 的概念映射到 Angular 中。" target="_self">AngularJS 与 Angular 的概念对照</a></div></aio-nav-item></div></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-1 collapsed ng-star-inserted" type="button" title="关于环境搭建、构建、测试、部署环境与工具的信息。" aria-pressed="false">环境搭建与部署<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/file-structure" title="Angular 工作空间在文件系统中是怎样的。" target="_self">项目文件结构</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/npm-packages" title="会默认安装到项目中的 npm 包的说明。" target="_self">npm 包</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/typescript-configuration" title="给 Angular 开发者的 TypeScript 配置。" target="_self">TypeScript 配置</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/aot-compiler" title="了解为何以及如何使用预先（AOT）编译器。" target="_self">预先（AOT）编译</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/build" title="构建应用及为应用启动开发服务器。" target="_self">构建与启动开发服务器</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/testing" title="测试 Angular 应用的技巧与实践。" target="_self">测试</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/deployment" title="了解如何部署 Angular 应用。" target="_self">发布</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/browser-support" title="浏览器支持与腻子脚本指南。" target="_self">浏览器支持</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-2 collapsed ng-star-inserted" type="button" title="整合开发环境和工具。" aria-pressed="false">开发工具集成<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/language-service" title="使用 Angular 语言服务加速开发。" target="_self">语言服务</a></div></aio-nav-item></div></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-1 collapsed ng-star-inserted" type="button" title="Angular 的版本发布实践、更新与升级。" aria-pressed="false">发布信息<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/releases" title="Angular 的版本、发布、支持、弃用策略与实践。" target="_self">Angular 发布策略与实践</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/updating" title="如何把 Angular 应用和库升级到最新版本。" target="_self">保持最新</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-2 collapsed ng-star-inserted" type="button" title="逐渐把 AngularJS 应用升级成 Angular。" aria-pressed="false">从 AngularJS 升级<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/upgrade" title="逐渐把 AngularJS 应用升级成 Angular。" target="_self">升级指南</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/ajs-quick-reference" title="学习如何把 AngularJS 的概念映射到 Angular 中。" target="_self">AngularJS 与 Angular 的概念对照</a></div></aio-nav-item></div></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button class="vertical-menu-item heading level-1 collapsed ng-star-inserted" type="button" title="Angular 语法、编码、术语汇总。" aria-pressed="false">快捷手册<mat-icon class="rotating-icon mat-icon" role="img" svgicon="keyboard_arrow_right" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/cheatsheet" title="关于 Angular 常用编码技术的快速指南。" target="_self">速查表</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/styleguide" title="写出 Angular 风格的程序" target="_self">风格指南</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/glossary" title="Angular 中最重要的词汇的简要定义。" target="_self">词汇表</a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-1 collapsed ng-star-inserted" style="position:relative" href="api" title="关于 Angular 中类和值的详细信息。" target="_self">API 参考手册</a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><div class="mat-divider ng-star-inserted" style="margin:4px 20px;border-top:1px solid #d3d3d3"></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-1 collapsed ng-star-inserted" style="position:relative" href="https://github.com/ng-docs/ng-docs.github.io/issues" title="github 上的中文互助问答区" target="_blank">互助问答<mat-icon class="mat-icon material-icons ng-star-inserted" role="img" aria-hidden="true">open_in_new</mat-icon></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-1 collapsed ng-star-inserted" style="position:relative" href="https://material.angular.cn" title="Angular Material 组件库的中文文档" target="_blank">官方 Material 组件库<mat-icon class="mat-icon material-icons ng-star-inserted" role="img" aria-hidden="true">open_in_new</mat-icon></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-1 collapsed ng-star-inserted" style="position:relative" href="https://ng.ant.design/" title="Ant Design 的 Angular 实现，服务于企业级后台产品。" target="_blank">ng-zorro 组件库<mat-icon class="mat-icon material-icons ng-star-inserted" role="img" aria-hidden="true">open_in_new</mat-icon></a></div></aio-nav-item></aio-nav-menu><div class="doc-version"><aio-select><div class="form-select-menu"><button class="form-select-button"><strong></strong>stable (v7.0.0)</button></div></aio-select></div></div></mat-sidenav><div class="cdk-visually-hidden cdk-focus-trap-anchor"></div><mat-sidenav-content cdkscrollable="" class="mat-drawer-content mat-sidenav-content ng-star-inserted" style="margin-left:260px"><section class="sidenav-content" role="content" id="docs"><div class="github-links"><a href="https://github.com/angular/angular/edit/master/aio/content/guide/dependency-injection-providers.md?message=docs%3A%20describe%20your%20change..." aria-label="提供编辑建议" title="提供编辑建议"><i class="material-icons" aria-hidden="true" role="img">mode_edit</i></a></div><div class="content"><h1 translation-result="on" id="依赖提供商">依赖提供商<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#依赖提供商"><i class="material-icons">link</i></a></h1><h1 translation-origin="off" id="dependency-providers">Dependency Providers<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#dependency-providers"><i class="material-icons">link</i></a></h1><p translation-result="on">依赖<a href="/guide/glossary#provider">提供商</a>会使用 <a href="/guide/glossary#di-token">DI 令牌</a>来配置注入器，注入器会用它来提供这个依赖值的具体的、运行时版本。 注入器依靠 "提供商配置" 来创建依赖的实例，并把该实例注入到组件、指令、管道和其它服务中。</p><p translation-origin="off">A dependency <a href="/guide/glossary#provider">provider</a> configures an injector with a <a href="/guide/glossary#di-token">DI token</a>, which that injector uses to provide the concrete, runtime version of a dependency value. The injector relies on the provider configuration to create instances of the dependencies that it injects into components, directives, pipes, and other services.</p><p translation-result="on">你必须使用提供商来配置注入器，否则注入器就无法知道如何创建此依赖。 注入器创建服务实例的最简单方法，就是用这个服务类本身来创建它。 如果你把服务类作为此服务的 DI 令牌，注入器的默认行为就是 <code>new</code> 出这个类实例。</p><p translation-origin="off">You must configure an injector with a provider, or it won't know how to create the dependency.<br>The most obvious way for an injector to create an instance of a service class is with the class itself. If you specify the service class itself as the provider token, the default behavior is for the injector to instantiate that class with <code>new</code>.</p><p translation-result="on">在下面这个典型的例子中，由 <code>Logger</code> 类本身提供 <code>Logger</code> 的实例。</p><p translation-origin="off">In the following typical example, the <code>Logger</code> class itself provides a <code>Logger</code> instance.</p><code-example path="dependency-injection/src/app/providers.component.ts" region="providers-logger">providers: [Logger]</code-example><p translation-result="on">不过，你也可以用一个替代提供商来配置注入器，这样就可以指定另一些同样能提供日志功能的对象。 比如：</p><p translation-origin="off">You can, however, configure an injector with an alternative provider, in order to deliver some other object that provides the needed logging functionality. For instance:</p><ul><li><p translation-result="on">你可以提供一个替代类。</p><p translation-origin="off">You can provide a substitute class.</p></li><li><p translation-result="on">你可以提供一个类似于 Logger 的对象。</p><p translation-origin="off">You can provide a logger-like object.</p></li><li><p translation-result="on">你的提供商可以调用一个工厂函数来创建 logger。</p><p translation-origin="off">Your provider can call a logger factory function.</p></li></ul><a id="provide"></a><h2 translation-result="on" id="provider-对象字面量"><code><a href="/api/core/Provider" class="code-anchor">Provider</a></code> 对象字面量<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#provider-对象字面量"><i class="material-icons">link</i></a></h2><h2 translation-origin="off" id="the-provider-object-literal">The <code><a href="/api/core/Provider" class="code-anchor">Provider</a></code> object literal<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#the-provider-object-literal"><i class="material-icons">link</i></a></h2><p translation-result="on">类提供商的语法实际上是一种简写形式，它会扩展成一个由 <a href="/api/core/Provider"><code>Provider</code> 接口</a>定义的提供商配置对象。 下面的代码片段展示了 <code>providers</code> 中给出的类会如何扩展成完整的提供商配置对象。</p><p translation-origin="off">The class-provider syntax is a shorthand expression that expands into a provider configuration, defined by the <a href="/api/core/Provider"><code>Provider</code> interface</a>. The following code snippets shows how a class that is given as the <code>providers</code> value is expanded into a full provider object.</p><code-example path="dependency-injection/src/app/providers.component.ts" region="providers-logger">providers: [Logger]</code-example><code-example path="dependency-injection/src/app/providers.component.ts" region="providers-3">[{ provide: Logger, useClass: Logger }]</code-example><p translation-result="on">扩展的提供商配置是一个具有两个属性的对象字面量。</p><p translation-origin="off">The expanded provider configuration is an object literal with two properties.</p><ul><li><p translation-result="on"> <code>provide</code> 属性存有<a href="/guide/dependency-injection#token">令牌</a>，它作为一个 key ，在定位依赖值和配置注入器时使用。</p><p translation-origin="off">The <code>provide</code> property holds the <a href="/guide/dependency-injection#token">token</a> that serves as the key for both locating a dependency value and configuring the injector.</p></li><li><p translation-result="on">第二个属性是一个提供商定义对象，它告诉注入器要如何创建依赖值。 提供商定义对象中的 key 可以是 <code>useClass</code> —— 就像这个例子中一样。 也可以是 <code>useExisting</code>、<code>useValue</code> 或 <code>useFactory</code>。 每一个 key 都用于提供一种不同类型的依赖，我们稍后会讨论。</p><p translation-origin="off">The second property is a provider definition object, which tells the injector how to create the dependency value. The provider-definition key can be <code>useClass</code>, as in the example. It can also be <code>useExisting</code>, <code>useValue</code>, or <code>useFactory</code>. Each of these keys provides a different type of dependency, as discussed below.</p></li></ul><a id="class-provider"></a><h2 translation-result="on" id="替代类提供商">替代类提供商<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#替代类提供商"><i class="material-icons">link</i></a></h2><h2 translation-origin="off" id="alternative-class-providers">Alternative class providers<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#alternative-class-providers"><i class="material-icons">link</i></a></h2><p translation-result="on">不同的类都可用于提供相同的服务。 比如，下面的代码告诉注入器，当组件使用 <code>Logger</code> 令牌请求日志对象时，给它返回一个 <code>BetterLogger</code> 实例。</p><p translation-origin="off">Different classes can provide the same service. For example, the following code tells the injector to return a <code>BetterLogger</code> instance when the component asks for a logger using the <code>Logger</code> token.</p><code-example path="dependency-injection/src/app/providers.component.ts" region="providers-4">[{ provide: Logger, useClass: BetterLogger }]</code-example><a id="class-provider-dependencies"></a><h3 translation-result="on" id="带依赖的类提供商">带依赖的类提供商<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#带依赖的类提供商"><i class="material-icons">link</i></a></h3><h3 translation-origin="off" id="class-providers-with-dependencies">Class providers with dependencies<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#class-providers-with-dependencies"><i class="material-icons">link</i></a></h3><p translation-result="on">另一个类 <code>EvenBetterLogger</code> 可能要在日志信息里显示用户名。 这个 logger 要从注入的 <code>UserService</code> 实例中来获取该用户。</p><p translation-origin="off">Another class, <code>EvenBetterLogger</code>, might display the user name in the log message. This logger gets the user from an injected <code>UserService</code> instance.</p><code-example path="dependency-injection/src/app/providers.component.ts" region="EvenBetterLogger" linenums="false">@<a href="/api/core/Injectable" class="code-anchor">Injectable</a>() export class EvenBetterLogger extends Logger { constructor(private userService: UserService) { super(); } <a href="/api/animations/browser/testing/MockAnimationDriver#log" class="code-anchor">log</a>(<a href="/api/common/http/HttpErrorResponse#message" class="code-anchor">message</a>: string) { let name = this.userService.user.name; super.log(`Message to ${name}: ${<a href="/api/common/http/HttpErrorResponse#message" class="code-anchor">message</a>}`); } }</code-example><p translation-result="on">注入器需要提供这个新的日志服务以及该服务所依赖的 <code>UserService</code> 对象。 使用 <code>useClass</code> 作为提供商定义对象的 key ，来配置一个 logger 的替代品，比如 <code>BetterLogger</code>。 下面的数组同时在父模块和组件的 <code>providers</code> 元数据选项中指定了这些提供商。</p><p translation-origin="off">The injector needs providers for both this new logging service and its dependent <code>UserService</code>. Configure this alternative logger with the <code>useClass</code> provider-definition key, like <code>BetterLogger</code>. The following array specifies both providers in the <code>providers</code> metadata option of the parent module or component.</p><code-example path="dependency-injection/src/app/providers.component.ts" region="providers-5" linenums="false">[ UserService, { provide: Logger, useClass: EvenBetterLogger }]</code-example><a id="aliased-class-providers"></a><h3 translation-result="on" id="别名类提供商">别名类提供商<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#别名类提供商"><i class="material-icons">link</i></a></h3><h3 translation-origin="off" id="aliased-class-providers">Aliased class providers<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#aliased-class-providers"><i class="material-icons">link</i></a></h3><p translation-result="on">假设老的组件依赖于 <code>OldLogger</code> 类。<code>OldLogger</code> 和 <code>NewLogger</code> 的接口相同，但是由于某种原因，我们没法修改老的组件来使用 <code>NewLogger</code>。</p><p translation-origin="off">Suppose an old component depends upon the <code>OldLogger</code> class. <code>OldLogger</code> has the same interface as <code>NewLogger</code>, but for some reason you can't update the old component to use it.</p><p translation-result="on">当老的组件要使用 <code>OldLogger</code> 记录信息时，你可能希望改用 <code>NewLogger</code> 的单例来处理它。 在这种情况下，无论某个组件请求老的 logger 还是新的 logger，依赖注入器都应该注入这个 <code>NewLogger</code> 的单例。 也就是说 <code>OldLogger</code> 应该是 <code>NewLogger</code> 的<em>别名</em>。</p><p translation-origin="off">When the old component logs a message with <code>OldLogger</code>, you want the singleton instance of <code>NewLogger</code> to handle it instead. In this case, the dependency injector should inject that singleton instance when a component asks for either the new or the old logger. <code>OldLogger</code> should be an <em>alias</em> for <code>NewLogger</code>.</p><p translation-result="on">如果你试图用 <code>useClass</code> 为 <code>OldLogger</code> 指定一个别名 <code>NewLogger</code>，就会在应用中得到 <code>NewLogger</code> 的两个不同的实例。</p><p translation-origin="off">If you try to alias <code>OldLogger</code> to <code>NewLogger</code> with <code>useClass</code>, you end up with two different <code>NewLogger</code> instances in your app.</p><code-example path="dependency-injection/src/app/providers.component.ts" region="providers-6a" linenums="false">[ NewLogger, // Not aliased! Creates two instances of `NewLogger` { provide: OldLogger, useClass: NewLogger}]</code-example><p translation-result="on">要确保只有一个 <code>NewLogger</code> 实例，就要用 <code>useExisting</code> 来为 <code>OldLogger</code> 指定别名。</p><p translation-origin="off">To make sure there is only one instance of <code>NewLogger</code>, alias <code>OldLogger</code> with the <code>useExisting</code> option.</p><code-example path="dependency-injection/src/app/providers.component.ts" region="providers-6b" linenums="false">[ NewLogger, // Alias OldLogger w/ reference to NewLogger { provide: OldLogger, useExisting: NewLogger}]</code-example><a id="value-provider"></a><h2 translation-result="on" id="值提供商">值提供商<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#值提供商"><i class="material-icons">link</i></a></h2><h2 translation-origin="off" id="value-providers">Value providers<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#value-providers"><i class="material-icons">link</i></a></h2><p translation-result="on">有时候，提供一个现成的对象会比要求注入器从类去创建更简单一些。 如果要注入一个你已经创建过的对象，请使用 <code>useValue</code> 选项来配置该注入器。</p><p translation-origin="off">Sometimes it's easier to provide a ready-made object rather than ask the injector to create it from a class. To inject an object you have already created, configure the injector with the <code>useValue</code> option</p><p translation-result="on">下面的代码定义了一个变量，用来创建这样一个能扮演 logger 角色的对象。</p><p translation-origin="off">The following code defines a variable that creates such an object to play the logger role.</p><code-example path="dependency-injection/src/app/providers.component.ts" region="silent-logger" linenums="false">// An object in the shape of the logger service export function SilentLoggerFn() {} const silentLogger = { logs: ['Silent logger says "Shhhhh!". Provided via "useValue"'], <a href="/api/animations/browser/testing/MockAnimationDriver#log" class="code-anchor">log</a>: SilentLoggerFn };</code-example><p translation-result="on">下面的提供商定义对象使用 <code>useValue</code> 作为 key 来把该变量与 <code>Logger</code> 令牌关联起来。</p><p translation-origin="off">The following provider object uses the <code>useValue</code> key to associate the variable with the <code>Logger</code> token.</p><code-example path="dependency-injection/src/app/providers.component.ts" region="providers-7" linenums="false">[{ provide: Logger, useValue: silentLogger }]</code-example><a id="non-class-dependencies"></a><h3 translation-result="on" id="非类依赖">非类依赖<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#非类依赖"><i class="material-icons">link</i></a></h3><h3 translation-origin="off" id="non-class-dependencies">Non-class dependencies<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#non-class-dependencies"><i class="material-icons">link</i></a></h3><p translation-result="on">并非所有的依赖都是类。 有时候你会希望注入字符串、函数或对象。</p><p translation-origin="off">Not all dependencies are classes. Sometimes you want to inject a string, function, or object.</p><p translation-result="on">应用通常会用大量的小型参数来定义配置对象，比如应用的标题或 Web API 端点的地址。 这些配置对象不一定总是类的实例。 它们还可能是对象字面量，如下例所示。</p><p translation-origin="off">Apps often define configuration objects with lots of small facts, like the title of the application or the address of a web API endpoint. These configuration objects aren't always instances of a class. They can be object literals, as shown in the following example.</p><code-example path="dependency-injection/src/app/app.config.ts" region="config" header="src/app/app.config.ts (excerpt)" linenums="false">export const HERO_DI_CONFIG: AppConfig = { apiEndpoint: 'api.heroes.com', title: 'Dependency Injection' };</code-example><a id="interface-not-valid-token"></a><p translation-result="on"><strong>TypeScript 接口不是有效的令牌</strong></p><p translation-origin="off"><strong>TypeScript interfaces are not valid tokens</strong></p><p translation-result="on"><code>HERO_DI_CONFIG</code> 常量满足 <code>AppConfig</code> 接口的要求。 不幸的是，你不能用 TypeScript 的接口作为令牌。 在 TypeScript 中，接口是一个设计期的概念，无法用作 DI 框架在运行期所需的令牌。</p><p translation-origin="off">The <code>HERO_DI_CONFIG</code> constant conforms to the <code>AppConfig</code> interface. Unfortunately, you cannot use a TypeScript interface as a token. In TypeScript, an interface is a design-time artifact, and doesn't have a runtime representation (token) that the DI framework can use.</p><code-example path="dependency-injection/src/app/providers.component.ts" region="providers-9-interface" linenums="false">// FAIL! Can't use interface as provider token [{ provide: AppConfig, useValue: HERO_DI_CONFIG })]</code-example><code-example path="dependency-injection/src/app/providers.component.ts" region="provider-9-ctor-interface" linenums="false">// FAIL! Can't inject using the interface as the parameter type constructor(private <a href="/api/router/Router#config" class="code-anchor">config</a>: AppConfig){ }</code-example><div class="alert is-helpful"><p translation-result="on">如果你曾经在强类型语言中使用过依赖注入功能，这一点可能看起来有点奇怪，那些语言都优先使用接口作为查找依赖的 key。 不过，JavaScript 没有接口，所以，当 TypeScript 转译成 JavaScript 时，接口也就消失了。 在运行期间，没有留下任何可供 Angular 进行查找的接口类型信息。</p><p translation-origin="off">This might seem strange if you're used to dependency injection in strongly typed languages where an interface is the preferred dependency lookup key. However, JavaScript, doesn't have interfaces, so when TypeScript is transpiled to JavaScript, the interface disappears. There is no interface type information left for Angular to find at runtime.</p></div><p translation-result="on">替代方案之一是以类似于 <code>AppModule</code> 的方式，在 NgModule 中提供并注入这个配置对象。</p><p translation-origin="off">One alternative is to provide and inject the configuration object in an NgModule like <code>AppModule</code>.</p><code-example path="dependency-injection/src/app/app.module.ts" region="providers" header="src/app/app.module.ts (providers)">providers: [ UserService, { provide: APP_CONFIG, useValue: HERO_DI_CONFIG } ],</code-example><p translation-result="on">另一个为非类依赖选择提供商令牌的解决方案是定义并使用 <code><a href="/api/core/InjectionToken" class="code-anchor">InjectionToken</a></code> 对象。 下面的例子展示了如何定义那样一个令牌。</p><p translation-origin="off">Another solution to choosing a provider token for non-class dependencies is to define and use an <code><a href="/api/core/InjectionToken" class="code-anchor">InjectionToken</a></code> object. The following example shows how to define such a token.</p><code-example path="dependency-injection/src/app/app.config.ts" region="token" header="src/app/app.config.ts" linenums="false">import { <a href="/api/core/InjectionToken" class="code-anchor">InjectionToken</a> } from '@angular/core'; export const APP_CONFIG = new <a href="/api/core/InjectionToken" class="code-anchor">InjectionToken</a>&#x3C;AppConfig>('app.config');</code-example><p translation-result="on">虽然类型参数在这里是可选的，不过还是能把此依赖的类型信息传达给开发人员和开发工具。 这个令牌的描述则是开发人员的另一个助力。</p><p translation-origin="off">The type parameter, while optional, conveys the dependency's type to developers and tooling. The token description is another developer aid.</p><p translation-result="on">使用 <code><a href="/api/core/InjectionToken" class="code-anchor">InjectionToken</a></code> 对象注册依赖提供商：</p><p translation-origin="off">Register the dependency provider using the <code><a href="/api/core/InjectionToken" class="code-anchor">InjectionToken</a></code> object:</p><code-example path="dependency-injection/src/app/providers.component.ts" region="providers-9" linenums="false">providers: [{ provide: APP_CONFIG, useValue: HERO_DI_CONFIG }]</code-example><p translation-result="on">现在，借助参数装饰器 <code>@<a href="/api/core/Inject" class="code-anchor">Inject</a>()</code>，你可以把这个配置对象注入到任何需要它的构造函数中。</p><p translation-origin="off">Now you can inject the configuration object into any constructor that needs it, with the help of an <code>@<a href="/api/core/Inject" class="code-anchor">Inject</a>()</code> parameter decorator.</p><code-example path="dependency-injection/src/app/app.component.2.ts" region="ctor" header="src/app/app.component.ts" linenums="false">constructor(@<a href="/api/core/Inject" class="code-anchor">Inject</a>(APP_CONFIG) <a href="/api/router/Router#config" class="code-anchor">config</a>: AppConfig) { this.title = config.title; }</code-example><div class="alert is-helpful"><p translation-result="on">虽然 <code>AppConfig</code> 接口对依赖注入本身没有任何作用，但是它可以在这个组件类中提供类型信息。</p><p translation-origin="off">Although the <code>AppConfig</code> interface plays no role in dependency injection, it supports typing of the configuration object within the class.</p></div><a id="factory-provider"></a> <a id="factory-providers"></a><h2 translation-result="on" id="工厂提供商">工厂提供商<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#工厂提供商"><i class="material-icons">link</i></a></h2><h2 translation-origin="off" id="factory-providers">Factory providers<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#factory-providers"><i class="material-icons">link</i></a></h2><p translation-result="on">有时候你需要动态创建依赖值，创建时需要的信息你要等运行期间才能拿到。 比如，你可能需要某个在浏览器会话过程中会被反复修改的信息，而且这个可注入服务还不能独立访问这个信息的源头。</p><p translation-origin="off">Sometimes you need to create a dependent value dynamically, based on information you won't have until run time. For example, you might need information that changes repeatedly in the course of the browser session. Also, your injectable service might not have independent access to the source of the information.</p><p translation-result="on">这种情况下，你可以使用<em>工厂提供商</em>。 当需要从第三方库创建依赖项实例时，工厂提供商也很有用，因为第三方库不是为 DI 而设计的。</p><p translation-origin="off">In cases like this you can use a <em>factory provider</em>. Factory providers can also be useful when creating an instance of a dependency from a third-party library that wasn't designed to work with DI.</p><p translation-result="on">比如，假设 <code>HeroService</code> 必须对普通用户隐藏<em>秘密</em>英雄，只有得到授权的用户才能看到他们。</p><p translation-origin="off">For example, suppose <code>HeroService</code> must hide <em>secret</em> heroes from normal users. Only authorized users should see secret heroes.</p><p translation-result="on">像 <code>EvenBetterLogger</code> 一样，<code>HeroService</code> 需要知道该用户是否有权查看秘密英雄。 而认证信息可能会在应用的单个会话中发生变化，比如你改用另一个用户登录。</p><p translation-origin="off">Like <code>EvenBetterLogger</code>, <code>HeroService</code> needs to know if the user is authorized to see secret heroes. That authorization can change during the course of a single application session, as when you log in a different user.</p><p translation-result="on">假设你不希望直接把 <code>UserService</code> 注入到 <code>HeroService</code> 中，因为你不希望把这个服务与那些高度敏感的信息牵扯到一起。 这样 <code>HeroService</code> 就无法直接访问到用户信息，来决定谁有权访问，谁没有。</p><p translation-origin="off">Let's say you don't want to inject <code>UserService</code> directly into <code>HeroService</code>, because you don't want to complicate that service with security-sensitive information. <code>HeroService</code> won't have direct access to the user information to decide who is authorized and who isn't.</p><p translation-result="on">要解决这个问题，我们给 <code>HeroService</code> 的构造函数一个逻辑型标志，以控制是否显示秘密英雄。</p><p translation-origin="off">To resolve this, we give the <code>HeroService</code> constructor a boolean flag to control display of secret heroes.</p><code-example path="dependency-injection/src/app/heroes/hero.service.ts" region="internals" header="src/app/heroes/hero.service.ts (excerpt)" linenums="false">constructor( private logger: Logger, private isAuthorized: boolean) { } getHeroes() { let auth = this.isAuthorized ? 'authorized ' : 'unauthorized'; this.logger.log(`Getting heroes for ${auth} user.`); return HEROES.filter(hero => this.isAuthorized || !hero.isSecret); }</code-example><p translation-result="on">你可以注入 <code>Logger</code> 但是不能注入 <code>isAuthorized</code> 标志。不过你可以改用工厂提供商来为 <code>HeroService</code> 创建一个新的 logger 实例。</p><p translation-origin="off">You can inject <code>Logger</code>, but you can't inject the <code>isAuthorized</code> flag. Instead, you can use a factory provider to create a new logger instance for <code>HeroService</code>.</p><p translation-result="on">工厂提供商需要一个工厂函数。</p><p translation-origin="off">A factory provider needs a factory function.</p><code-example path="dependency-injection/src/app/heroes/hero.service.provider.ts" region="factory" header="src/app/heroes/hero.service.provider.ts (excerpt)" linenums="false">let heroServiceFactory = (logger: Logger, userService: UserService) => { return new HeroService(logger, userService.user.isAuthorized); };</code-example><p translation-result="on">虽然 <code>HeroService</code> 不能访问 <code>UserService</code>，但是工厂函数可以。 你把 <code>Logger</code> 和 <code>UserService</code> 注入到了工厂提供商中，并让注入器把它们传给这个工厂函数。</p><p translation-origin="off">Although <code>HeroService</code> has no access to <code>UserService</code>, the factory function does. You inject both <code>Logger</code> and <code>UserService</code> into the factory provider and let the injector pass them along to the factory function.</p><code-example path="dependency-injection/src/app/heroes/hero.service.provider.ts" region="provider" header="src/app/heroes/hero.service.provider.ts (excerpt)" linenums="false">export let heroServiceProvider = { provide: HeroService, useFactory: heroServiceFactory, <a href="/api/core/ConstructorSansProvider#deps" class="code-anchor">deps</a>: [Logger, UserService] };</code-example><ul><li><p translation-result="on"><code>useFactory</code> 字段告诉 Angular 该提供商是一个工厂函数，该函数的实现代码是 <code>heroServiceFactory</code>。</p><p translation-origin="off">The <code>useFactory</code> field tells Angular that the provider is a factory function whose implementation is <code>heroServiceFactory</code>.</p></li><li><p translation-result="on"> <code><a href="/api/core/ConstructorSansProvider#deps" class="code-anchor">deps</a></code> 属性是一个<a href="/guide/dependency-injection#token">提供商令牌</a>数组。 <code>Logger</code> 和 <code>UserService</code> 类作为它们自己的类提供商令牌使用。 注入器解析这些令牌，并把与之对应的服务注入到相应的工厂函数参数表中。</p><p translation-origin="off">The <code><a href="/api/core/ConstructorSansProvider#deps" class="code-anchor">deps</a></code> property is an array of <a href="/guide/dependency-injection#token">provider tokens</a>. The <code>Logger</code> and <code>UserService</code> classes serve as tokens for their own class providers. The injector resolves these tokens and injects the corresponding services into the matching factory function parameters.</p></li></ul><p translation-result="on">注意，你把这个工厂提供商保存到了一个导出的变量 <code>heroServiceProvider</code> 中。 这个额外的步骤让工厂提供商可被复用。 你可以在任何需要它的地方用这个变量来配置 <code>HeroService</code> 的提供商。 在这个例子中，你只在 <code>HeroesComponent</code> 中用到了它。你在该组件元数据的 <code>providers</code> 数组中用 <code>heroServiceProvider</code> 替换了 <code>HeroService</code>。</p><p translation-origin="off">Notice that you captured the factory provider in an exported variable, <code>heroServiceProvider</code>. This extra step makes the factory provider reusable. You can configure a provider of <code>HeroService</code> with this variable wherever you need it. In this sample, you need it only in <code>HeroesComponent</code>, where <code>heroServiceProvider</code> replaces <code>HeroService</code> in the metadata <code>providers</code> array.</p><p translation-result="on">下面并列显示了新旧实现。</p><p translation-origin="off">The following shows the new and the old implementations side-by-side.</p><code-tabs><code-pane header="src/app/heroes/heroes.component (v3)" path="dependency-injection/src/app/heroes/heroes.component.ts">import { <a href="/api/core/Component" class="code-anchor">Component</a> } from '@angular/core'; import { heroServiceProvider } from './hero.service.provider'; @<a href="/api/core/Component" class="code-anchor">Component</a>({ selector: 'app-heroes', providers: [ heroServiceProvider ], <a href="/api/core/Component#template" class="code-anchor">template</a>: ` &#x3C;h2>Heroes&#x3C;/h2> &#x3C;app-hero-list>&#x3C;/app-hero-list> ` }) export class HeroesComponent { }</code-pane><code-pane header="src/app/heroes/heroes.component (v2)" path="dependency-injection/src/app/heroes/heroes.component.1.ts">import { <a href="/api/core/Component" class="code-anchor">Component</a> } from '@angular/core'; import { HeroService } from './hero.service'; @<a href="/api/core/Component" class="code-anchor">Component</a>({ selector: 'app-heroes', providers: [ HeroService ], <a href="/api/core/Component#template" class="code-anchor">template</a>: ` &#x3C;h2>Heroes&#x3C;/h2> &#x3C;app-hero-list>&#x3C;/app-hero-list> ` }) export class HeroesComponent { }</code-pane></code-tabs><h2 translation-result="on" id="预定义令牌与多提供商">预定义令牌与多提供商<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#预定义令牌与多提供商"><i class="material-icons">link</i></a></h2><h2 translation-origin="off" id="predefined-tokens-and-multiple-providers">Predefined tokens and multiple providers<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#predefined-tokens-and-multiple-providers"><i class="material-icons">link</i></a></h2><p translation-result="on">Angular 提供了一些内置的注入令牌常量，你可以用它们来自定义系统的多种行为。</p><p translation-origin="off">Angular provides a number of built-in injection-token constants that you can use to customize the behavior of various systems.</p><p translation-result="on">比如，你可以使用下列内置令牌来切入 Angular 框架的启动和初始化过程。 提供商对象可以把任何一个注入令牌与一个或多个用来执行应用初始化操作的回调函数关联起来。</p><p translation-origin="off">For example, you can use the following built-in tokens as hooks into the framework’s bootstrapping and initialization process.<br>A provider object can associate any of these injection tokens with one or more callback functions that take app-specific initialization actions.</p><ul><li><p translation-result="on"><a href="/api/core/PLATFORM_INITIALIZER">PLATFORM_INITIALIZER</a>：平台初始化之后调用的回调函数。</p><p translation-origin="off"><a href="/api/core/PLATFORM_INITIALIZER">PLATFORM_INITIALIZER</a>: Callback is invoked when a platform is initialized.</p></li><li><p translation-result="on"><a href="/api/core/APP_BOOTSTRAP_LISTENER">APP_BOOTSTRAP_LISTENER</a>：每个启动组件启动完成之后调用的回调函数。这个处理器函数会收到这个启动组件的 ComponentRef 实例。</p><p translation-origin="off"><a href="/api/core/APP_BOOTSTRAP_LISTENER">APP_BOOTSTRAP_LISTENER</a>: Callback is invoked for each component that is bootstrapped. The handler function receives the ComponentRef instance of the bootstrapped component.</p></li><li><p translation-result="on"><a href="/api/core/APP_INITIALIZER">APP_INITIALIZER</a>：应用初始化之前调用的回调函数。注册的所有初始化器都可以（可选地）返回一个 Promise。所有返回 Promise 的初始化函数都必须在应用启动之前解析完。如果任何一个初始化器失败了，该应用就不会继续启动。</p><p translation-origin="off"><a href="/api/core/APP_INITIALIZER">APP_INITIALIZER</a>: Callback is invoked before an app is initialized. All registered initializers can optionally return a Promise. All initializer functions that return Promises must be resolved before the application is bootstrapped. If one of the initializers fails to resolves, the application is not bootstrapped.</p></li></ul><p translation-result="on">该提供商对象还有第三个选项 <code>multi: true</code>，把它和 <code><a href="/api/core/APP_INITIALIZER" class="code-anchor">APP_INITIALIZER</a></code> 一起使用可以为特定的事件注册多个处理器。</p><p translation-origin="off">The provider object can have a third option, <code>multi: true</code>, which you can use with <code><a href="/api/core/APP_INITIALIZER" class="code-anchor">APP_INITIALIZER</a></code> to register multiple handlers for the provide event.</p><p translation-result="on">比如，当启动应用时，你可以使用同一个令牌注册多个初始化器。</p><p translation-origin="off">For example, when bootstrapping an application, you can register many initializers using the same token.</p><code-example>export const APP_TOKENS = [ { provide: <a href="/api/core/PLATFORM_INITIALIZER" class="code-anchor">PLATFORM_INITIALIZER</a>, useFactory: platformInitialized, multi: true }, { provide: <a href="/api/core/APP_INITIALIZER" class="code-anchor">APP_INITIALIZER</a>, useFactory: delayBootstrapping, multi: true }, { provide: <a href="/api/core/APP_BOOTSTRAP_LISTENER" class="code-anchor">APP_BOOTSTRAP_LISTENER</a>, useFactory: appBootstrapped, multi: true }, ];</code-example><p translation-result="on">在其它地方，多个提供商也同样可以和单个令牌关联起来。 比如，你可以使用内置的 <a href="/api/forms/NG_VALIDATORS">NG_VALIDATORS</a> 令牌注册自定义表单验证器，还可以在提供商定义对象中使用 <code>multi: true</code> 属性来为指定的验证器令牌提供多个验证器实例。 Angular 会把你的自定义验证器添加到现有验证器的集合中。</p><p translation-origin="off">Multiple providers can be associated with a single token in other areas as well. For example, you can register a custom form validator using the built-in <a href="/api/forms/NG_VALIDATORS">NG_VALIDATORS</a> token, and provide multiple instances of a given validator provider by using the <code>multi: true</code> property in the provider object. Angular adds your custom validators to the existing collection.</p><p translation-result="on">路由器也同样用多个提供商关联到了一个令牌。 当你在单个模块中用 <a href="/api/router/RouterModule#forroot">RouterModule.forRoot</a> 和 <a href="/api/router/RouterModule#forchild">RouterModule.forChild</a> 提供了多组路由时，<a href="/api/router/ROUTES">ROUTES</a> 令牌会把这些不同的路由组都合并成一个单一值。</p><p translation-origin="off">The Router also makes use of multiple providers associated with a single token. When you provide multiple sets of routes using <a href="/api/router/RouterModule#forroot">RouterModule.forRoot</a> and <a href="/api/router/RouterModule#forchild">RouterModule.forChild</a> in a single module, the <a href="/api/router/ROUTES">ROUTES</a> token combines all the different provided sets of routes into a single value.</p><div class="alert is-helpful"><p translation-result="on">搜索 <a href="/api?type=const">API 文档中的常量</a>以了解更多内置令牌。</p><p translation-origin="off">Search for <a href="/api?type=const">Constants in API documentation</a> to find more built-in tokens.</p></div><a id="tree-shakable-provider"></a> <a id="tree-shakable-providers"></a><h2 translation-result="on" id="可摇树优化的提供商">可摇树优化的提供商<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#可摇树优化的提供商"><i class="material-icons">link</i></a></h2><h2 translation-origin="off" id="tree-shakable-providers">Tree-shakable providers<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#tree-shakable-providers"><i class="material-icons">link</i></a></h2><p translation-result="on">摇树优化是指一个编译器选项，意思是把应用中未引用过的代码从最终生成的包中移除。 如果提供商是可摇树优化的，Angular 编译器就会从最终的输出内容中移除应用代码中从未用过的服务。 这会显著减小你的打包体积。</p><p translation-origin="off">Tree shaking refers to a compiler option that removes code from the final bundle if that code not referenced in an application. When providers are tree-shakable, the Angular compiler removes the associated services from the final output when it determines that they are not used in your application. This significantly reduces the size of your bundles.</p><div class="alert is-helpful"><p translation-result="on">理想情况下，如果应用没有注入服务，它就不应该包含在最终输出中。 不过，Angular 要能在构建期间识别出该服务是否需要。 由于还可能用 <code>injector.get(Service)</code> 的形式直接注入服务，所以 Angular 无法准确识别出代码中可能发生此注入的全部位置，因此为保险起见，只能把服务包含在注入器中。 因此，在 NgModule 或 组件级别提供的服务是无法被摇树优化掉的。</p><p translation-origin="off">Ideally, if an application isn't injecting a service, it shouldn't be included in the final output. However, Angular has to be able to identify at build time whether the service will be required or not. Because it's always possible to inject a service directly using <code>injector.get(Service)</code>, Angular can't identify all of the places in your code where this injection could happen, so it has no choice but to include the service in the injector. Thus, services provided at the NgModule or component level are not tree-shakable.</p></div><p translation-result="on">下面这个不可摇树优化提供商的例子为 NgModule 注入器配置了一个服务提供商。</p><p translation-origin="off">The following example of non-tree-shakable providers in Angular configures a service provider for the injector of an NgModule.</p><code-example path="dependency-injection/src/app/tree-shaking/service-and-module.ts" header="src/app/tree-shaking/service-and-modules.ts" linenums="false">import { <a href="/api/core/Injectable" class="code-anchor">Injectable</a>, <a href="/api/core/NgModule" class="code-anchor">NgModule</a> } from '@angular/core'; @<a href="/api/core/Injectable" class="code-anchor">Injectable</a>() export class Service { doSomething(): void { } } @<a href="/api/core/NgModule" class="code-anchor">NgModule</a>({ providers: [Service], }) export class ServiceModule { }</code-example><p translation-result="on">该模块以后可以导入到你的应用模块中，以便该服务可注入到你的应用中，例子如下。</p><p translation-origin="off">This module can then be imported into your application module to make the service available for injection in your app, as shown in the following example.</p><code-example path="dependency-injection/src/app/tree-shaking/app.module.ts" header="src/app/tree-shaking/app.modules.ts" linenums="false">@<a href="/api/core/NgModule" class="code-anchor">NgModule</a>({ <a href="/api/core/NgModule#imports" class="code-anchor">imports</a>: [ <a href="/api/platform-browser/BrowserModule" class="code-anchor">BrowserModule</a>, RouterModule.forRoot([]), ServiceModule, ], }) export class AppModule { }</code-example><p translation-result="on">当运行 <code>ngc</code> 时，它会把 <code>AppModule</code> 编译到模块工厂中，工厂包含该模块及其导入的所有模块中声明的所有提供商。在运行时，该工厂会变成负责实例化所有这些服务的注入器。</p><p translation-origin="off">When <code>ngc</code> runs, it compiles <code>AppModule</code> into a module factory, which contains definitions for all the providers declared in all the modules it includes. At runtime, this factory becomes an injector that instantiates these services.</p><p translation-result="on">这里摇树优化不起作用，因为 Angular 无法根据是否用到了其它代码块（服务类），来决定是否能排除这块代码（模块工厂中的服务提供商定义）。要让服务可以被摇树优化，关于如何构建该服务实例的信息（即提供商定义），就应该是服务类本身的一部分。</p><p translation-origin="off">Tree-shaking doesn't work here because Angular can't decide to exclude one chunk of code (the provider definition for the service within the module factory) based on whether another chunk of code (the service class) is used. To make services tree-shakable, the information about how to construct an instance of the service (the provider definition) needs to be a part of the service class itself.</p><h3 translation-result="on" id="创建可摇树优化的提供商">创建可摇树优化的提供商<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#创建可摇树优化的提供商"><i class="material-icons">link</i></a></h3><h3 translation-origin="off" id="creating-tree-shakable-providers">Creating tree-shakable providers<a title="Link to this heading" class="header-link" aria-hidden="true" href="/guide/dependency-injection-providers#creating-tree-shakable-providers"><i class="material-icons">link</i></a></h3><p translation-result="on">只要在服务本身的 <code>@<a href="/api/core/Injectable" class="code-anchor">Injectable</a>()</code> 装饰器中指定，而不是在依赖该服务的 NgModule 或组件的元数据中指定，你就可以制作一个可摇树优化的提供商。</p><p translation-origin="off">You can make a provider tree-shakable by specifying it in the <code>@<a href="/api/core/Injectable" class="code-anchor">Injectable</a>()</code> decorator on the service itself, rather than in the metadata for the NgModule or component that depends on the service.</p><p translation-result="on">下面的例子展示了与上面的 <code>ServiceModule</code> 例子等价的可摇树优化的版本。</p><p translation-origin="off">The following example shows the tree-shakable equivalent to the <code>ServiceModule</code> example above.</p><code-example path="dependency-injection/src/app/tree-shaking/service.ts" header="src/app/tree-shaking/service.ts" linenums="false">@<a href="/api/core/Injectable" class="code-anchor">Injectable</a>({ <a href="/api/core/Injectable#providedIn" class="code-anchor">providedIn</a>: 'root', }) export class Service { }</code-example><p translation-result="on">该服务还可以通过配置工厂函数来实例化，如下例所示。</p><p translation-origin="off">The service can be instantiated by configuring a factory function, as in the following example.</p><code-example path="dependency-injection/src/app/tree-shaking/service.0.ts" header="src/app/tree-shaking/service.0.ts" linenums="false">@<a href="/api/core/Injectable" class="code-anchor">Injectable</a>({ <a href="/api/core/Injectable#providedIn" class="code-anchor">providedIn</a>: 'root', useFactory: () => new Service('dependency'), }) export class Service { constructor(private dep: string) { } }</code-example><div class="alert is-helpful"><p translation-result="on">要想覆盖可摇树优化的提供商，请使用其它提供商来配置指定的 NgModule 或组件的注入器，只要使用 <code>@<a href="/api/core/NgModule" class="code-anchor">NgModule</a>()</code> 或 <code>@<a href="/api/core/Component" class="code-anchor">Component</a>()</code> 装饰器中的 <code>providers: []</code> 数组就可以了。</p><p translation-origin="off">To override a tree-shakable provider, configure the injector of a specific NgModule or component with another provider, using the <code>providers: []</code> array syntax of the <code>@<a href="/api/core/NgModule" class="code-anchor">NgModule</a>()</code> or <code>@<a href="/api/core/Component" class="code-anchor">Component</a>()</code> decorator.</p></div></div></section></mat-sidenav-content></mat-sidenav-container><footer class="no-print"><aio-footer><div class="grid-fluid"><div class="footer-block ng-star-inserted"><h3>资源</h3><ul><li class="ng-star-inserted"><a class="link" href="about" title="Angular 贡献者。">关于</a></li><li class="ng-star-inserted"><a class="link" href="resources" title="网络上的 Angular 工具、培训、博客等">资源列表</a></li><li class="ng-star-inserted"><a class="link" href="presskit" title="我们的联系方式、LOGO 和品牌">宣传资料</a></li><li class="ng-star-inserted"><a class="link" href="https://blog.angular.io/" title="Angular 官方博客">博客</a></li></ul></div><div class="footer-block ng-star-inserted"><h3>帮助</h3><ul><li class="ng-star-inserted"><a class="link" href="https://stackoverflow.com/questions/tagged/angular" title="Stack Overflow: 这里的社区会回答你关于 Angular 的技术问题">Stack Overflow</a></li><li class="ng-star-inserted"><a class="link" href="https://gitter.im/angular/angular" title="和老鸟聊 Angular">Gitter</a></li><li class="ng-star-inserted"><a class="link" href="https://github.com/angular/angular/issues" title="在 github 上报告问题和建议。">报告问题</a></li><li class="ng-star-inserted"><a class="link" href="https://github.com/angular/code-of-conduct/blob/master/CODE_OF_CONDUCT.md" title="让我们彼此尊重">行为规范</a></li></ul></div><div class="footer-block ng-star-inserted"><h3>社区</h3><ul><li class="ng-star-inserted"><a class="link" href="events" title="Post issues and suggestions on github.">活动</a></li><li class="ng-star-inserted"><a class="link" href="http://www.meetup.com/topics/angularjs/" title="参加聚会，向别的开发人员学习">聚会</a></li><li class="ng-star-inserted"><a class="link" href="https://twitter.com/angular" title="Twitter">Twitter</a></li><li class="ng-star-inserted"><a class="link" href="https://github.com/angular/angular" title="GitHub">GitHub</a></li><li class="ng-star-inserted"><a class="link" href="contribute" title="向 Angular 做贡献">做贡献</a></li></ul></div><div class="footer-block ng-star-inserted"><h3>多语言</h3><ul><li class="ng-star-inserted"><a class="link" href="https://angular.io/" title="English Version.">English Version</a></li><li class="ng-star-inserted"><a class="link" href="https://angular.jp/" title="日本語版">日本語版</a></li></ul></div></div><p>Powered by Google ©2010-2018. 代码授权方式：<a href="license" title="License text">MIT-style License</a>. 文档授权方式：<a href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.</p><p>当前版本：7.0.1-local+sha.3ff4bedd0c.</p></aio-footer></footer></aio-shell><noscript><div class="background-sky hero"></div><section id="intro" style="text-shadow:1px 1px #1976d2"><div class="hero-logo"><img src="assets/images/logos/angular/angular.svg" width="250" height="250"></div><div class="homepage-container"><div class="hero-headline">一套框架，多种平台<br>移动 &amp; 桌面</div></div></section><h2 style="color:red;margin-top:40px;position:relative;text-align:center;text-shadow:1px 1px #fafafa"><b><i>该网站需要浏览器支持 JavaScript</i></b></h2></noscript><script src="runtime.77c03f4a0637c9ae63bb.js"></script><script src="polyfills.484bababb6e0f3a2b3fc.js"></script><script src="main.6bc769c43c358bc5a651.js"></script></body></html>