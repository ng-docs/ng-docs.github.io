{"id":"guide/typescript-configuration","title":"TypeScript 配置","contents":"\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/cn/aio/content/guide/typescript-configuration.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"typescript-configuration\" translation-result=\"on\">TypeScript 配置<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/typescript-configuration#typescript-configuration\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\">TypeScript configuration<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/typescript-configuration#typescript-configuration\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">TypeScript 是 Angular 应用开发中使用的主语言。它是 JavaScript 的“方言”之一，为类型安全和工具化而做了设计期支持。</p><p translation-origin=\"off\">TypeScript is a primary language for Angular application development.\nIt is a superset of JavaScript with design-time support for type safety and tooling.</p>\n\n<p translation-result=\"on\">浏览器不能直接执行 TypeScript。它得先用 <em>tsc</em> 编译器转译(transpile)成 JavaScript，而且编译器需要进行一些配置。</p><p translation-origin=\"off\">Browsers can't execute TypeScript directly.\nTypescript must be \"transpiled\" into JavaScript using the <em>tsc</em> compiler, which requires some configuration.</p>\n\n<p translation-result=\"on\">本页面会涵盖 TypeScript 配置与环境的某些方面，这些对 Angular 开发者是很重要的。具体来说包括下列文件：</p><p translation-origin=\"off\">This page covers some aspects of TypeScript configuration and the TypeScript environment\nthat are important to Angular developers, including details about the following files:</p>\n\n<table>\n<thead>\n<tr>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">文件</nt-wrapper><nt-wrapper translation-origin=\"off\">Files</nt-wrapper></th>\n<th align=\"left\"><nt-wrapper translation-result=\"on\">详情</nt-wrapper><nt-wrapper translation-origin=\"off\">Details</nt-wrapper></th>\n</tr>\n</thead>\n<tbody>\n\n<tr>\n<td align=\"left\"><a href=\"guide/typescript-configuration#tsconfig\">tsconfig.json</a></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">TypeScript 编译器配置。</nt-wrapper><nt-wrapper translation-origin=\"off\">TypeScript compiler configuration.</nt-wrapper></td>\n</tr>\n\n<tr>\n<td align=\"left\"><a href=\"guide/typescript-configuration#typings\">typings</a></td>\n<td align=\"left\"><nt-wrapper translation-result=\"on\">TypesScript 类型声明文件。</nt-wrapper><nt-wrapper translation-origin=\"off\">TypesScript declaration files.</nt-wrapper></td>\n</tr>\n\n</tbody>\n</table>\n<p><a id=\"tsconfig\"></a></p>\n<h2 id=\"configuration-files\" translation-result=\"on\">配置文件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/typescript-configuration#configuration-files\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">Configuration files<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/typescript-configuration#configuration-files\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">一个 Angular 工作区中包含多个 TypeScript 配置文件。在根一级，有两个主要的 TypeScript 配置文件：<code>tsconfig.json</code> 文件和 <code>tsconfig.base.json</code> 文件。</p><p translation-origin=\"off\">A given Angular workspace contains several TypeScript configuration files.\nAt the root <code>tsconfig.json</code> file specifies the base TypeScript and Angular compiler options that all projects in the workspace inherit.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">请参阅 <a href=\"guide/angular-compiler-options\">Angular 编译器选项</a>一章，以了解可以使用哪些 Angular 特有的选项。</p><p translation-origin=\"off\">See the <a href=\"guide/angular-compiler-options\">Angular compiler options</a> guide for information about what Angular specific options are available.</p>\n\n</div>\n<p translation-result=\"on\">TypeScript 和 Angular 提供了很多选项，可以用来配置类型检查功能和要生成的输出。更多信息，请参阅 TypeScript 文档中的<a href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#configuration-inheritance-with-extends\">使用 extends 进行配置继承</a>部分。</p><p translation-origin=\"off\">The TypeScript and Angular have a wide range of options which can be used to configure type-checking features and generated output.\nFor more information, see the <a href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#configuration-inheritance-with-extends\">Configuration inheritance with extends</a> section of the TypeScript documentation.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">要了解 TypeScript 配置文件的详情，请参阅官方提供的 <a href=\"http://www.typescriptlang.org/docs/handbook/tsconfig-json.html\">TypeScript 手册</a>。要了解配置继承的详情，参阅<a href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#configuration-inheritance-with-extends\">使用 extends 进行配置继承</a>部分。</p><p translation-origin=\"off\">For more information TypeScript configuration files, see the official <a href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html\">TypeScript handbook</a>.\nFor details about configuration inheritance, see the <a href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#configuration-inheritance-with-extends\">Configuration inheritance with extends</a> section.</p>\n\n</div>\n<p translation-result=\"on\">Angular 工作区的初始 <code>tsconfig.json</code> 通常是这样的。</p><p translation-origin=\"off\">The initial <code>tsconfig.json</code> for an Angular workspace typically looks like the following example.</p>\n\n<code-example header=\"tsconfig.json\" path=\"getting-started/tsconfig.0.json\">\n/* To learn more about this file see: https://angular.io/config/tsconfig. */\n{\n  \"compileOnSave\": false,\n  \"compilerOptions\": {\n    \"baseUrl\": \"./\",\n    \"forceConsistentCasingInFileNames\": true,\n    \"strict\": true,\n    \"noImplicitOverride\": true,\n    \"noPropertyAccessFromIndexSignature\": true,\n    \"noImplicitReturns\": true,\n    \"noFallthroughCasesInSwitch\": true,\n    \"sourceMap\": true,\n    \"declaration\": false,\n    \"downlevelIteration\": true,\n    \"experimentalDecorators\": true,\n    \"moduleResolution\": \"node\",\n    \"importHelpers\": true,\n    \"target\": \"ES2022\",\n    \"module\": \"ES2022\",\n    \"useDefineForClassFields\": false,\n    \"lib\": [\n      \"ES2022\",\n      \"dom\"\n    ]\n  },\n  \"angularCompilerOptions\": {\n    \"enableI18nLegacyMessageIdFormat\": false,\n    \"strictInjectionParameters\": true,\n    \"strictInputAccessModifiers\": true,\n    \"strictTemplates\": true\n  }\n}\n\n\n</code-example>\n<p><a id=\"noImplicitAny\"></a></p>\n<h3 id=\"noimplicitany-and-suppressimplicitanyindexerrors\" translation-result=\"on\"><code>noImplicitAny</code> 与 <code>suppressImplicitAnyIndexErrors</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/typescript-configuration#noimplicitany-and-suppressimplicitanyindexerrors\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\"><code>noImplicitAny</code> and <code>suppressImplicitAnyIndexErrors</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/typescript-configuration#noimplicitany-and-suppressimplicitanyindexerrors\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">TypeScript 开发者们在 <code>noImplicitAny</code> 标志应该是 <code>true</code> 还是 <code>false</code> 上存在分歧。这没有标准答案，你以后还可以修改这个标志。但是你的选择会在大项目中产生显著差异，所以它值得讨论一番。</p><p translation-origin=\"off\">TypeScript developers disagree about whether the <code>noImplicitAny</code> flag should be <code>true</code> or <code>false</code>.\nThere is no correct answer and you can change the flag later.\nBut your choice now can make a difference in larger projects, so it merits discussion.</p>\n\n<p translation-result=\"on\">当 <code>noImplicitAny</code> 标志是 <code>false</code>(默认值)时，如果编译器无法根据变量的用途推断出变量的类型，它就会悄悄的把变量类型默认为 <code>any</code>。这就是<em>隐式 <code>any</code></em>的含义。</p><p translation-origin=\"off\">When the <code>noImplicitAny</code> flag is <code>false</code> (the default), and if the compiler cannot infer the variable type based on how it's used, the compiler silently defaults the type to <code>any</code>.\nThat's what is meant by <em>implicit <code>any</code></em>.</p>\n\n<p translation-result=\"on\">当 <code>noImplicitAny</code> 标志是 <code>true</code> 并且 TypeScript 编译器无法推断出类型时，它仍然会生成 JavaScript 文件。但是它也会<strong>报告一个错误</strong>。很多饱经沧桑的程序员更喜欢这种严格的设置，因为类型检查能在编译期间捕获更多意外错误。</p><p translation-origin=\"off\">When the <code>noImplicitAny</code> flag is <code>true</code> and the TypeScript compiler cannot infer the type, it still generates the JavaScript files, but it also <strong>reports an error</strong>.\nMany seasoned developers prefer this stricter setting because type checking catches more unintentional errors at compile time.</p>\n\n<p translation-result=\"on\">即使 <code>noImplicitAny</code> 标志被设置成了 <code>true</code>，你也可以把变量的类型设置为 <code>any</code>。</p><p translation-origin=\"off\">You can set a variable's type to <code>any</code> even when the <code>noImplicitAny</code> flag is <code>true</code>.</p>\n\n<p translation-result=\"on\">如果把 <code>noImplicitAny</code> 标志设置为了 <code>true</code>，你可能会得到<em>隐式索引错</em>。大多数程序员可能觉得<em>这种错误</em>是个烦恼而不是助力。你可以使用另一个标志来禁止它们。</p><p translation-origin=\"off\">When the <code>noImplicitAny</code> flag is <code>true</code>, you may get <em>implicit index errors</em> as well.\nMost developers feel that <em>this particular error</em> is more annoying than helpful.\nYou can suppress them with the following additional flag:</p>\n\n<code-example>\n\n\"suppressImplicitAnyIndexErrors\": true\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">要了解 TypeScript 配置如何影响编译的更多信息，请参阅 <a href=\"guide/angular-compiler-options\">Angular 编译器选项</a>和<a href=\"guide/template-typecheck\">模板类型检查</a> 两章。</p><p translation-origin=\"off\">For more information about how the TypeScript configuration affects compilation, see <a href=\"guide/angular-compiler-options\">Angular Compiler Options</a> and <a href=\"guide/template-typecheck\">Template Type Checking</a>.</p>\n\n</div>\n<p><a id=\"typings\"></a></p>\n<h2 id=\"typescript-typings\" translation-result=\"on\">TypeScript 类型定义(typings)<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/typescript-configuration#typescript-typings\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\">TypeScript typings<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/typescript-configuration#typescript-typings\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">很多 JavaScript 库，比如 jQuery、Jasmine 测试库和 Angular，会通过新的特性和语法来扩展 JavaScript 环境。而 TypeScript 编译器并不能原生的识别它们。当编译器不能识别时，它就会抛出一个错误。</p><p translation-origin=\"off\">Many JavaScript libraries, such as jQuery, the Jasmine testing library, and Angular, extend the JavaScript environment with features and syntax that the TypeScript compiler doesn't recognize natively.\nWhen the compiler doesn't recognize something, it reports an error.</p>\n\n<p translation-result=\"on\">可以使用<a href=\"https://www.typescriptlang.org/docs/handbook/writing-declaration-files.html\">TypeScript 类型定义文件</a> —— <code>.d.ts</code> 文件 —— 来告诉编译器你要加载的库的类型定义。</p><p translation-origin=\"off\">Use <a href=\"https://www.typescriptlang.org/docs/handbook/writing-declaration-files.html\">TypeScript type definition files</a> —<code>d.ts files</code>— to tell the compiler about the libraries you load.</p>\n\n<p translation-result=\"on\">TypeScript 敏感的编辑器借助这些定义文件来显示这些库中各个特性的类型定义。</p><p translation-origin=\"off\">TypeScript-aware editors leverage these same definition files to display type information about library features.</p>\n\n<p translation-result=\"on\">很多库在自己的 npm 包中都包含了它们的类型定义文件，TypeScript 编译器和编辑器都能找到它们。Angular 库也是这样的。任何 Angular 应用程序的 <code>node_modules/@angular/core/</code> 目录下，都包含几个 <code>d.ts</code> 文件，它们描述了 Angular 的各个部分。</p><p translation-origin=\"off\">Many libraries include definition files in their npm packages where both the TypeScript compiler and editors\ncan find them.\nAngular is one such library.\nThe <code>node_modules/@angular/core/</code> folder of any Angular application contains several <code>d.ts</code> files that describe parts of Angular.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">你不需要为那些包含了 <code>d.ts</code> 文件的库获取<em>类型定义</em>文件 —— Angular 的所有包都是如此。</p><p translation-origin=\"off\">You don't need to do anything to get <em>typings</em> files for library packages that include <code>d.ts</code> files.\nAngular packages include them already.</p>\n\n</div>\n<h3 id=\"lib\"><code>lib</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/typescript-configuration#lib\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">TypeScript 包含一组默认的声明文件。这些文件包含 JavaScript 运行时和 DOM 中存在的各种通用 JavaScript 结构的环境声明。</p><p translation-origin=\"off\">TypeScript includes a default set of declaration files.\nThese files contain the ambient declarations for various common JavaScript constructs present in JavaScript runtimes and the DOM.</p>\n\n<p translation-result=\"on\">有关更多信息，请参阅 TypeScript 指南中的<a href=\"https://www.typescriptlang.org/tsconfig#lib\">lib</a> 。</p><p translation-origin=\"off\">For more information, see <a href=\"https://www.typescriptlang.org/tsconfig#lib\">lib</a> in the TypeScript guide.</p>\n\n<h3 id=\"installable-typings-files\" translation-result=\"on\">安装类型定义文件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/typescript-configuration#installable-typings-files\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Installable typings files<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/typescript-configuration#installable-typings-files\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">遗憾的是，很多库 —— jQuery、Jasmine 和 Lodash 等库 —— 都<em>没有</em>在它们自己的 npm 包中包含 <code>d.ts</code> 文件。幸运的是，它们的作者或社区中的贡献者已经为这些库创建了独立的 <code>d.ts</code> 文件，并且把它们发布到了一个众所周知的位置。</p><p translation-origin=\"off\">Many libraries —jQuery, Jasmine, and Lodash among them— do <em>not</em> include <code>d.ts</code> files in their npm packages.\nFortunately, either their authors or community contributors have created separate <code>d.ts</code> files for these libraries and published them in well-known locations.</p>\n\n<p translation-result=\"on\">你可以通过 <code>npm</code> 来使用 <a href=\"https://www.typescriptlang.org/docs/handbook/declaration-files/consumption.html\"><code>@types/*</code> 范围化包</a>来安装这些类型。</p><p translation-origin=\"off\">You can install these typings with <code>npm</code> using the <a href=\"https://www.typescriptlang.org/docs/handbook/declaration-files/consumption.html\"><code>@types/*</code> scoped package</a>.</p>\n\n<p translation-result=\"on\"><code>@types/*</code> 中自动包含哪些环境声明文件由 <a href=\"https://www.typescriptlang.org/tsconfig#types\">TypeScript 编译器选项 <code>types</code></a>决定。Angular CLI 会生成一个 <code>tsconfig.app.json</code> 文件，用于构建应用程序，其中 <code>types</code> 编译器选项设置为 <code>[]</code> 以禁止自动包含来自 <code>@types/*</code> 的声明。同时，<code>tsconfig.spec.json</code> 文件用于测试并设置 <code>\"types\": [\"jasmine\"]</code> 以允许在测试中使用 Jasmine 的环境声明。</p><p translation-origin=\"off\">Which ambient declaration files in <code>@types/*</code> are automatically included is determined by the <a href=\"https://www.typescriptlang.org/tsconfig#types\"><code>types</code> TypeScript compiler option</a>.\nThe Angular CLI generates a <code>tsconfig.app.json</code> file which is used to build an application, in which the <code>types</code> compiler option is set to <code>[]</code> to disable automatic inclusion of declarations from <code>@types/*</code>.\nSimilarly, the <code>tsconfig.spec.json</code> file is used for testing and sets <code>\"types\": [\"jasmine\"]</code> to allow using Jasmine's ambient declarations in tests.</p>\n\n<p translation-result=\"on\">在安装了 <code>@types/*</code> 声明之后，你还要修改 <code>tsconfig.app.json</code> 和 <code>tsconfig.spec.json</code> 文件，以便把新安装的声明文件添加到它们的 <code>types</code> 列表中。如果这些声明文件只是供测试用的，那么只要修改 <code>tsconfig.spec.json</code> 文件就可以了。</p><p translation-origin=\"off\">After installing <code>@types/*</code> declarations, you have to update the <code>tsconfig.app.json</code> and <code>tsconfig.spec.json</code> files to add the newly installed declarations to the list of <code>types</code>.\nIf the declarations are only meant for testing, then only the <code>tsconfig.spec.json</code> file should be updated.</p>\n\n<p translation-result=\"on\">比如，要安装 <code>chai</code> 的类型信息，你可以执行 <code>npm install @types/chai --save-dev</code>，然后修改 <code>tsconfig.spec.json</code> 来把 <code>\"chai\"</code> 添加到 <code>types</code> 列表中。</p><p translation-origin=\"off\">For instance, to install typings for <code>chai</code> you run <code>npm install @types/chai --save-dev</code> and then update <code>tsconfig.spec.json</code> to add <code>\"chai\"</code> to the list of <code>types</code>.</p>\n\n<p><a id=\"target\"></a></p>\n<h3 id=\"target\"><code>target</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/typescript-configuration#target\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">默认情况下，编译目标是 <code>es2022</code>。要控制 ECMA 语法，请使用 <a href=\"https://github.com/browserslist/browserslist\">Browserslist</a> 配置文件。欲知详情，参见<a href=\"/guide/build#configuring-browser-compatibility\">配置浏览器兼容性</a>一章。</p><p translation-origin=\"off\">By default, the target is <code>ES2022</code>. To control ECMA syntax use the <a href=\"https://github.com/browserslist/browserslist\">Browserslist</a> configuration file.\nFor more information, see the <a href=\"/guide/build#configuring-browser-compatibility\">configuring browser compatibility</a> guide.</p>\n\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最后复查时间： 10/24/2022</div>\n</div>\n\n\n<!-- links to this doc:\n - guide/angular-compiler-options\n - guide/aot-compiler\n - guide/architecture-next-steps\n - guide/file-structure\n - guide/glossary\n - guide/template-typecheck\n - guide/upgrade\n-->\n<!-- links from this doc:\n - /guide/build#configuring-browser-compatibility\n - guide/angular-compiler-options\n - guide/template-typecheck\n - guide/typescript-configuration#configuration-files\n - guide/typescript-configuration#installable-typings-files\n - guide/typescript-configuration#lib\n - guide/typescript-configuration#noimplicitany-and-suppressimplicitanyindexerrors\n - guide/typescript-configuration#noimplicitany-与-suppressimplicitanyindexerrors\n - guide/typescript-configuration#target\n - guide/typescript-configuration#tsconfig\n - guide/typescript-configuration#typescript-configuration\n - guide/typescript-configuration#typescript-typings\n - guide/typescript-configuration#typescript-类型定义typings\n - guide/typescript-configuration#typescript-配置\n - guide/typescript-configuration#typings\n - guide/typescript-configuration#安装类型定义文件\n - guide/typescript-configuration#配置文件\n - http://www.typescriptlang.org/docs/handbook/tsconfig-json.html\n - https://github.com/angular/angular-cn/edit/cn/aio/content/guide/typescript-configuration.md?message=docs%3A%20请简述你的修改...\n - https://github.com/browserslist/browserslist\n - https://www.typescriptlang.org/docs/handbook/declaration-files/consumption.html\n - https://www.typescriptlang.org/docs/handbook/tsconfig-json.html\n - https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#configuration-inheritance-with-extends\n - https://www.typescriptlang.org/docs/handbook/writing-declaration-files.html\n - https://www.typescriptlang.org/tsconfig#lib\n - https://www.typescriptlang.org/tsconfig#types\n-->"}