{
  "id": "guide/language-service",
  "title": "Angular Language Service",
  "contents": "\n\n\n  <div class=\"github-links\">\n    <a href=\"https://github.com/angular/angular-cn/edit/aio/aio/content/guide/language-service.md?message=docs%3A%20修改说明...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  </div>\n\n\n<div class=\"content\">\n<h1 id=\"angular-language-service\" translation-result=\"on\">Angular 语言服务<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#angular-language-service\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\" id=\"angular-language-service\">Angular Language Service<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#angular-language-service\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">Angular 语言服务让你能在模板内获得自动完成、错误检查、给出提示和内部导航等功能，而不用管这些模板位于外部 HTML 文件中还是内嵌在注解/装饰器的字符串中。\nAngular 语言服务会自动检测你要打开的文件（从你的 <code>tsconfig.json</code> 中读取），找出应用中所需的所有模板，然后为你打开的这些模板提供语言服务。</p><p translation-origin=\"off\">The Angular Language Service is a way to get completions, errors,\nhints, and navigation inside your Angular templates whether they\nare external in an HTML file or embedded in annotations/decorators\nin a string. The Angular Language Service autodetects that you are\nopening an Angular file, reads your <code>tsconfig.json</code> file, finds all the\ntemplates you have in your application, and then provides language\nservices for any templates that you open.</p>\n\n<h2 id=\"autocompletion\" translation-result=\"on\">自动完成<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#autocompletion\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"autocompletion\">Autocompletion<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#autocompletion\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">自动完成可以在输入时为你提供当前情境下的候选内容和提示，从而提高开发速度。下面这个例子展示了插值表达式中的自动完成功能。当你进行输入的时候，就可以按 tab 键来自动完成。</p><p translation-origin=\"off\">Autocompletion can speed up your development time by providing you with\ncontextual possibilities and hints as you type. This example shows\nautocomplete in an interpolation. As you type it out,\nyou can hit tab to complete.</p>\n\n<figure>\n  <img src=\"generated/images/guide/language-service/language-completion.gif\" alt=\"autocompletion\" width=\"480\" height=\"72\">\n</figure>\n<p translation-result=\"on\">还有对元素的自动完成。你定义的任何组件的选择器都会显示在自动完成列表中。</p><p translation-origin=\"off\">There are also completions within\nelements. Any elements you have as a component selector will\nshow up in the completion list.</p>\n\n<h2 id=\"error-checking\" translation-result=\"on\">错误检查<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#error-checking\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"error-checking\">Error checking<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#error-checking\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">Angular 语言服务还能对代码中存在的错误进行预警。在这个例子中，Angular 不知道什么是 <code>orders</code> 或者它来自哪里。</p><p translation-origin=\"off\">The Angular Language Service can also forewarn you of mistakes in your code.\nIn this example, Angular doesn't know what <code>orders</code> is or where it comes from.</p>\n\n<figure>\n  <img src=\"generated/images/guide/language-service/language-error.gif\" alt=\"error checking\" width=\"480\" height=\"126\">\n</figure>\n<h2 id=\"navigation\" translation-result=\"on\">导航<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#navigation\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"navigation\">Navigation<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#navigation\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">导航可以让你在鼠标悬浮时看到某个组件、指令、模块等来自哪里，然后可以点击并按 F12 直接跳转到它的定义处。</p><p translation-origin=\"off\">Navigation allows you to hover to\nsee where a component, directive, module, etc. is from and then\nclick and press F12 to go directly to its definition.</p>\n\n<figure>\n  <img src=\"generated/images/guide/language-service/language-navigation.gif\" alt=\"navigation\" width=\"392\" height=\"186\">\n</figure>\n<h2 id=\"angular-language-service-in-your-editor\" translation-result=\"on\">编辑器中的 Angular 语言服务<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#angular-language-service-in-your-editor\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"angular-language-service-in-your-editor\">Angular Language Service in your editor<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#angular-language-service-in-your-editor\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">Angular 语言服务目前在<a href=\"https://code.visualstudio.com/\">Visual Studio Code</a>和<a href=\"https://www.jetbrains.com/webstorm\">WebStorm</a>中都是可用的。</p><p translation-origin=\"off\">Angular Language Service is currently available for <a href=\"https://code.visualstudio.com/\">Visual Studio Code</a> and\n<a href=\"https://www.jetbrains.com/webstorm\">WebStorm</a>.</p>\n\n<h3 id=\"visual-studio-code\" translation-result=\"on\">Visual Studio Code 中<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#visual-studio-code\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"visual-studio-code\">Visual Studio Code<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#visual-studio-code\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">Visual Studio Code 可以从商店中安装语言服务，这个功能就在左侧菜单面板最底下的那个图标。\n你也可以使用 VS 的快速打开（⌘+P）功能来查找这个扩展插件。打开它之后就输入下列命令：</p><p translation-origin=\"off\">In Visual Studio Code, install Angular Language Service from the store,\nwhich is accessible from the bottom icon on the left menu pane.\nYou can also use the VS Quick Open (⌘+P) to search for the extension. When you've opened it,\nenter the following command:</p>\n\n<code-example language=\"sh\">\next install Angular.ng-template\n</code-example>\n<p translation-result=\"on\">然后点击安装按钮来安装 Angular 语言服务。</p><p translation-origin=\"off\">Then click the install button to install the Angular Language Service.</p>\n\n<h3 id=\"webstorm\" translation-result=\"on\">WebStorm 中<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#webstorm\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"webstorm\">WebStorm<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#webstorm\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">在 WebStorm 中，你必须把语言服务安装为一个开发依赖。\n当 Angular 看到这个开发依赖时，它就会在 WebStorm 中提供语言服务。除了 Angular 语言服务之外，WebStorm 还会为你提供模板中的代码高亮和自动完成功能。</p><p translation-origin=\"off\">In webstorm, you have to install the language service as a dev dependency.\nWhen Angular sees this dev dependency, it provides the\nlanguage service inside of WebStorm. Webstorm then gives you\ncolorization inside the template and autocomplete in addition to the Angular Language Service.</p>\n\n<p translation-result=\"on\">下面这个开发依赖需要添加到 <code>package.json</code> 中：</p><p translation-origin=\"off\">Here's the dev dependency\nyou need to have in <code>package.json</code>:</p>\n\n<code-example language=\"json\">\ndevDependencies {\n  \"@angular/language-service\": \"^6.0.0\"\n}\n</code-example>\n<p translation-result=\"on\">然后，打开终端窗口，在项目根目录下使用 <code>npm</code> 或 <code>yarn</code> 来安装这些 <code>devDependencies</code>：</p><p translation-origin=\"off\">Then in the terminal window at the root of your project,\ninstall the <code>devDependencies</code> with <code>npm</code> or <code>yarn</code>:</p>\n\n<code-example language=\"sh\">\nnpm install \n</code-example>\n<p translation-result=\"on\"><em>或</em></p><p translation-origin=\"off\"><em>OR</em></p>\n\n<code-example language=\"sh\">\nyarn\n</code-example>\n<p translation-result=\"on\"><em>或</em></p><p translation-origin=\"off\"><em>OR</em></p>\n\n<code-example language=\"sh\">\nyarn install\n</code-example>\n<h3 id=\"sublime-text\" translation-result=\"on\">Sublime Text 编辑器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#sublime-text\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"sublime-text\">Sublime Text<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#sublime-text\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">在<a href=\"https://www.sublimetext.com/\">Sublime Text</a>中，你首先需要一个扩展来支持 TypeScript。\n把最新版本的 TypeScript 安装到本地的 <code>node_modules</code> 目录下：</p><p translation-origin=\"off\">In <a href=\"https://www.sublimetext.com/\">Sublime Text</a>, you first need an extension to allow Typescript.\nInstall the latest version of typescript in a local <code>node_modules</code> directory:</p>\n\n<code-example language=\"sh\">\nnpm install --save-dev typescript\n</code-example>\n<p translation-result=\"on\">然后把 Angular 语言服务安装到同一位置：</p><p translation-origin=\"off\">Then install the Angular Language Service in the same location:</p>\n\n<code-example language=\"sh\">\nnpm install --save-dev @angular/language-service\n</code-example>\n<p translation-result=\"on\">从 TypeScript 2.3 开始，TypeScript 提供了一种插件模式的语言服务可以用。</p><p translation-origin=\"off\">Starting with TypeScript 2.3, TypeScript has a language service plugin model that the language service can use.</p>\n\n<p translation-result=\"on\">接下来，在你的用户首选项中（按 <code>Cmd+,</code> 或 <code>Ctrl+,</code>）添加：</p><p translation-origin=\"off\">Next, in your user preferences (<code>Cmd+,</code> or <code>Ctrl+,</code>), add:</p>\n\n<code-example language=\"json\">\n\"typescript-tsdk\": \"&#x3C;path to your folder>/node_modules/typescript/lib\"\n</code-example>\n<h2 id=\"installing-in-your-project\" translation-result=\"on\">安装到项目中<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#installing-in-your-project\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"installing-in-your-project\">Installing in your project<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#installing-in-your-project\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">你还可以使用下列 <code>npm</code> 命令来把 Angular 语言服务安装到项目中：</p><p translation-origin=\"off\">You can also install Angular Language Service in your project with the\nfollowing <code>npm</code> command:</p>\n\n<code-example language=\"sh\">\nnpm install --save-dev @angular/language-service\n</code-example>\n<p translation-result=\"on\">另外，还要在项目的 <code>tsconfig.json</code> 中添加下列 <code>\"compilerOptions\"</code> 区域：</p><p translation-origin=\"off\">Additionally, add the following to the <code>\"compilerOptions\"</code> section of\nyour project's <code>tsconfig.json</code>.</p>\n\n<code-example language=\"json\">\n  \"plugins\": [\n      {\"name\": \"@angular/language-service\"}\n  ]\n</code-example>\n<p translation-result=\"on\">注意，这只是提供了 <code>.ts</code> 文件中的诊断与自动完成。你需要一个自定义的 sublime 插件（或修改现有插件）来在 HTML 文件中提供自动完成功能。</p><p translation-origin=\"off\">Note that this only provides diagnostics and completions in <code>.ts</code>\nfiles. You need a custom sublime plugin (or modifications to the current plugin)\nfor completions in HTML files.</p>\n\n<h2 id=\"how-the-language-service-works\" translation-result=\"on\">语言服务的工作原理<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#how-the-language-service-works\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"how-the-language-service-works\">How the Language Service works<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#how-the-language-service-works\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">当使用带有语言服务的编辑器时，就会有一个编辑器进程，它会启动一个独立的语言服务进程/服务，它们通过<a href=\"https://en.wikipedia.org/wiki/Remote_procedure_call\" translation-result=\"on\">抽象语法树</a><a href=\"https://en.wikipedia.org/wiki/Remote_procedure_call\" translation-origin=\"off\">RPC</a>彼此交谈。\n当你在编辑器中输入的时候，它把这些信息发送到另一个进程中，以便追踪项目的状态。\n当你在模板中触发一个自动完成列表时，编辑器进程就会先把这个模板解析成 HTML AST，或者叫。然后，Angular 编译器就会解释模板所属的模块以及模板选择器。然后它找出光标目前正在模板 AST 的什么位置。一旦它确定了情境，就可以决定其子节点可以是什么了。</p><p translation-origin=\"off\">When you use an editor with a language service, there's an\neditor process which starts a separate language process/service\nto which it speaks through an <a href=\"https://en.wikipedia.org/wiki/Remote_procedure_call\">RPC</a>.\nAny time you type inside of the editor, it sends information to the other process to\ntrack the state of your project. When you trigger a completion list within a template, the editor process first parses the template into an HTML AST, or <a href=\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\">abstract syntax tree</a>. Then the Angular compiler interprets\nwhat module the template is part of, the scope you're in, and the component selector. Then it figures out where in the template AST your cursor is. When it determines the\ncontext, it can then determine what the children can be.</p>\n\n<p translation-result=\"on\">如果是在插值表达式中，还会牵扯到更多东西。如果你在 <code>div</code> 元素中有一个插值表达式 <code>{{data.---}}</code>，并且需要在输入了 <code>data.</code> 之后提供自动完成列表，编译器就没办法使用 HTML AST 来找出答案了。\nHTML AST 只能告诉编译器，有一些具有 \"<code>{{data.---}}</code>\" 特征的文本。也就是说模板解析器会生成表达式的 AST ，并且放在模板的 AST 中。Angular 语言服务然后在这个情境下查找 <code>data.---</code>，并向 TypeScript 语言服务询问这些数据都有哪些成员。然后 TypeScript 就会返回一个可能的列表。</p><p translation-origin=\"off\">It's a little more involved if you are in an interpolation. If you have an interpolation of <code>{{data.---}}</code> inside a <code>div</code> and need the completion list after <code>data.---</code>, the compiler can't use the HTML AST to find the answer. The HTML AST can only tell the compiler that there is some text with the characters \"<code>{{data.---}}</code>\". That's when the template parser produces an expression AST, which resides within the template AST. The Angular Language Services then looks at <code>data.---</code> within its context and asks the TypeScript Language Service what the members of data are. TypeScript then returns the list of possibilities.</p>\n\n<p translation-result=\"on\">要了解更多更深入的信息，参见 <a href=\"https://github.com/angular/angular/blob/master/packages/language-service/src/types.ts\">Angular 语言服务 API</a></p><p translation-origin=\"off\">For more in-depth information, see the\n<a href=\"https://github.com/angular/angular/blob/master/packages/language-service/src/types.ts\">Angular Language Service API</a></p>\n\n<hr>\n<h2 id=\"more-on-information\" translation-result=\"on\">更多信息<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#more-on-information\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"more-on-information\">More on Information<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#more-on-information\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">要了解更多信息，参见 <a href=\"https://www.ng-conf.org/\" translation-result=\"on\">Chuck Jazdzewski 的演讲</a><a href=\"https://www.ng-conf.org/\" translation-origin=\"off\">ng-conf</a> 2017 中  中讲解的 Angular 语言服务。</p><p translation-origin=\"off\">For more information, see <a href=\"https://www.youtube.com/watch?v=ez3R0Gi4z5A&#x26;t=368s\">Chuck Jazdzewski's presentation</a> on the Angular Language\nService from <a href=\"https://www.ng-conf.org/\">ng-conf</a> 2017.</p>\n\n\n</div>\n\n<!-- links to this doc:\n - guide/npm-packages\n-->\n<!-- links from this doc:\n - guide/language-service#angular-language-service\n - guide/language-service#angular-language-service-in-your-editor\n - guide/language-service#autocompletion\n - guide/language-service#error-checking\n - guide/language-service#how-the-language-service-works\n - guide/language-service#installing-in-your-project\n - guide/language-service#more-on-information\n - guide/language-service#navigation\n - guide/language-service#sublime-text\n - guide/language-service#visual-studio-code\n - guide/language-service#webstorm\n - https://code.visualstudio.com/\n - https://en.wikipedia.org/wiki/Abstract_syntax_tree\n - https://en.wikipedia.org/wiki/Remote_procedure_call\n - https://github.com/angular/angular-cn/edit/aio/aio/content/guide/language-service.md?message=docs%3A%20修改说明...\n - https://github.com/angular/angular/blob/master/packages/language-service/src/types.ts\n - https://www.jetbrains.com/webstorm\n - https://www.ng-conf.org/\n - https://www.sublimetext.com/\n - https://www.youtube.com/watch?v=ez3R0Gi4z5A&t=368s\n-->"
}