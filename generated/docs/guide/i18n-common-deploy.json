{
  "id": "guide/i18n-common-deploy",
  "title": "Deploy multiple locales",
  "contents": "\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/aio/aio/content/guide/i18n-common-deploy.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"deploy-multiple-locales\" translation-result=\"on\">部署多个语言环境<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#deploy-multiple-locales\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\" id=\"deploy-multiple-locales\">Deploy multiple locales<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#deploy-multiple-locales\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">如果 <code>myapp</code> 是包含项目可分发文件的目录，你通常会在语言环境目录中为不同的语言环境提供不同的版本，例如法语版的 <code>myapp/fr</code> 和西班牙语版的 <code>myapp/es</code> 。</p><p translation-origin=\"off\">If <code>myapp</code> is the directory that contains the distributable files of your project, you typically make different versions available for different locales in locale directories.  For example, your French version is located in the <code>myapp/fr</code> directory and the Spanish version is located in the <code>myapp/es</code> directory.</p>\n\n<p translation-result=\"on\">带有 <code>href</code> 属性的 HTML <code>base</code> 标签指定了相对链接的基本 URI 或 URL。如果你将工作空间构建配置文件 <a href=\"guide/workspace-config\" title=\"Angular workspace configuration | Angular\"><code>angular.json</code></a> 中的 <code>\"localize\"</code> 选项设置为 <code>true</code> 或语言环境 ID 数组，CLI 会为应用程序的每个版本调整 base <code>href</code> 。要为应用程序的每个版本调整 base <code>href</code> ，CLI 会将语言环境添加到配置的 <code>\"baseHref\"</code> 中。在工作区配置文件 <a href=\"guide/workspace-config\" title=\"Angular workspace configuration | Angular\"><code>angular.json</code></a> 中为每个语言环境指定 <code>\"baseHref\"</code> 。以下示例展示了设置为空字符串的 <code>\"baseHref\"</code> 。</p><p translation-origin=\"off\">The HTML <code>base</code> tag with the <code>href</code> attribute specifies the base URI, or URL, for relative links.\nIf you set the <code>\"localize\"</code> option in <a href=\"guide/workspace-config\" title=\"Angular workspace configuration | Angular\"><code>angular.json</code></a> workspace build configuration file to <code>true</code> or to an array of locale IDs, the CLI adjusts the base <code>href</code> for each version of the application.\nTo adjust the base <code>href</code> for each version of the application, the CLI adds the locale to the configured <code>\"baseHref\"</code>.\nSpecify the <code>\"baseHref\"</code> for each locale in your <a href=\"guide/workspace-config\" title=\"Angular workspace configuration | Angular\"><code>angular.json</code></a> workspace build configuration file.\nThe following example displays <code>\"baseHref\"</code> set to an empty string.</p>\n\n<code-example language=\"json\" header=\"angular.json\" path=\"i18n/angular.json\" region=\"i18n-baseHref\">\n  \"projects\": {\n    \"angular.io-example\": {\n      // ...\n      \"i18n\": {\n        \"sourceLocale\": \"en-US\",\n        \"locales\": {\n          \"fr\": \"src/locale/messages.fr.xlf\",\n          \"baseHref\": \"\"\n        }\n      },\n      \"architect\": {\n        // ...\n      }\n    }\n  },\n  // ...\n}\n\n</code-example>\n<p translation-result=\"on\">此外，要在编译时声明 base <code>href</code> ，请将在 CLI 中使用带有 <code>--baseHref</code> 选项的 <a href=\"cli/build\" title=\"ng build | CLI | Angular\"> <code>ng build</code> </a>。</p><p translation-origin=\"off\">Also, to declare the base <code>href</code> at compile time, use the CLI <code>--baseHref</code> option with <a href=\"cli/build\" title=\"ng build | CLI | Angular\"><code>ng build</code></a>.</p>\n\n<h2 id=\"configure-a-server\" translation-result=\"on\">配置服务器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#configure-a-server\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"configure-a-server\">Configure a server<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#configure-a-server\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">多语言的典型部署方式是为来自不同子目录的每种语言提供服务。使用 <code>Accept-Language</code> HTTP 标头将用户重定向到浏览器中定义的首选语言。如果用户未定义首选语言，或者首选语言不可用，则服务器将回退到默认语言。要更改语言，就转到另一个子目录。<br>\n子目录的更改通常使用应用程序中实现的菜单进行。</p><p translation-origin=\"off\">Typical deployment of multiple languages serve each language from a different subdirectory.\nUsers are redirected to the preferred language defined in the browser using the <code>Accept-Language</code> HTTP header.\nIf the user has not defined a preferred language, or if the preferred language is not available, then the server falls back to the default language.\nTo change the language, change your current location to another subdirectory.\nThe change of subdirectory often occurs using a menu implemented in the application.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">有关如何将应用程序部署到远程服务器的更多信息，请参阅<a href=\"guide/deployment\" title=\"Deployment | Angular\">部署</a>。</p><p translation-origin=\"off\">For more information on how to deploy apps to a remote server, see <a href=\"guide/deployment\" title=\"Deployment | Angular\">Deployment</a>.</p>\n\n</div>\n<h3 id=\"nginx-example\" translation-result=\"on\">Nginx 范例<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#nginx-example\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"nginx-example\">Nginx example<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#nginx-example\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">以下示例展示了 Nginx 配置。</p><p translation-origin=\"off\">The following example displays an Nginx configuration.</p>\n\n<code-example path=\"i18n/doc-files/nginx.conf\" language=\"nginx\">\n<a href=\"api/common/http\" class=\"code-anchor\">http</a> {\n    # Browser preferred language detection (does NOT require\n    # AcceptLanguageModule)\n    map $http_accept_language $accept_language {\n        ~*^de de;\n        ~*^fr fr;\n        ~*^en en;\n    }\n    # ...\n}\n\nserver {\n    listen 80;\n    server_name localhost;\n    root /www/data;\n\n    # Fallback to default language if no preference defined by <a href=\"api/animations/browser\" class=\"code-anchor\">browser</a>\n    if ($accept_language ~ \"^$\") {\n        set $accept_language \"fr\";\n    }\n\n    # Redirect \"/\" to Angular application in the preferred language of the <a href=\"api/animations/browser\" class=\"code-anchor\">browser</a>\n    rewrite ^/$ /$accept_language permanent;\n\n    # Everything under the Angular application is always redirected to Angular in the\n    # correct language\n    location ~ ^/(fr|de|en) {\n        try_files $uri /$1/index.html?$args;\n    }\n    # ...\n}\n\n\n</code-example>\n<h3 id=\"apache-example\" translation-result=\"on\">Apache 范例<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#apache-example\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"apache-example\">Apache example<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#apache-example\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">以下示例展示了 Apache 配置。</p><p translation-origin=\"off\">The following example displays an Apache configuration.</p>\n\n<code-example path=\"i18n/doc-files/apache2.conf\" language=\"apache\">\n&#x3C;VirtualHost *:80>\n    ServerName localhost\n    DocumentRoot /www/data\n    &#x3C;Directory \"/www/data\">\n        RewriteEngine on\n        RewriteBase /\n        RewriteRule ^../index\\.html$ - [L]\n\n        RewriteCond %{REQUEST_FILENAME} !-f\n        RewriteCond %{REQUEST_FILENAME} !-d\n        RewriteRule (..) $1/index.html [L]\n\n        RewriteCond %{HTTP:Accept-Language} ^de [NC]\n        RewriteRule ^$ /de/ [R]\n\n        RewriteCond %{HTTP:Accept-Language} ^en [NC]\n        RewriteRule ^$ /en/ [R]\n\n        RewriteCond %{HTTP:Accept-Language} !^en [NC]\n        RewriteCond %{HTTP:Accept-Language} !^de [NC]\n        RewriteRule ^$ /fr/ [R]\n    &#x3C;/Directory>\n&#x3C;/VirtualHost>\n\n\n</code-example>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最后复查时间： 2021/10/7</div>\n</div>\n\n\n<!-- links to this doc:\n - guide/i18n-common-merge\n - guide/i18n-common-overview\n-->\n<!-- links from this doc:\n - api/animations/browser\n - api/common/http\n - cli/build\n - guide/deployment\n - guide/i18n-common-deploy#apache-example\n - guide/i18n-common-deploy#configure-a-server\n - guide/i18n-common-deploy#deploy-multiple-locales\n - guide/i18n-common-deploy#nginx-example\n - guide/workspace-config\n - https://github.com/ng-docs/angular-cn/edit/aio/aio/content/guide/i18n-common-deploy.md?message=docs%3A%20请简述你的修改...\n-->"
}