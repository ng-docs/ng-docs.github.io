{
  "id": "guide/routing-with-urlmatcher",
  "title": "Tutorial: Creating custom route matches",
  "contents": "\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/aio/aio/content/guide/routing-with-urlmatcher.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"tutorial-creating-custom-route-matches\" translation-result=\"on\">教程：创建自定义路由匹配器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#tutorial-creating-custom-route-matches\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\" id=\"tutorial-creating-custom-route-matches\">Tutorial: Creating custom route matches<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#tutorial-creating-custom-route-matches\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">Angular Router 支持强大的匹配策略，你可以使用它来帮助用户在应用中导航。该匹配策略支持静态路由、带参数的可变路由、通配符路由等。此外，还可以为更复杂的 URL 构建你自己的自定义模式匹配。</p><p translation-origin=\"off\">The Angular Router supports a powerful matching strategy that you can use to help users navigate your application. This matching strategy supports static routes, variable routes with parameters, wildcard routes, and so on. Also, build your own custom pattern matching for situations in which the URLs are more complicated.</p>\n\n<p translation-result=\"on\">在本教程中，你将使用 Angular 的 <code><a href=\"api/router/UrlMatcher\" class=\"code-anchor\">UrlMatcher</a></code> 来构建自定义路由匹配器。此匹配器在 URL 中查找 Twitter ID。</p><p translation-origin=\"off\">In this tutorial, you'll build a custom route matcher using Angular's <code><a href=\"api/router/UrlMatcher\" class=\"code-anchor\">UrlMatcher</a></code>. This matcher looks for a Twitter handle in the URL.</p>\n\n<p translation-result=\"on\">有关本教程最终版本的工作示例，请参阅<live-example></live-example> 。</p><p translation-origin=\"off\">For a working example of the final version of this tutorial, see the <live-example></live-example>.</p>\n\n<h2 id=\"objectives\" translation-result=\"on\">目标<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#objectives\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"objectives\">Objectives<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#objectives\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">实现 Angular 的 <code><a href=\"api/router/UrlMatcher\" class=\"code-anchor\">UrlMatcher</a></code> 以创建自定义路由匹配器。</p><p translation-origin=\"off\">Implement Angular's <code><a href=\"api/router/UrlMatcher\" class=\"code-anchor\">UrlMatcher</a></code> to create a custom route matcher.</p>\n\n<h2 id=\"prerequisites\" translation-result=\"on\">前提条件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#prerequisites\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"prerequisites\">Prerequisites<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#prerequisites\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">要完成本教程，你应该对以下概念有基本的了解：</p><p translation-origin=\"off\">To complete this tutorial, you should have a basic understanding of the following concepts:</p>\n\n<ul>\n<li>JavaScript</li>\n<li>HTML</li>\n<li>CSS</li>\n<li><a href=\"/cli\">Angular CLI</a></li>\n</ul>\n<p translation-result=\"on\">如果你不熟悉 Angular 路由器的工作原理，请阅读<a href=\"guide/router-tutorial\">在单页应用程序中使用 Angular 路由</a>。</p><p translation-origin=\"off\">If you are unfamiliar with how Angular's router works, review <a href=\"guide/router-tutorial\">Using Angular routes in a single-page application</a>.</p>\n\n<h2 id=\"create-a-sample-application\" translation-result=\"on\">创建示例应用程序<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#create-a-sample-application\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"create-a-sample-application\">Create a sample application<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#create-a-sample-application\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">使用 Angular CLI，创建一个新应用程序 <em>angular-custom-route-match</em> 。除了默认的 Angular 应用程序框架之外，还将创建一个 <em>profile</em> 组件。</p><p translation-origin=\"off\">Using the Angular CLI, create a new application, <em>angular-custom-route-match</em>. In addition to the default Angular application framework, you will also create a <em>profile</em> component.</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">创建一个新的 Angular 项目 <em>angular-custom-route-match</em> 。</p><p translation-origin=\"off\">Create a new Angular project, <em>angular-custom-route-match</em>.</p>\n\n<code-example language=\"sh\">\nng new angular-custom-route-match\n</code-example>\n<p translation-result=\"on\">当提示 <code>Would you like to add Angular routing?</code> 时，选择 <code>Y</code> 。</p><p translation-origin=\"off\">When prompted with <code>Would you like to add Angular routing?</code>, select <code>Y</code>.</p>\n\n<p translation-result=\"on\">当提示 <code>Which stylesheet format would you like to use?</code> 时，选择 <code>CSS</code> 。</p><p translation-origin=\"off\">When prompted with <code>Which stylesheet format would you like to use?</code>, select <code>CSS</code>.</p>\n\n<p translation-result=\"on\">片刻之后，一个新项目 <code>angular-custom-route-match</code> 就准备好了。</p><p translation-origin=\"off\">After a few moments, a new project, <code>angular-custom-route-match</code>, is ready.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">打开终端窗口，进到 <code>angular-custom-route-match</code> 目录。</p><p translation-origin=\"off\">From your terminal, navigate to the <code>angular-custom-route-match</code> directory.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">创建一个组件 <em>profile</em> 。</p><p translation-origin=\"off\">Create a component, <em>profile</em>.</p>\n\n<code-example language=\"sh\">\n ng generate component profile\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">在你的代码编辑器中，找到文件 <code>profile.component.html</code> 并将其占位内容替换为以下 HTML。</p><p translation-origin=\"off\">In your code editor, locate the file, <code>profile.component.html</code> and replace\nthe placeholder content with the following HTML.</p>\n\n<code-example path=\"routing-with-urlmatcher/src/app/profile/profile.component.html\" header=\"src/app/profile/profile.component.html\">\n&#x3C;p>\nHello {{ username$ | async }}!\n&#x3C;/p>\n\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">在你的代码编辑器中，找到文件 <code>app.component.html</code> 并将其占位内容替换为以下 HTML。</p><p translation-origin=\"off\">In your code editor, locate the file, <code>app.component.html</code> and replace\nthe placeholder content with the following HTML.</p>\n\n<code-example path=\"routing-with-urlmatcher/src/app/app.component.html\" header=\"src/app/app.component.html\">\n&#x3C;h2>Routing with Custom Matching&#x3C;/h2>\n\nNavigate to &#x3C;a <a href=\"api/router/RouterLink\" class=\"code-anchor\">routerLink</a>=\"/@Angular\">my profile&#x3C;/a>\n\n&#x3C;<a href=\"api/router/RouterOutlet\" class=\"code-anchor\">router-outlet</a>>&#x3C;/<a href=\"api/router/RouterOutlet\" class=\"code-anchor\">router-outlet</a>>\n\n</code-example>\n</li>\n</ol>\n<h2 id=\"configure-your-routes-for-your-application\" translation-result=\"on\">为你的应用程序配置路由<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#configure-your-routes-for-your-application\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"configure-your-routes-for-your-application\">Configure your routes for your application<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#configure-your-routes-for-your-application\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">应用程序框架就绪后，接下来就要向 <code>app.module.ts</code> 文件中添加路由能力。首先，你要创建一个自定义 URL 匹配器，用于在 URL 中查找 Twitter ID。此 ID 由其前导 <code>@</code> 符号标识出来。</p><p translation-origin=\"off\">With your application framework in place, you next need to add routing capabilities to the <code>app.module.ts</code> file. As a part of this process, you will create a custom URL matcher that looks for a Twitter handle in the URL. This handle is identified by a preceding <code>@</code> symbol.</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">在你的代码编辑器中，打开 <code>app.module.ts</code> 文件。</p><p translation-origin=\"off\">In your code editor, open your <code>app.module.ts</code> file.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">为 Angular 的 <code><a href=\"api/router/RouterModule\" class=\"code-anchor\">RouterModule</a></code> 和 <code><a href=\"api/router/UrlMatcher\" class=\"code-anchor\">UrlMatcher</a></code> 添加 <code>import</code> 语句。</p><p translation-origin=\"off\">Add an <code>import</code> statement for Angular's <code><a href=\"api/router/RouterModule\" class=\"code-anchor\">RouterModule</a></code> and <code><a href=\"api/router/UrlMatcher\" class=\"code-anchor\">UrlMatcher</a></code>.</p>\n\n<code-example path=\"routing-with-urlmatcher/src/app/app.module.ts\" header=\"src/app/app.module.ts\" region=\"import\">\nimport { <a href=\"api/router/RouterModule\" class=\"code-anchor\">RouterModule</a>, <a href=\"api/router/UrlSegment\" class=\"code-anchor\">UrlSegment</a> } from '@angular/router';\n\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">在 <code>imports</code> 数组中，添加 <code>RouterModule.forRoot([])</code> 语句。</p><p translation-origin=\"off\">In the imports array, add a <code>RouterModule.forRoot([])</code> statement.</p>\n\n<code-example path=\"routing-with-urlmatcher/src/app/app.module.ts\" header=\"src/app/app.module.ts\" region=\"imports-array\">\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  imports:      [\n    <a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a>,\n    <a href=\"api/forms/FormsModule\" class=\"code-anchor\">FormsModule</a>,\n    RouterModule.forRoot([\n      {\n/* . . . */\n    ])],\n  declarations: [ AppComponent, ProfileComponent ],\n  bootstrap:    [ AppComponent ]\n})\n\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">将如下代码添加到 <code><a href=\"api/router/RouterModule#forRoot\" class=\"code-anchor\">RouterModule.forRoot()</a></code> 语句中，以便使用自定义路由匹配器。</p><p translation-origin=\"off\">Define the custom route matcher by adding the following code to the <code><a href=\"api/router/RouterModule#forRoot\" class=\"code-anchor\">RouterModule.forRoot()</a></code> statement.</p>\n\n<code-example path=\"routing-with-urlmatcher/src/app/app.module.ts\" header=\"src/app/app.module.ts\" region=\"matcher\">\n  matcher: (url) => {\n    if (url.length === 1 &#x26;&#x26; url[0].path.match(/^@[\\w]+$/gm)) {\n      return {\n        consumed: url,\n        posParams: {\n          username: new <a href=\"api/router/UrlSegment\" class=\"code-anchor\">UrlSegment</a>(url[0].path.substr(1), {})\n        }\n      };\n    }\n\n    return null;\n  },\n  component: ProfileComponent\n}\n\n</code-example>\n</li>\n</ol>\n<p translation-result=\"on\">这个自定义匹配器是一个执行以下任务的函数：</p><p translation-origin=\"off\">This custom matcher is a function that performs the following tasks:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">匹配器验证数组是否只包含一个区段。</p><p translation-origin=\"off\">The matcher verifies that the array contains only one segment.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">匹配器使用正则表达式来确保用户名的格式是匹配的。</p><p translation-origin=\"off\">The matcher employs a regular expression to ensure that the format of the username is a match.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">如果匹配，则该函数返回整个 URL，将路由参数 <code>username</code> 定义为路径的子字符串。</p><p translation-origin=\"off\">If there is a match, the function returns the entire URL, defining a <code>username</code> route parameter as a substring of the path.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">如果不匹配，则该函数返回 <code>null</code> 并且路由器继续查找与 URL 匹配的其他路由。</p><p translation-origin=\"off\">If there isn't a match, the function returns null and the router continues to look for other routes that match the URL.</p>\n\n</li>\n</ul>\n<div class=\"is-helpful\">\n<p translation-result=\"on\">自定义 URL 匹配器的行为与任何其他路由定义方式是一样的。请像定义任何其他路由一样定义子路由或惰性加载路由。</p><p translation-origin=\"off\">A custom URL matcher behaves like any other route definition. Define child routes or lazy loaded routes as you would with any other route.</p>\n\n</div>\n<h2 id=\"subscribe-to-the-route-parameters\" translation-result=\"on\">订阅路由参数<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#subscribe-to-the-route-parameters\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"subscribe-to-the-route-parameters\">Subscribe to the route parameters<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#subscribe-to-the-route-parameters\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">自定义匹配器就位后，你现在需要订阅 <code>profile</code> 组件中的路由参数。</p><p translation-origin=\"off\">With the custom matcher in place, you now need to subscribe to the route parameters in the <code>profile</code> component.</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">在你的代码编辑器中，打开 <code>profile.component.ts</code> 文件。</p><p translation-origin=\"off\">In your code editor, open your <code>profile.component.ts</code> file.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">为 Angular 的 <code><a href=\"api/router/ActivatedRoute\" class=\"code-anchor\">ActivatedRoute</a></code> 和 <code><a href=\"api/router/ParamMap\" class=\"code-anchor\">ParamMap</a></code> 添加 <code>import</code> 语句。</p><p translation-origin=\"off\">Add an <code>import</code> statement for Angular's <code><a href=\"api/router/ActivatedRoute\" class=\"code-anchor\">ActivatedRoute</a></code> and <code><a href=\"api/router/ParamMap\" class=\"code-anchor\">ParamMap</a></code>.</p>\n\n<code-example path=\"routing-with-urlmatcher/src/app/profile/profile.component.ts\" header=\"src/app/profile/profile.component.ts\" region=\"activated-route-and-parammap\">\nimport { <a href=\"api/router/ActivatedRoute\" class=\"code-anchor\">ActivatedRoute</a>, <a href=\"api/router/ParamMap\" class=\"code-anchor\">ParamMap</a> } from '@angular/router';\n\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">为 RxJS 的 <code>map</code> 添加 <code>import</code> 语句。</p><p translation-origin=\"off\">Add an <code>import</code> statement for RxJS <code>map</code>.</p>\n\n<code-example path=\"routing-with-urlmatcher/src/app/profile/profile.component.ts\" header=\"src/app/profile/profile.component.ts\" region=\"rxjs-map\">\nimport { map } from 'rxjs/operators';\n\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">订阅 <code>username</code> 路由参数。</p><p translation-origin=\"off\">Subscribe to the <code>username</code> route parameter.</p>\n\n<code-example path=\"routing-with-urlmatcher/src/app/profile/profile.component.ts\" header=\"src/app/profile/profile.component.ts\" region=\"subscribe\">\nusername$ = this.route.paramMap\n  .pipe(\n    map((params: <a href=\"api/router/ParamMap\" class=\"code-anchor\">ParamMap</a>) => params.get('username'))\n  );\n\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">将 <code><a href=\"api/router/ActivatedRoute\" class=\"code-anchor\">ActivatedRoute</a></code> 注入到组件的构造函数中。</p><p translation-origin=\"off\">Inject the <code><a href=\"api/router/ActivatedRoute\" class=\"code-anchor\">ActivatedRoute</a></code> into the component's constructor.</p>\n\n<code-example path=\"routing-with-urlmatcher/src/app/profile/profile.component.ts\" header=\"src/app/profile/profile.component.ts\" region=\"activatedroute\">\nconstructor(private route: <a href=\"api/router/ActivatedRoute\" class=\"code-anchor\">ActivatedRoute</a>) { }\n\n</code-example>\n</li>\n</ol>\n<h2 id=\"test-your-custom-url-matcher\" translation-result=\"on\">测试你的自定义 URL 匹配器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#test-your-custom-url-matcher\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"test-your-custom-url-matcher\">Test your custom URL matcher<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#test-your-custom-url-matcher\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">代码就绪后，就可以测试自定义 URL 匹配器了。</p><p translation-origin=\"off\">With your code in place, you can now test your custom URL matcher.</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">在终端窗口中，运行 <code>ng serve</code> 命令。</p><p translation-origin=\"off\">From a terminal window, run the <code>ng serve</code> command.</p>\n\n<code-example language=\"sh\">\n ng serve\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">打开浏览器访问 <code>http://localhost:4200</code> 。</p><p translation-origin=\"off\">Open a browser to <code>http://localhost:4200</code>.</p>\n\n<p translation-result=\"on\">你会看到一个网页，其中包含一个句子，内容为 <code>Navigate to my profile</code> 。</p><p translation-origin=\"off\">You should see a single web page, consisting of a sentence that reads <code>Navigate to my profile</code>.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">单击 <strong>my profile</strong> 超链接。</p><p translation-origin=\"off\">Click the <strong>my profile</strong> hyperlink.</p>\n\n<p translation-result=\"on\">一个新的句子 <code>Hello, Angular!</code> 出现在页面上。</p><p translation-origin=\"off\">A new sentence, reading <code>Hello, Angular!</code> appears on the page.</p>\n\n</li>\n</ol>\n<h2 id=\"next-steps\" translation-result=\"on\">下一步<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#next-steps\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"next-steps\">Next steps<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/routing-with-urlmatcher#next-steps\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">当你的应用程序中有动态 URL 时，使用 Angular Router 提供的模式匹配功能，可以为你提供很大的灵活性。要了解有关 Angular Router 的更多信息，请参阅以下主题：</p><p translation-origin=\"off\">Pattern matching with the Angular Router provides you with a lot of flexibility when you have dynamic URLs in your application. To learn more about the Angular Router,  see the following topics:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><a href=\"/guide/router\">应用内路由和导航</a></p><p translation-origin=\"off\"><a href=\"/guide/router\">In-app Routing and Navigation</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"/api/router\">路由器接口</a></p><p translation-origin=\"off\"><a href=\"/api/router\">Router API</a></p>\n\n</li>\n</ul>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">此内容基于 <a href=\"https://twitter.com/brandontroberts\">Brandon Roberts</a> 的<a href=\"https://medium.com/@brandontroberts/custom-route-matching-with-the-angular-router-fbdd48665483\">为 Angular Router 使用自定义路由匹配</a> 。</p><p translation-origin=\"off\">This content is based on <a href=\"https://medium.com/@brandontroberts/custom-route-matching-with-the-angular-router-fbdd48665483\">Custom Route Matching with the Angular Router</a>, by <a href=\"https://twitter.com/brandontroberts\">Brandon Roberts</a>.</p>\n\n</div>\n\n  \n</div>\n\n\n<!-- links to this doc:\n - guide/routing-overview\n-->\n<!-- links from this doc:\n - /api/router\n - /cli\n - /guide/router\n - api/core/NgModule\n - api/forms/FormsModule\n - api/platform-browser/BrowserModule\n - api/router/ActivatedRoute\n - api/router/ParamMap\n - api/router/RouterLink\n - api/router/RouterModule\n - api/router/RouterModule#forRoot\n - api/router/RouterOutlet\n - api/router/UrlMatcher\n - api/router/UrlSegment\n - guide/router-tutorial\n - guide/routing-with-urlmatcher#configure-your-routes-for-your-application\n - guide/routing-with-urlmatcher#create-a-sample-application\n - guide/routing-with-urlmatcher#next-steps\n - guide/routing-with-urlmatcher#objectives\n - guide/routing-with-urlmatcher#prerequisites\n - guide/routing-with-urlmatcher#subscribe-to-the-route-parameters\n - guide/routing-with-urlmatcher#test-your-custom-url-matcher\n - guide/routing-with-urlmatcher#tutorial-creating-custom-route-matches\n - https://github.com/ng-docs/angular-cn/edit/aio/aio/content/guide/routing-with-urlmatcher.md?message=docs%3A%20请简述你的修改...\n - https://medium.com/@brandontroberts/custom-route-matching-with-the-angular-router-fbdd48665483\n - https://twitter.com/brandontroberts\n-->"
}
