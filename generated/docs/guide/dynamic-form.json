{
  "id": "guide/dynamic-form",
  "title": "Building dynamic forms",
  "contents": "\n\n\n  <div class=\"github-links\">\n    <a href=\"https://github.com/angular/angular-cn/edit/aio/aio/content/guide/dynamic-form.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  </div>\n\n\n<div class=\"content\">\n<h1 id=\"building-dynamic-forms\" translation-result=\"on\">构建动态表单<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#building-dynamic-forms\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\" id=\"building-dynamic-forms\">Building dynamic forms<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#building-dynamic-forms\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">许多表单（例如问卷）可能在格式和意图上都非常相似。为了更快更轻松地生成这种表单的不同版本，你可以根据描述业务对象模型的元数据来创建<em>动态表单模板</em>。然后就可以根据数据模型中的变化，使用该模板自动生成新的表单。</p><p translation-origin=\"off\">Many forms, such as questionaires, can be very similar to one another in format and intent.\nTo make it faster and easier to generate different versions of such a form,\nyou can create a <em>dynamic form template</em> based on metadata that describes the business object model.\nYou can then use the template to generate new forms automatically, according to changes in the data model.</p>\n\n<p translation-result=\"on\">如果你有这样一种表单，其内容必须经常更改以满足快速变化的业务需求和监管需求，该技术就特别有用。一个典型的例子就是问卷。你可能需要在不同的上下文中获取用户的意见。用户要看到的表单格式和样式应该保持不变，而你要提的实际问题则会因上下文而异。</p><p translation-origin=\"off\">The technique is particularly useful when you have a type of form whose content must\nchange frequently to meet rapidly changing business and regulatory requirements.\nA typical use case is a questionaire. You might need to get input from users in different contexts.\nThe format and style of the forms a user sees should remain constant, while the actual questions you need to ask vary with the context.</p>\n\n<p translation-result=\"on\">在本教程中，你将构建一个渲染基本问卷的动态表单。你要为正在找工作的英雄们建立一个在线应用。英雄管理局会不断修补应用流程，但是借助动态表单，你可以动态创建新的表单，而无需修改应用代码。</p><p translation-origin=\"off\">In this tutorial you will build a dynamic form that presents a basic questionaire.\nYou will build an online application for heroes seeking employment.\nThe agency is constantly tinkering with the application process, but by using the dynamic form\nyou can create the new forms on the fly without changing the application code.</p>\n\n<p translation-result=\"on\">本教程将指导你完成以下步骤。</p><p translation-origin=\"off\">The tutorial walks you through the following steps.</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">为项目启用响应式表单。</p><p translation-origin=\"off\">Enable reactive forms for a project.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">建立一个数据模型来表示表单控件。</p><p translation-origin=\"off\">Establish a data model to represent form controls.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">使用范例数据填充模型。</p><p translation-origin=\"off\">Populate the model with sample data.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">开发一个组件来动态创建表单控件。</p><p translation-origin=\"off\">Develop a component to create form controls dynamically.</p>\n\n</li>\n</ol>\n<p translation-result=\"on\">你创建的表单会使用输入验证和样式来改善用户体验。它有一个 Submit 按钮，这个按钮只会在所有的用户输入都有效时启用，并用色彩和一些错误信息来标记出无效输入。</p><p translation-origin=\"off\">The form you create uses input validation and styling to improve the user experience.\nIt has a Submit button that is only enabled when all user input is valid, and flags invalid input with color coding and error messages.</p>\n\n<p translation-result=\"on\">这个基本版可以不断演进，以支持更多的问题类型、更优雅的渲染体验以及更高大上的用户体验。</p><p translation-origin=\"off\">The basic version can evolve to support a richer variety of questions, more graceful rendering, and superior user experience.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\">参阅 <live-example name=\"dynamic-form\"></live-example>。</p><p translation-origin=\"off\">See the <live-example name=\"dynamic-form\"></live-example>.</p>\n\n</div>\n<h2 id=\"prerequisites\" translation-result=\"on\">先决条件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#prerequisites\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"prerequisites\">Prerequisites<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#prerequisites\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">在做本教程之前，你应该对下列内容有一个基本的了解。</p><p translation-origin=\"off\">Before doing this tutorial, you should have a basic understanding to the following.</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><a href=\"https://www.typescriptlang.org/docs/home.html\" title=\"TypeScript 语言\">TypeScript</a> 和 HTML5 编程。</p><p translation-origin=\"off\"><a href=\"https://www.typescriptlang.org/docs/home.html\" title=\"The TypeScript language\">TypeScript</a> and HTML5 programming.</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/architecture\" title=\"Angular 应用设计概念简介\">Angular 应用设计</a>的基本概念。</p><p translation-origin=\"off\">Fundamental concepts of <a href=\"guide/architecture\" title=\"Introduction to Angular app-design concepts\">Angular app design</a>.</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/reactive-forms\" title=\"反应表单指南\">响应式表单</a>的基础知识。</p><p translation-origin=\"off\">Basic knowledge of <a href=\"guide/reactive-forms\" title=\"Reactive forms guide\">reactive forms</a>.</p>\n\n</li>\n</ul>\n<h2 id=\"enable-reactive-forms-for-your-project\" translation-result=\"on\">为项目启用响应式表单<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#enable-reactive-forms-for-your-project\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"enable-reactive-forms-for-your-project\">Enable reactive forms for your project<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#enable-reactive-forms-for-your-project\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">动态表单是基于响应式表单的。为了让应用访问响应式表达式指令，<a href=\"guide/bootstrapping\" title=\"要学习如何从根模块启动一个应用。\">根模块会</a>从 <code>@angular/forms</code> 库中导入 <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code>。</p><p translation-origin=\"off\">Dynamic forms are based on reactive forms. To give the application access reactive forms directives, the <a href=\"guide/bootstrapping\" title=\"Learn about bootstrapping an app from the root module.\">root module</a> imports <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code> from the <code>@angular/forms</code> library.</p>\n\n<p translation-result=\"on\">以下代码展示了此范例在根模块中所做的设置。</p><p translation-origin=\"off\">The following code from the example shows the setup in the root module.</p>\n\n<code-tabs>\n\n  <code-pane header=\"app.module.ts\" path=\"dynamic-form/src/app/app.module.ts\">\nimport { <a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a> } from '@angular/platform-browser';\nimport { <a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a> } from '@angular/forms';\nimport { <a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a> } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport { DynamicFormComponent } from './dynamic-form.component';\nimport { DynamicFormQuestionComponent } from './dynamic-form-question.component';\n\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  imports: [ <a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a>, <a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a> ],\n  declarations: [ AppComponent, DynamicFormComponent, DynamicFormQuestionComponent ],\n  bootstrap: [ AppComponent ]\n})\nexport class AppModule {\n  constructor() {\n  }\n}\n\n\n</code-pane>\n\n  <code-pane header=\"main.ts\" path=\"dynamic-form/src/main.ts\">\nimport { <a href=\"api/core/enableProdMode\" class=\"code-anchor\">enableProdMode</a> } from '@angular/core';\nimport { <a href=\"api/platform-browser-dynamic/platformBrowserDynamic\" class=\"code-anchor\">platformBrowserDynamic</a> } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  <a href=\"api/core/enableProdMode\" class=\"code-anchor\">enableProdMode</a>();\n}\n\n<a href=\"api/platform-browser-dynamic/platformBrowserDynamic\" class=\"code-anchor\">platformBrowserDynamic</a>().bootstrapModule(AppModule);\n\n\n</code-pane>\n\n</code-tabs>\n<a id=\"object-model\"></a>\n<h2 id=\"create-a-form-object-model\" translation-result=\"on\">创建一个表单对象模型<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#create-a-form-object-model\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"create-a-form-object-model\">Create a form object model<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#create-a-form-object-model\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">动态表单需要一个对象模型来描述此表单功能所需的全部场景。英雄应用表单中的例子是一组问题 - 也就是说，表单中的每个控件都必须提问并接受一个答案。</p><p translation-origin=\"off\">A dynamic form requires an object model that can describe all scenarios needed by the form functionality.\nThe example hero-application form is a set of questions—that is, each control in the form must ask a question and accept an answer.</p>\n\n<p translation-result=\"on\">此类表单的数据模型必须能表示一个问题。本例中包含 <code>DynamicFormQuestionComponent</code>，它定义了一个问题作为模型中的基本对象。</p><p translation-origin=\"off\">The data model for this type of form must represent a question.\nThe example includes the <code>DynamicFormQuestionComponent</code>, which defines a  question as the fundamental object in the model.</p>\n\n<p translation-result=\"on\">这个 <code>QuestionBase</code> 是一组控件的基类，可以在表单中表示问题及其答案。</p><p translation-origin=\"off\">The following <code>QuestionBase</code> is a base class for a set of controls that can represent the question and its answer in the form.</p>\n\n<code-example path=\"dynamic-form/src/app/question-base.ts\" header=\"src/app/question-base.ts\">\nexport class QuestionBase&#x3C;T> {\n  value: T;\n  key: string;\n  label: string;\n  required: boolean;\n  order: number;\n  controlType: string;\n  type: string;\n  options: {key: string, value: string}[];\n\n  constructor(options: {\n      value?: T;\n      key?: string;\n      label?: string;\n      required?: boolean;\n      order?: number;\n      controlType?: string;\n      type?: string;\n      options?: {key: string, value: string}[];\n    } = {}) {\n    this.value = options.value;\n    this.key = options.key || '';\n    this.label = options.label || '';\n    this.required = !!options.required;\n    this.order = options.order === undefined ? 1 : options.order;\n    this.controlType = options.controlType || '';\n    this.type = options.type || '';\n    this.options = options.options || [];\n  }\n}\n\n\n</code-example>\n<h3 id=\"define-control-classes\" translation-result=\"on\">定义控件类<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#define-control-classes\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"define-control-classes\">Define control classes<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#define-control-classes\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">此范例从这个基类派生出两个新类，<code>TextboxQuestion</code> 和 <code>DropdownQuestion</code>，分别代表不同的控件类型。当你在下一步中创建表单模板时，你会实例化这些具体的问题类，以便动态渲染相应的控件。</p><p translation-origin=\"off\">From this base, the example derives two new classes, <code>TextboxQuestion</code> and <code>DropdownQuestion</code>,\nthat represent different control types.\nWhen you create the form template in the next step, you will instantiate these specific question types in order to render the appropriate controls dynamically.</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><code>TextboxQuestion</code> 控件类型表示一个普通问题，并允许用户输入答案。</p><p translation-origin=\"off\">The <code>TextboxQuestion</code> control type presents a question and allows users to enter input.</p>\n\n<p> <code-example path=\"dynamic-form/src/app/question-textbox.ts\" header=\"src/app/question-textbox.ts\">\nimport { QuestionBase } from './question-base';\n\nexport class TextboxQuestion extends QuestionBase&#x3C;string> {\n  controlType = 'textbox';\n}\n\n\n</code-example></p>\n<p translation-result=\"on\"><code>TextboxQuestion</code> 控件类型将使用 <code>&#x3C;input></code> 元素表示在表单模板中。该元素的 <code>type</code> 属性将根据 <code>options</code> 参数中指定的 <code>type</code> 字段定义（例如 <code>text</code>，<code><a href=\"api/forms/EmailValidator\" class=\"code-anchor\">email</a></code>，<code>url</code> ）。</p><p translation-origin=\"off\"> The <code>TextboxQuestion</code> control type will be represented in a form template using an <code>&#x3C;input></code> element.\nThe <code>type</code> attribute of the element will be defined based on the <code>type</code> field specified in the <code>options</code> argument (for example <code>text</code>, <code><a href=\"api/forms/EmailValidator\" class=\"code-anchor\">email</a></code>, <code>url</code>).</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><code>DropdownQuestion</code> 控件表示在选择框中的一个选项列表。</p><p translation-origin=\"off\">The <code>DropdownQuestion</code> control presents a list of choices in a select box.</p>\n\n<p> <code-example path=\"dynamic-form/src/app/question-dropdown.ts\" header=\"src/app/question-dropdown.ts\">\nimport { QuestionBase } from './question-base';\n\nexport class DropdownQuestion extends QuestionBase&#x3C;string> {\n  controlType = 'dropdown';\n}\n\n\n</code-example></p>\n</li>\n</ul>\n<h3 id=\"compose-form-groups\" translation-result=\"on\">编写表单组<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#compose-form-groups\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"compose-form-groups\">Compose form groups<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#compose-form-groups\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">动态表单会使用一个服务来根据表单模型创建输入控件的分组集合。下面的 <code>QuestionControlService</code> 会收集一组 <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> 实例，这些实例会消费问题模型中的元数据。你可以指定一些默认值和验证规则。</p><p translation-origin=\"off\">A dynamic form uses a service to create grouped sets of input controls, based on the form model.\nThe following <code>QuestionControlService</code> collects a set of <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> instances that consume the metadata from the question model. You can specify default values and validation rules.</p>\n\n<code-example path=\"dynamic-form/src/app/question-control.service.ts\" header=\"src/app/question-control.service.ts\">\nimport { <a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a> } from '@angular/core';\nimport { <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>, <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>, <a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a> } from '@angular/forms';\n\nimport { QuestionBase } from './question-base';\n\n@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()\nexport class QuestionControlService {\n  constructor() { }\n\n  toFormGroup(questions: QuestionBase&#x3C;string>[] ) {\n    const group: any = {};\n\n    questions.forEach(question => {\n      group[question.key] = question.required ? new <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>(question.value || '', Validators.required)\n                                              : new <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>(question.value || '');\n    });\n    return new <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>(group);\n  }\n}\n\n\n</code-example>\n<a id=\"form-component\"></a>\n<h2 id=\"compose-dynamic-form-contents\" translation-result=\"on\">编写动态表单内容<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#compose-dynamic-form-contents\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"compose-dynamic-form-contents\">Compose dynamic form contents<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#compose-dynamic-form-contents\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">动态表单本身就是一个容器组件，稍后你会添加它。每个问题都会在表单组件的模板中用一个 <code>&#x3C;app-question></code> 标签表示，该标签会匹配 <code>DynamicFormQuestionComponent</code> 中的一个实例。</p><p translation-origin=\"off\">The dynamic form itself will be represented by a container component, which you will add in a later step.\nEach question is represented in the form component's template by an <code>&#x3C;app-question></code> tag, which matches an instance of <code>DynamicFormQuestionComponent</code>.</p>\n\n<p translation-result=\"on\"><code>DynamicFormQuestionComponent</code> 负责根据数据绑定的问题对象中的各种值来渲染单个问题的详情。该表单依靠 <a href=\"api/forms/FormGroupDirective\" title=\"API 参考\"><code>[formGroup]</code> 指令</a>来将模板 HTML 和底层的控件对象联系起来。<code>DynamicFormQuestionComponent</code> 会创建表单组，并用问题模型中定义的控件来填充它们，并指定显示和验证规则。</p><p translation-origin=\"off\">The <code>DynamicFormQuestionComponent</code> is responsible for rendering the details of an individual question based on values in the data-bound question object.\nThe form relies on a <a href=\"api/forms/FormGroupDirective\" title=\"API reference\"><code>[formGroup]</code> directive</a> to connect the template HTML to the underlying control objects.\nThe <code>DynamicFormQuestionComponent</code> creates form groups and populates them with controls defined in the question model, specifying display and validation rules.</p>\n\n<code-tabs>\n\n  <code-pane header=\"dynamic-form-question.component.html\" path=\"dynamic-form/src/app/dynamic-form-question.component.html\">\n&#x3C;div [formGroup]=\"form\">\n  &#x3C;label [attr.for]=\"question.key\">{{question.label}}&#x3C;/label>\n\n  &#x3C;div [<a href=\"api/common/NgSwitch\" class=\"code-anchor\">ngSwitch</a>]=\"question.controlType\">\n\n    &#x3C;input *<a href=\"api/common/NgSwitchCase\" class=\"code-anchor\">ngSwitchCase</a>=\"'textbox'\" [<a href=\"api/forms/FormControlName\" class=\"code-anchor\">formControlName</a>]=\"question.key\"\n            [id]=\"question.key\" [type]=\"question.type\">\n\n    &#x3C;select [id]=\"question.key\" *<a href=\"api/common/NgSwitchCase\" class=\"code-anchor\">ngSwitchCase</a>=\"'dropdown'\" [<a href=\"api/forms/FormControlName\" class=\"code-anchor\">formControlName</a>]=\"question.key\">\n      &#x3C;option *<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a>=\"let opt of question.options\" [value]=\"opt.key\">{{opt.value}}&#x3C;/option>\n    &#x3C;/select>\n\n  &#x3C;/div>\n\n  &#x3C;div class=\"errorMessage\" *<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a>=\"!isValid\">{{question.label}} is required&#x3C;/div>\n&#x3C;/div>\n\n\n</code-pane>\n\n  <code-pane header=\"dynamic-form-question.component.ts\" path=\"dynamic-form/src/app/dynamic-form-question.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/Input\" class=\"code-anchor\">Input</a> } from '@angular/core';\nimport { <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a> } from '@angular/forms';\n\nimport { QuestionBase } from './question-base';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-question',\n  templateUrl: './dynamic-form-question.component.html'\n})\nexport class DynamicFormQuestionComponent {\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>() question: QuestionBase&#x3C;string>;\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>() form: <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>;\n  get isValid() { return this.form.controls[this.question.key].valid; }\n}\n\n\n</code-pane>\n\n</code-tabs>\n<p translation-result=\"on\"><code>DynamicFormQuestionComponent</code> 的目标是展示模型中定义的各类问题。你现在只有两类问题，但可以想象将来还会有更多。模板中的 <code><a href=\"api/common/NgSwitch\" class=\"code-anchor\">ngSwitch</a></code> 语句会决定要显示哪种类型的问题。这里用到了带有 <a href=\"api/forms/FormControlName\" title=\"FormControlName 指令的 API Reference 参考\"><code>formControlName</code></a> 和<a href=\"api/forms/FormGroupDirective\" title=\"FormGroupDirective API 参考指南\"><code>formGroup</code></a> 选择器的指令。这两个指令都是在 <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code> 中定义的。</p><p translation-origin=\"off\">The goal of the <code>DynamicFormQuestionComponent</code> is to present question types defined in your model.\nYou only have two types of questions at this point but you can imagine many more.\nThe <code><a href=\"api/common/NgSwitch\" class=\"code-anchor\">ngSwitch</a></code> statement in the template determines which type of question to display.\nThe switch uses directives with the <a href=\"api/forms/FormControlName\" title=\"FormControlName directive API reference\"><code>formControlName</code></a> and <a href=\"api/forms/FormGroupDirective\" title=\"FormGroupDirective API reference\"><code>formGroup</code></a> selectors. Both directives are defined in <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code>.</p>\n\n<a id=\"questionnaire-data\"></a>\n<a id=\"surveyire-data\"></a>\n<h3 id=\"supply-data\" translation-result=\"on\">提供数据<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#supply-data\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"supply-data\">Supply data<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#supply-data\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">还要另外一项服务来提供一组具体的问题，以便构建出一个单独的表单。在本练习中，你将创建 <code>QuestionService</code> 以从硬编码的范例数据中提供这组问题。在真实世界的应用中，该服务可能会从后端获取数据。重点是，你可以完全通过 <code>QuestionService</code> 返回的对象来控制英雄的求职申请问卷。要想在需求发生变化时维护问卷，你只需要在 <code>questions</code> 数组中添加、更新和删除对象。</p><p translation-origin=\"off\">Another service is needed to supply a specific set of questions from which to build an individual form.\nFor this exercise you will create the <code>QuestionService</code> to supply this array of questions from the hard-coded sample data.\nIn a real-world app, the service might fetch data from a backend system.\nThe key point, however, is that you control the hero job-application questions entirely through the objects returned from <code>QuestionService</code>.\nTo maintain the questionnaire as requirements change, you only need to add, update, and remove objects from the <code>questions</code> array.</p>\n\n<p translation-result=\"on\"><code>QuestionService</code> 以一个绑定到 <code>@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</code> 的问题数组的形式提供了一组问题。</p><p translation-origin=\"off\">The <code>QuestionService</code> supplies a set of questions in the form of an array bound to <code>@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</code> questions.</p>\n\n<code-example path=\"dynamic-form/src/app/question.service.ts\" header=\"src/app/question.service.ts\">\nimport { <a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a> } from '@angular/core';\n\nimport { DropdownQuestion } from './question-dropdown';\nimport { QuestionBase } from './question-base';\nimport { TextboxQuestion } from './question-textbox';\nimport { of } from 'rxjs';\n\n@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()\nexport class QuestionService {\n\n  // TODO: get from a remote source of question metadata\n  getQuestions() {\n\n    const questions: QuestionBase&#x3C;string>[] = [\n\n      new DropdownQuestion({\n        key: 'brave',\n        label: 'Bravery Rating',\n        options: [\n          {key: 'solid',  value: 'Solid'},\n          {key: 'great',  value: 'Great'},\n          {key: 'good',   value: 'Good'},\n          {key: 'unproven', value: 'Unproven'}\n        ],\n        order: 3\n      }),\n\n      new TextboxQuestion({\n        key: 'firstName',\n        label: 'First name',\n        value: 'Bombasto',\n        required: true,\n        order: 1\n      }),\n\n      new TextboxQuestion({\n        key: 'emailAddress',\n        label: 'Email',\n        type: '<a href=\"api/forms/EmailValidator\" class=\"code-anchor\">email</a>',\n        order: 2\n      })\n    ];\n\n    return of(questions.sort((a, b) => a.order - b.order));\n  }\n}\n\n\n</code-example>\n<a id=\"dynamic-template\"></a>\n<h2 id=\"create-a-dynamic-form-template\" translation-result=\"on\">创建一个动态表单模板<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#create-a-dynamic-form-template\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"create-a-dynamic-form-template\">Create a dynamic form template<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#create-a-dynamic-form-template\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\"><code>DynamicFormComponent</code> 组件是表单的入口点和主容器，它在模板中用 <code>&#x3C;app-dynamic-form></code> 表示。</p><p translation-origin=\"off\">The <code>DynamicFormComponent</code> component is the entry point and the main container for the form, which is represented using the <code>&#x3C;app-dynamic-form></code> in a template.</p>\n\n<p translation-result=\"on\"><code>DynamicFormComponent</code> 组件通过把每个问题都绑定到一个匹配 <code>DynamicFormQuestionComponent</code> 的 <code>&#x3C;app-question></code> 元素来渲染问题列表。</p><p translation-origin=\"off\">The <code>DynamicFormComponent</code> component presents a list of questions by binding each one to an <code>&#x3C;app-question></code> element that matches the <code>DynamicFormQuestionComponent</code>.</p>\n\n<code-tabs>\n\n  <code-pane header=\"dynamic-form.component.html\" path=\"dynamic-form/src/app/dynamic-form.component.html\">\n&#x3C;div>\n  &#x3C;form (ngSubmit)=\"onSubmit()\" [formGroup]=\"form\">\n\n    &#x3C;div *<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a>=\"let question of questions\" class=\"form-row\">\n      &#x3C;app-question [question]=\"question\" [form]=\"form\">&#x3C;/app-question>\n    &#x3C;/div>\n\n    &#x3C;div class=\"form-row\">\n      &#x3C;button type=\"submit\" [disabled]=\"!form.valid\">Save&#x3C;/button>\n    &#x3C;/div>\n  &#x3C;/form>\n\n  &#x3C;div *<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a>=\"payLoad\" class=\"form-row\">\n    &#x3C;strong>Saved the following values&#x3C;/strong>&#x3C;br>{{payLoad}}\n  &#x3C;/div>\n&#x3C;/div>\n\n\n</code-pane>\n\n  <code-pane header=\"dynamic-form.component.ts\" path=\"dynamic-form/src/app/dynamic-form.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/Input\" class=\"code-anchor\">Input</a>, <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> } from '@angular/core';\nimport { <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a> } from '@angular/forms';\n\nimport { QuestionBase } from './question-base';\nimport { QuestionControlService } from './question-control.service';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-dynamic-form',\n  templateUrl: './dynamic-form.component.html',\n  providers: [ QuestionControlService ]\n})\nexport class DynamicFormComponent implements <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> {\n\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>() questions: QuestionBase&#x3C;string>[] = [];\n  form: <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>;\n  payLoad = '';\n\n  constructor(private qcs: QuestionControlService) {  }\n\n  ngOnInit() {\n    this.form = this.qcs.toFormGroup(this.questions);\n  }\n\n  onSubmit() {\n    this.payLoad = JSON.stringify(this.form.getRawValue());\n  }\n}\n\n\n</code-pane>\n\n</code-tabs>\n<h3 id=\"display-the-form\" translation-result=\"on\">显示表单<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#display-the-form\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"display-the-form\">Display the form<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#display-the-form\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">要显示动态表单的一个实例，<code>AppComponent</code> 外壳模板会把一个 <code>QuestionService</code> 返回的 <code>questions</code> 数组传给表单容器组件 <code>&#x3C;app-dynamic-form></code>。</p><p translation-origin=\"off\">To display an instance of the dynamic form, the <code>AppComponent</code> shell template passes the <code>questions</code> array returned by the <code>QuestionService</code> to the form container component, <code>&#x3C;app-dynamic-form></code>.</p>\n\n<code-example path=\"dynamic-form/src/app/app.component.ts\" header=\"app.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a> } from '@angular/core';\n\nimport { QuestionService } from './question.service';\nimport { QuestionBase } from './question-base';\nimport { Observable } from 'rxjs';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-root',\n  template: `\n    &#x3C;div>\n      &#x3C;h2>Job Application for Heroes&#x3C;/h2>\n      &#x3C;app-dynamic-form [questions]=\"questions$ | async\">&#x3C;/app-dynamic-form>\n    &#x3C;/div>\n  `,\n  providers:  [QuestionService]\n})\nexport class AppComponent {\n  questions$: Observable&#x3C;QuestionBase&#x3C;any>[]>;\n\n  constructor(service: QuestionService) {\n    this.questions$ = service.getQuestions();\n  }\n}\n\n\n</code-example>\n<p translation-result=\"on\">这个例子为英雄提供了一个工作申请表的模型，但是除了 <code>QuestionService</code> 返回的对象外，没有涉及任何跟英雄有关的问题。这种模型和数据的分离，允许你为任何类型的调查表复用这些组件，只要它与这个<em>问题</em>对象模型兼容即可。</p><p translation-origin=\"off\">The example provides a model for a job application for heroes, but there are\nno references to any specific hero question other than the objects returned by <code>QuestionService</code>.\nThis separation of model and data allows you to repurpose the components for any type of survey\nas long as it's compatible with the <em>question</em> object model.</p>\n\n<h3 id=\"ensuring-valid-data\" translation-result=\"on\">确保数据有效<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#ensuring-valid-data\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"ensuring-valid-data\">Ensuring valid data<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#ensuring-valid-data\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">表单模板使用元数据的动态数据绑定来渲染表单，而不用做任何与具体问题有关的硬编码。它动态添加了控件元数据和验证标准。</p><p translation-origin=\"off\">The form template uses dynamic data binding of metadata to render the form\nwithout making any hardcoded assumptions about specific questions.\nIt adds both control metadata and validation criteria dynamically.</p>\n\n<p translation-result=\"on\">要确保输入有效，<em>就要</em>禁用 <em>“Save”</em> 按钮，直到此表单处于有效状态。当表单有效时，你可以单击 <em>“Save”</em> 按钮，该应用就会把表单的当前值渲染为 JSON。</p><p translation-origin=\"off\">To ensure valid input, the <em>Save</em> button is disabled until the form is in a valid state.\nWhen the form is valid, you can click <em>Save</em> and the app renders the current form values as JSON.</p>\n\n<p translation-result=\"on\">最终的表单如下图所示。</p><p translation-origin=\"off\">The following figure shows the final form.</p>\n\n<div class=\"lightbox\">\n  <img src=\"generated/images/guide/dynamic-form/dynamic-form.png\" alt=\"Dynamic-Form\" width=\"316\" height=\"230\">\n</div>\n<h2 id=\"next-steps\" translation-result=\"on\">下一步<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#next-steps\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"next-steps\">Next steps<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#next-steps\"><i class=\"material-icons\">link</i></a></h2>\n\n<ul>\n<li>\n<p translation-result=\"on\"><strong>不同类型的表单和控件集合</strong></p><p translation-origin=\"off\"><strong>Different types of forms and control collection</strong></p>\n\n<p translation-result=\"on\">本教程展示了如何构建一个问卷，它只是一种动态表单。这个例子使用 <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> 来收集一组控件。关于不同类型动态表单的范例，请参阅在响应式表单中的<a href=\"guide/reactive-forms#creating-dynamic-forms\" title=\"用数组创建动态表单\">创建动态表单</a>一节。那个例子还展示了如何使用 <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code> 而不是 <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> 来收集一组控件。</p><p translation-origin=\"off\"> This tutorial shows how to build a a questionaire, which is just one kind of dynamic form.\nThe example uses <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> to collect a set of controls.\nFor an example of a different type of dynamic form, see the section <a href=\"guide/reactive-forms#creating-dynamic-forms\" title=\"Create dynamic forms with arrays\">Creating dynamic forms</a> in the Reactive Forms guide.\nThat example also shows how to use <code><a href=\"api/forms/FormArray\" class=\"code-anchor\">FormArray</a></code> instead of <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> to collect a set of controls.</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><strong>验证用户输入</strong></p><p translation-origin=\"off\"><strong>Validating user input</strong></p>\n\n<p translation-result=\"on\"><a href=\"guide/reactive-forms#validating-form-input\" title=\"基本输入验证\">验证表单输入</a>部分介绍了如何在响应式表单中进行输入验证的基础知识。</p><p translation-origin=\"off\"> The section <a href=\"guide/reactive-forms#validating-form-input\" title=\"Basic input validation\">Validating form input</a> introduces the basics of how input validation works in reactive forms.</p>\n\n<p translation-result=\"on\"><a href=\"guide/form-validation\" title=\"表单验证指南\">表单验证指南</a>更深入地介绍了本主题。</p><p translation-origin=\"off\"> The <a href=\"guide/form-validation\" title=\"Form validation guide\">Form validation guide</a> covers the topic in more depth.</p>\n\n</li>\n</ul>\n\n</div>\n\n<!-- links to this doc:\n - guide/example-apps-list\n - guide/forms-overview\n - guide/security\n-->\n<!-- links from this doc:\n - api/common/NgForOf\n - api/common/NgIf\n - api/common/NgSwitch\n - api/common/NgSwitchCase\n - api/core/Component\n - api/core/Injectable\n - api/core/Input\n - api/core/NgModule\n - api/core/OnInit\n - api/core/enableProdMode\n - api/forms/EmailValidator\n - api/forms/FormArray\n - api/forms/FormControl\n - api/forms/FormControlName\n - api/forms/FormGroup\n - api/forms/FormGroupDirective\n - api/forms/ReactiveFormsModule\n - api/forms/Validators\n - api/platform-browser-dynamic/platformBrowserDynamic\n - api/platform-browser/BrowserModule\n - guide/architecture\n - guide/bootstrapping\n - guide/dynamic-form#building-dynamic-forms\n - guide/dynamic-form#compose-dynamic-form-contents\n - guide/dynamic-form#compose-form-groups\n - guide/dynamic-form#create-a-dynamic-form-template\n - guide/dynamic-form#create-a-form-object-model\n - guide/dynamic-form#define-control-classes\n - guide/dynamic-form#display-the-form\n - guide/dynamic-form#enable-reactive-forms-for-your-project\n - guide/dynamic-form#ensuring-valid-data\n - guide/dynamic-form#next-steps\n - guide/dynamic-form#prerequisites\n - guide/dynamic-form#supply-data\n - guide/form-validation\n - guide/reactive-forms\n - guide/reactive-forms#creating-dynamic-forms\n - guide/reactive-forms#validating-form-input\n - https://github.com/angular/angular-cn/edit/aio/aio/content/guide/dynamic-form.md?message=docs%3A%20请简述你的修改...\n - https://www.typescriptlang.org/docs/home.html\n-->"
}