{
  "id": "guide/dynamic-form",
  "title": "Dynamic Forms",
  "contents": "\n\n\n  <div class=\"github-links\">\n    <a href=\"https://github.com/angular/angular-cn/edit/aio/aio/content/guide/dynamic-form.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  </div>\n\n\n<div class=\"content\">\n<h1 id=\"dynamic-forms\" translation-result=\"on\">动态表单<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#dynamic-forms\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\" id=\"dynamic-forms\">Dynamic Forms<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#dynamic-forms\"><i class=\"material-icons\">link</i></a></h1>\n\n<a id=\"top\"></a>\n<p translation-result=\"on\">有时候手动编写和维护表单所需工作量和时间会过大。特别是在需要编写大量表单时。表单都很相似，而且随着业务和监管需求的迅速变化，表单也要随之变化，这样维护的成本过高。</p><p translation-origin=\"off\">Building handcrafted forms can be costly and time-consuming,\nespecially if you need a great number of them, they're similar to each other, and they change frequently\nto meet rapidly changing business and regulatory requirements.</p>\n\n<p translation-result=\"on\">基于业务对象模型的元数据，动态创建表单可能会更划算。</p><p translation-origin=\"off\">It may be more economical to create the forms dynamically, based on\nmetadata that describes the business object model.</p>\n\n<p translation-result=\"on\">本文会展示如何利用 <code>formGroup</code> 来动态渲染一个简单的表单，包括各种控件类型和验证规则。\n这个起点很简陋，但可以在这个基础上添加丰富多彩的问卷问题、更优美的渲染以及更卓越的用户体验。</p><p translation-origin=\"off\">This cookbook shows you how to use <code>formGroup</code> to dynamically\nrender a simple form with different control types and validation.\nIt's a primitive start.\nIt might evolve to support a much richer variety of questions, more graceful rendering, and superior user experience.\nAll such greatness has humble beginnings.</p>\n\n<p translation-result=\"on\">这个例子要为正在找工作的英雄们创建一个在线申请表的动态表单。英雄管理局会不断修改申请流程，你要在<em>不修改应用代码</em>的情况下，动态创建这些表单。</p><p translation-origin=\"off\">The example in this cookbook is a dynamic form to build an\nonline application experience for heroes seeking employment.\nThe agency is constantly tinkering with the application process.\nYou can create the forms on the fly <em>without changing the application code</em>.</p>\n\n<a id=\"toc\"></a>\n<p translation-result=\"on\">参见<live-example name=\"dynamic-form\"></live-example>。</p><p translation-origin=\"off\">See the <live-example name=\"dynamic-form\"></live-example>.</p>\n\n<a id=\"bootstrap\"></a>\n<h2 id=\"bootstrap\" translation-result=\"on\">启动/引导 (bootstrap)<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#bootstrap\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"bootstrap\">Bootstrap<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#bootstrap\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">从创建一个名叫 <code>AppModule</code> 的 <code><a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code> 开始。</p><p translation-origin=\"off\">Start by creating an <code><a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code> called <code>AppModule</code>.</p>\n\n<p translation-result=\"on\">这个烹饪书使用<a href=\"guide/reactive-forms\">响应式表单</a>。</p><p translation-origin=\"off\">This cookbook uses <a href=\"guide/reactive-forms\">reactive forms</a>.</p>\n\n<p translation-result=\"on\">响应式表单属于另外一个叫做 <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code> 的 <code><a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code>，所以，为了使用响应式表单类的指令，你得从 <code>@angular/forms</code> 库中引入 <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code> 模块。</p><p translation-origin=\"off\">Reactive forms belongs to a different <code><a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code> called <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code>,\nso in order to access any reactive forms directives, you have to import\n<code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code> from the <code>@angular/forms</code> library.</p>\n\n<p translation-result=\"on\">在 <code>main.ts</code> 中启动 <code>AppModule</code>。</p><p translation-origin=\"off\">Bootstrap the <code>AppModule</code> in <code>main.ts</code>.</p>\n\n<code-tabs>\n\n  <code-pane header=\"app.module.ts\" path=\"dynamic-form/src/app/app.module.ts\">\nimport { <a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a> }                from '@angular/platform-browser';\nimport { <a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a> }          from '@angular/forms';\nimport { <a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a> }                     from '@angular/core';\n\nimport { AppComponent }                 from './app.component';\nimport { DynamicFormComponent }         from './dynamic-form.component';\nimport { DynamicFormQuestionComponent } from './dynamic-form-question.component';\n\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  <a href=\"api/core/NgModule#imports\" class=\"code-anchor\">imports</a>: [ <a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a>, <a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a> ],\n  <a href=\"api/core/NgModule#declarations\" class=\"code-anchor\">declarations</a>: [ AppComponent, DynamicFormComponent, DynamicFormQuestionComponent ],\n  <a href=\"api/core/NgModule#bootstrap\" class=\"code-anchor\">bootstrap</a>: [ AppComponent ]\n})\nexport class AppModule {\n  constructor() {\n  }\n}\n\n\n</code-pane>\n\n  <code-pane header=\"main.ts\" path=\"dynamic-form/src/main.ts\">\nimport { <a href=\"api/core/enableProdMode\" class=\"code-anchor\">enableProdMode</a> } from '@angular/core';\nimport { <a href=\"api/platform-browser-dynamic/platformBrowserDynamic\" class=\"code-anchor\">platformBrowserDynamic</a> } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  <a href=\"api/core/enableProdMode\" class=\"code-anchor\">enableProdMode</a>();\n}\n\n<a href=\"api/platform-browser-dynamic/platformBrowserDynamic\" class=\"code-anchor\">platformBrowserDynamic</a>().bootstrapModule(AppModule);\n\n\n</code-pane>\n\n</code-tabs>\n<a id=\"object-model\"></a>\n<h2 id=\"question-model\" translation-result=\"on\">问卷问题模型<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#question-model\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"question-model\">Question model<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#question-model\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">下一步是定义一个对象模型，用来描述所有表单功能需要的场景。英雄的申请流程涉及到一个包含很多问卷问题的表单。问卷问题是最基础的对象模型。</p><p translation-origin=\"off\">The next step is to define an object model that can describe all scenarios needed by the form functionality.\nThe hero application process involves a form with a lot of questions.\nThe <em>question</em> is the most fundamental object in the model.</p>\n\n<p translation-result=\"on\">下面的 <code>QuestionBase</code> 是最基础的问卷问题基类。</p><p translation-origin=\"off\">The following <code>QuestionBase</code> is a fundamental question class.</p>\n\n<code-example path=\"dynamic-form/src/app/question-base.ts\" header=\"src/app/question-base.ts\">\nexport class QuestionBase&#x3C;T> {\n  value: T;\n  key: string;\n  label: string;\n  required: boolean;\n  order: number;\n  controlType: string;\n\n  constructor(options: {\n      value?: T,\n      key?: string,\n      label?: string,\n      required?: boolean,\n      order?: number,\n      controlType?: string\n    } = {}) {\n    this.value = options.value;\n    this.key = options.key || '';\n    this.label = options.label || '';\n    this.required = !!options.required;\n    this.order = options.order === undefined ? 1 : options.order;\n    this.controlType = options.controlType || '';\n  }\n}\n\n\n</code-example>\n<p translation-result=\"on\">在这个基础上，你派生出两个新类 <code>TextboxQuestion</code> 和 <code>DropdownQuestion</code>，分别代表文本框和下拉框。这么做的初衷是，表单能动态绑定到特定的问卷问题类型，并动态渲染出合适的控件。</p><p translation-origin=\"off\">From this base you can derive two new classes in <code>TextboxQuestion</code> and <code>DropdownQuestion</code>\nthat represent textbox and dropdown questions.\nThe idea is that the form will be bound to specific question types and render the\nappropriate controls dynamically.</p>\n\n<p translation-result=\"on\"><code>TextboxQuestion</code> 可以通过 <code>type</code> 属性来支持多种 HTML5 元素类型，比如文本、邮件、网址等。</p><p translation-origin=\"off\"><code>TextboxQuestion</code> supports multiple HTML5 types such as text, email, and url\nvia the <code>type</code> property.</p>\n\n<code-example path=\"dynamic-form/src/app/question-textbox.ts\" header=\"src/app/question-textbox.ts\" linenums=\"false\">\nimport { QuestionBase } from './question-base';\n\nexport class TextboxQuestion extends QuestionBase&#x3C;string> {\n  controlType = 'textbox';\n  type: string;\n\n  constructor(options: {} = {}) {\n    super(options);\n    this.type = options['type'] || '';\n  }\n}\n\n\n</code-example>\n<p translation-result=\"on\"><code>DropdownQuestion</code> 表示一个带可选项列表的选择框。</p><p translation-origin=\"off\"><code>DropdownQuestion</code> presents a list of choices in a select box.</p>\n\n<code-example path=\"dynamic-form/src/app/question-dropdown.ts\" header=\"src/app/question-dropdown.ts\" linenums=\"false\">\nimport { QuestionBase } from './question-base';\n\nexport class DropdownQuestion extends QuestionBase&#x3C;string> {\n  controlType = 'dropdown';\n  options: {key: string, value: string}[] = [];\n\n  constructor(options: {} = {}) {\n    super(options);\n    this.options = options['options'] || [];\n  }\n}\n\n\n</code-example>\n<p translation-result=\"on\">接下来定义了 <code>QuestionControlService</code>，一个可以把问卷问题转换为 <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> 的服务。\n简而言之，这个 <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> 使用问卷模型的元数据，并允许你指定默认值和验证规则。</p><p translation-origin=\"off\">Next is <code>QuestionControlService</code>, a simple service for transforming the questions to a <code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code>.\nIn a nutshell, the form group consumes the metadata from the question model and\nallows you to specify default values and validation rules.</p>\n\n<code-example path=\"dynamic-form/src/app/question-control.service.ts\" header=\"src/app/question-control.service.ts\" linenums=\"false\">\nimport { <a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a> }   from '@angular/core';\nimport { <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>, <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>, <a href=\"api/forms/Validators\" class=\"code-anchor\">Validators</a> } from '@angular/forms';\n\nimport { QuestionBase } from './question-base';\n\n@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()\nexport class QuestionControlService {\n  constructor() { }\n\n  toFormGroup(questions: QuestionBase&#x3C;any>[] ) {\n    let <a href=\"api/animations/group\" class=\"code-anchor\">group</a>: any = {};\n\n    questions.forEach(question => {\n      <a href=\"api/animations/group\" class=\"code-anchor\">group</a>[question.key] = question.required ? new <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>(question.value || '', Validators.required)\n                                              : new <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>(question.value || '');\n    });\n    return new <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>(<a href=\"api/animations/group\" class=\"code-anchor\">group</a>);\n  }\n}\n\n\n</code-example>\n<a id=\"form-component\"></a>\n<h2 id=\"question-form-components\" translation-result=\"on\">问卷表单组件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#question-form-components\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"question-form-components\">Question form components<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#question-form-components\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">现在你已经有一个定义好的完整模型了，接着就可以开始创建一个展现动态表单的组件。</p><p translation-origin=\"off\">Now that you have defined the complete model you are ready\nto create components to represent the dynamic form.</p>\n\n<p translation-result=\"on\"><code>DynamicFormComponent</code> 是表单的主要容器和入口点。</p><p translation-origin=\"off\"><code>DynamicFormComponent</code> is the entry point and the main container for the form.</p>\n\n<code-tabs>\n\n  <code-pane header=\"dynamic-form.component.html\" path=\"dynamic-form/src/app/dynamic-form.component.html\">\n&#x3C;div>\n  &#x3C;form (ngSubmit)=\"onSubmit()\" [formGroup]=\"form\">\n\n    &#x3C;div *<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a>=\"let question of questions\" class=\"form-row\">\n      &#x3C;app-question [question]=\"question\" [form]=\"form\">&#x3C;/app-question>\n    &#x3C;/div>\n\n    &#x3C;div class=\"form-row\">\n      &#x3C;button type=\"submit\" [disabled]=\"!form.valid\">Save&#x3C;/button>\n    &#x3C;/div>\n  &#x3C;/form>\n\n  &#x3C;div *<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a>=\"payLoad\" class=\"form-row\">\n    &#x3C;strong>Saved the following values&#x3C;/strong>&#x3C;br>{{payLoad}}\n  &#x3C;/div>\n&#x3C;/div>\n\n\n</code-pane>\n\n  <code-pane header=\"dynamic-form.component.ts\" path=\"dynamic-form/src/app/dynamic-form.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/Input\" class=\"code-anchor\">Input</a>, <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> }  from '@angular/core';\nimport { <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a> }                 from '@angular/forms';\n\nimport { QuestionBase }              from './question-base';\nimport { QuestionControlService }    from './question-control.service';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-dynamic-form',\n  templateUrl: './dynamic-form.component.html',\n  providers: [ QuestionControlService ]\n})\nexport class DynamicFormComponent implements <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> {\n\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>() questions: QuestionBase&#x3C;any>[] = [];\n  form: <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>;\n  payLoad = '';\n\n  constructor(private qcs: QuestionControlService) {  }\n\n  ngOnInit() {\n    this.form = this.qcs.toFormGroup(this.questions);\n  }\n\n  onSubmit() {\n    this.payLoad = JSON.stringify(this.form.value);\n  }\n}\n\n\n</code-pane>\n\n</code-tabs>\n<p translation-result=\"on\">它代表了问卷问题列表，每个问题都被绑定到一个 <code>&#x3C;app-question></code> 组件元素。\n<code>&#x3C;app-question></code> 标签匹配到的是组件 <code>DynamicFormQuestionComponent</code>，该组件的职责是根据各个问卷问题对象的值来动态渲染表单控件。</p><p translation-origin=\"off\">It presents a list of questions, each bound to a <code>&#x3C;app-question></code> component element.\nThe <code>&#x3C;app-question></code> tag matches the <code>DynamicFormQuestionComponent</code>,\nthe component responsible for rendering the details of each <em>individual</em>\nquestion based on values in the data-bound question object.</p>\n\n<code-tabs>\n\n  <code-pane header=\"dynamic-form-question.component.html\" path=\"dynamic-form/src/app/dynamic-form-question.component.html\">\n&#x3C;div [formGroup]=\"form\">\n  &#x3C;label [attr.for]=\"question.key\">{{question.label}}&#x3C;/label>\n\n  &#x3C;div [<a href=\"api/common/NgSwitch\" class=\"code-anchor\">ngSwitch</a>]=\"question.controlType\">\n\n    &#x3C;input *<a href=\"api/common/NgSwitchCase\" class=\"code-anchor\">ngSwitchCase</a>=\"'textbox'\" [<a href=\"api/forms/FormControlName\" class=\"code-anchor\">formControlName</a>]=\"question.key\"\n            [id]=\"question.key\" [type]=\"question.type\">\n\n    &#x3C;select [id]=\"question.key\" *<a href=\"api/common/NgSwitchCase\" class=\"code-anchor\">ngSwitchCase</a>=\"'dropdown'\" [<a href=\"api/forms/FormControlName\" class=\"code-anchor\">formControlName</a>]=\"question.key\">\n      &#x3C;<a href=\"api/forms/NgSelectOption\" class=\"code-anchor\">option</a> *<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a>=\"let opt of question.options\" [value]=\"opt.key\">{{opt.value}}&#x3C;/<a href=\"api/forms/NgSelectOption\" class=\"code-anchor\">option</a>>\n    &#x3C;/select>\n\n  &#x3C;/div> \n\n  &#x3C;div class=\"errorMessage\" *<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a>=\"!isValid\">{{question.label}} is required&#x3C;/div>\n&#x3C;/div>\n\n\n</code-pane>\n\n  <code-pane header=\"dynamic-form-question.component.ts\" path=\"dynamic-form/src/app/dynamic-form-question.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/Input\" class=\"code-anchor\">Input</a> } from '@angular/core';\nimport { <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a> }        from '@angular/forms';\n\nimport { QuestionBase }     from './question-base';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-question',\n  templateUrl: './dynamic-form-question.component.html'\n})\nexport class DynamicFormQuestionComponent {\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>() question: QuestionBase&#x3C;any>;\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>() form: <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>;\n  get isValid() { return this.form.controls[this.question.key].valid; }\n}\n\n\n</code-pane>\n\n</code-tabs>\n<p translation-result=\"on\">请注意，这个组件能代表模型里的任何问题类型。目前，还只有两种问题类型，但可以添加更多类型。可以用 <code><a href=\"api/common/NgSwitch\" class=\"code-anchor\">ngSwitch</a></code> 决定显示哪种类型的问题。</p><p translation-origin=\"off\">Notice this component can present any type of question in your model.\nYou only have two types of questions at this point but you can imagine many more.\nThe <code><a href=\"api/common/NgSwitch\" class=\"code-anchor\">ngSwitch</a></code> determines which type of question to display.</p>\n\n<p translation-result=\"on\">在这两个组件中，你依赖 Angular 的 <strong>formGroup</strong> 来把模板 HTML 和底层控件对象连接起来，该对象从问卷问题模型里获取渲染和验证规则。</p><p translation-origin=\"off\">In both components  you're relying on Angular's <strong>formGroup</strong> to connect the template HTML to the\nunderlying control objects, populated from the question model with display and validation rules.</p>\n\n<p translation-result=\"on\"><code><a href=\"api/forms/FormControlName\" class=\"code-anchor\">formControlName</a></code> 和 <code>formGroup</code> 是在 <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code> 中定义的指令。这个模板之所以能使用它们，是因为你曾从 <code>AppModule</code> 中导入了 <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code>。</p><p translation-origin=\"off\"><code><a href=\"api/forms/FormControlName\" class=\"code-anchor\">formControlName</a></code> and <code>formGroup</code> are directives defined in\n<code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code>. The templates can access these directives\ndirectly since you imported <code><a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a></code> from <code>AppModule</code>.</p>\n\n<a id=\"questionnaire-data\"></a>\n<h2 id=\"questionnaire-data\" translation-result=\"on\">问卷数据<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#questionnaire-data\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"questionnaire-data\">Questionnaire data<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#questionnaire-data\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\"><code>DynamicForm</code> 期望得到一个问题列表，该列表被绑定到 <code>@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>() questions</code> 属性。</p><p translation-origin=\"off\"><code>DynamicFormComponent</code> expects the list of questions in the form of an array bound to <code>@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>() questions</code>.</p>\n\n<p translation-result=\"on\"> <code>QuestionService</code> 会返回为工作申请表定义的那组问题列表。在真实的应用程序环境中，你会从数据库里获得这些问题列表。</p><p translation-origin=\"off\"> The set of questions you've defined for the job application is returned from the <code>QuestionService</code>.\nIn a real app you'd retrieve these questions from storage.</p>\n\n<p translation-result=\"on\"> 关键是，你完全根据 <code>QuestionService</code> 返回的对象来控制英雄的工作申请表。\n要维护这份问卷，只要非常简单地添加、修改和删除 <code>questions</code> 数组中的对象就可以了。</p><p translation-origin=\"off\"> The key point is that you control the hero job application questions\nentirely through the objects returned from <code>QuestionService</code>.\nQuestionnaire maintenance is a simple matter of adding, updating,\nand removing objects from the <code>questions</code> array.</p>\n\n<code-example path=\"dynamic-form/src/app/question.service.ts\" header=\"src/app/question.service.ts\">\nimport { <a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a> }       from '@angular/core';\n\nimport { DropdownQuestion } from './question-dropdown';\nimport { QuestionBase }     from './question-base';\nimport { TextboxQuestion }  from './question-textbox';\n\n@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>()\nexport class QuestionService {\n\n  // TODO: get from <a href=\"api/router/RouterLinkWithHref\" class=\"code-anchor\">a</a> remote source of question metadata\n  // TODO: make asynchronous\n  getQuestions() {\n\n    let questions: QuestionBase&#x3C;any>[] = [\n\n      new DropdownQuestion({\n        key: 'brave',\n        label: 'Bravery Rating',\n        options: [\n          {key: 'solid',  value: 'Solid'},\n          {key: 'great',  value: 'Great'},\n          {key: 'good',   value: 'Good'},\n          {key: 'unproven', value: 'Unproven'}\n        ],\n        order: 3\n      }),\n\n      new TextboxQuestion({\n        key: 'firstName',\n        label: 'First name',\n        value: 'Bombasto',\n        required: true,\n        order: 1\n      }),\n\n      new TextboxQuestion({\n        key: 'emailAddress',\n        label: 'Email',\n        type: '<a href=\"api/forms/EmailValidator\" class=\"code-anchor\">email</a>',\n        order: 2\n      })\n    ];\n\n    return questions.sort((<a href=\"api/router/RouterLinkWithHref\" class=\"code-anchor\">a</a>, b) => a.order - b.order);\n  }\n}\n\n\n</code-example>\n<p translation-result=\"on\">最后，在 <code>AppComponent</code> 里显示出表单。</p><p translation-origin=\"off\">Finally, display an instance of the form in the <code>AppComponent</code> shell.</p>\n\n<code-example path=\"dynamic-form/src/app/app.component.ts\" header=\"app.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a> }       from '@angular/core';\n\nimport { QuestionService } from './question.service';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-root',\n  <a href=\"api/core/Component#template\" class=\"code-anchor\">template</a>: `\n    &#x3C;div>\n      &#x3C;h2>Job Application for Heroes&#x3C;/h2>\n      &#x3C;app-dynamic-form [questions]=\"questions\">&#x3C;/app-dynamic-form>\n    &#x3C;/div>\n  `,\n  providers:  [QuestionService]\n})\nexport class AppComponent {\n  questions: any[];\n\n  constructor(service: QuestionService) {\n    this.questions = service.getQuestions();\n  }\n}\n\n\n</code-example>\n<a id=\"dynamic-template\"></a>\n<h2 id=\"dynamic-template\" translation-result=\"on\">动态模板<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#dynamic-template\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"dynamic-template\">Dynamic Template<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-form#dynamic-template\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">在这个例子中，虽然你是在为英雄的工作申请表建模，但是除了 <code>QuestionService</code> 返回的那些对象外，没有其它任何地方是与英雄有关的。</p><p translation-origin=\"off\">Although in this example you're modelling a job application for heroes, there are\nno references to any specific hero question\noutside the objects returned by <code>QuestionService</code>.</p>\n\n<p translation-result=\"on\">这点非常重要，因为只要与<em>问卷</em>对象模型兼容，就可以在任何类型的调查问卷中复用这些组件。\n这里的关键是用到元数据的动态数据绑定来渲染表单，对问卷问题没有任何硬性的假设。除控件的元数据外，还可以动态添加验证规则。</p><p translation-origin=\"off\">This is very important since it allows you to repurpose the components for any type of survey\nas long as it's compatible with the <em>question</em> object model.\nThe key is the dynamic data binding of metadata used to render the form\nwithout making any hardcoded assumptions about specific questions.\nIn addition to control metadata, you are also adding validation dynamically.</p>\n\n<p translation-result=\"on\">表单验证通过之前，<em>保存</em>按钮是禁用的。验证通过后，就可以点击<em>保存</em>按钮，程序会把当前值渲染成 JSON 显示出来。\n这表明任何用户输入都被传到了数据模型里。至于如何储存和提取数据则是另一话题了。</p><p translation-origin=\"off\">The <em>Save</em> button is disabled until the form is in a valid state.\nWhen the form is valid, you can click <em>Save</em> and the app renders the current form values as JSON.\nThis proves that any user input is bound back to the data model.\nSaving and retrieving the data is an exercise for another time.</p>\n\n<p translation-result=\"on\">完整的表单是这样的：</p><p translation-origin=\"off\">The final form looks like this:</p>\n\n<figure>\n  <img src=\"generated/images/guide/dynamic-form/dynamic-form.png\" alt=\"Dynamic-Form\" width=\"316\" height=\"230\">\n</figure>\n<p translation-result=\"on\"><a href=\"guide/dynamic-form#top\">回到顶部</a></p><p translation-origin=\"off\"><a href=\"guide/dynamic-form#top\">Back to top</a></p>\n\n\n</div>\n\n<!-- links to this doc:\n - guide/forms-overview\n - guide/security\n-->\n<!-- links from this doc:\n - api/animations/group\n - api/common/NgForOf\n - api/common/NgIf\n - api/common/NgSwitch\n - api/common/NgSwitchCase\n - api/core/Component\n - api/core/Component#template\n - api/core/Injectable\n - api/core/Input\n - api/core/NgModule\n - api/core/NgModule#bootstrap\n - api/core/NgModule#declarations\n - api/core/NgModule#imports\n - api/core/OnInit\n - api/core/enableProdMode\n - api/forms/EmailValidator\n - api/forms/FormControl\n - api/forms/FormControlName\n - api/forms/FormGroup\n - api/forms/NgSelectOption\n - api/forms/ReactiveFormsModule\n - api/forms/Validators\n - api/platform-browser-dynamic/platformBrowserDynamic\n - api/platform-browser/BrowserModule\n - api/router/RouterLinkWithHref\n - guide/dynamic-form#bootstrap\n - guide/dynamic-form#dynamic-forms\n - guide/dynamic-form#dynamic-template\n - guide/dynamic-form#question-form-components\n - guide/dynamic-form#question-model\n - guide/dynamic-form#questionnaire-data\n - guide/dynamic-form#top\n - guide/reactive-forms\n - https://github.com/angular/angular-cn/edit/aio/aio/content/guide/dynamic-form.md?message=docs%3A%20请简述你的修改...\n-->"
}