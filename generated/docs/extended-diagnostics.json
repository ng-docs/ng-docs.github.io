{"id":"extended-diagnostics","title":"Extended Diagnostics","contents":"\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/cn/aio/content/extended-diagnostics/index.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"extended-diagnostics\" translation-result=\"on\">扩展诊断<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"extended-diagnostics#extended-diagnostics\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\" id=\"extended-diagnosticslink\">Extended Diagnostics<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"extended-diagnostics#extended-diagnostics\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">有许多编码模式在技术上对编译器或运行时来说都同样是有效的，但却可能有复杂的细微差别或警告。这些模式可能不会具有开发人员预期的效果，而这通常会导致错误。Angular 编译器包含“扩展诊断”，可以识别其中的许多模式，以警告开发人员潜在的问题并在代码库中强制执行通用的最佳实践。</p><p translation-origin=\"off\">There are many coding patterns that are technically valid to the compiler or runtime, but which may have complex nuances or caveats.\nThese patterns may not have the intended effect expected by a developer, which often leads to bugs.\nThe Angular compiler includes \"extended diagnostics\" which identify many of these patterns, in order to warn developers about the potential issues and enforce common best practices within a codebase.</p>\n\n<h2 id=\"diagnostics\" translation-result=\"on\">诊断<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"extended-diagnostics#diagnostics\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"diagnosticslink\">Diagnostics<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"extended-diagnostics#diagnostics\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">目前，Angular 支持以下扩展诊断：</p><p translation-origin=\"off\">Currently, Angular supports the following extended diagnostics:</p>\n\n<ul>\n<li>\n<p><a href=\"extended-diagnostics/NG8101\">NG8101 - <code>invalidBananaInBox</code></a></p>\n</li>\n<li>\n<p><a href=\"extended-diagnostics/NG8102\">NG8102 - <code>nullishCoalescingNotNullable</code></a></p>\n</li>\n</ul>\n<h2 id=\"configuration\" translation-result=\"on\">配置<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"extended-diagnostics#configuration\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"configurationlink\">Configuration<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"extended-diagnostics#configuration\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">默认情况下，扩展诊断是警告，并且不会阻止编译。每个诊断都可以配置为：</p><p translation-origin=\"off\">Extended diagnostics are warnings by default and do not block compilation.\nEach diagnostic can be configured as either:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><code>warning</code>（默认）-编译器将诊断作为警告发出，但不会阻止编译。即使发出了警告，编译器仍然会以状态代码 0 退出。</p><p translation-origin=\"off\"><code>warning</code> (default) - The compiler emits the diagnostic as a warning but does not block\ncompilation. The compiler will still exit with status code 0, even if warnings are emitted.</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><code>error</code> - 编译器将诊断作为错误发出并且编译失败。如果发出一个或多个错误，编译器将使用非零状态代码退出。</p><p translation-origin=\"off\"><code>error</code> - The compiler emits the diagnostic as an error and fails the compilation.\nThe compiler will exit with a non-zero status code if one or more errors are emitted.</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><code>suppress</code> - 编译器根本<em>不会</em>发出诊断信息。</p><p translation-origin=\"off\"><code>suppress</code> - The compiler does <em>not</em> emit the diagnostic at all.</p>\n\n</li>\n</ul>\n<p translation-result=\"on\">这种检查的严重性可以在项目的 <code>tsconfig.json</code> 文件中配置：</p><p translation-origin=\"off\">Check severity can be configured in the project's <code>tsconfig.json</code> file:</p>\n\n<code-example format=\"jsonc\" language=\"jsonc\">\n\n{\n  \"angularCompilerOptions\": {\n    \"extendedDiagnostics\": {\n      // The categories to use for specific diagnostics.\n      \"checks\": {\n        // Maps check name to its category.\n        \"invalidBananaInBox\": \"suppress\"\n      },\n\n      // The category to use for any diagnostics not listed in `checks` above.\n      \"defaultCategory\": \"error\"\n    }\n  }\n}\n\n</code-example>\n<p translation-result=\"on\"><code>checks</code> 字段将单个诊断的名称映射到它们的关联类别。有关扩展诊断的完整列表以及用于配置它们的名称，请参阅<a href=\"extended-diagnostics#diagnostics\">诊断</a>。</p><p translation-result=\"on\"><code>defaultCategory</code> 字段用于 <code>checks</code> 下未显式列出的任何诊断。如果未设置，则此类诊断将被视为 <code>warning</code>。</p><p translation-origin=\"off\">The <code>checks</code> field maps the name of individual diagnostics to their associated category.\nSee <a href=\"extended-diagnostics#diagnostics\">Diagnostics</a> for a complete list of extended diagnostics and the name to use for configuring them.</p>\n\n<p translation-result=\"on\">启用 <a href=\"guide/template-typecheck#strict-mode\"><code>strictTemplates</code></a> 时，将发出扩展诊断。这是为了让编译器更好地了解 Angular 模板类型并提供准确和有意义的诊断。</p><p translation-origin=\"off\">The <code>defaultCategory</code> field is used for any diagnostics that are not explicitly listed under <code>checks</code>.\nIf not set, such diagnostics will be treated as <code>warning</code>.</p>\n\n<p translation-origin=\"off\">Extended diagnostics will emit when <a href=\"guide/template-typecheck#strict-mode\"><code>strictTemplates</code></a> is enabled.\nThis is required to allow the compiler to better understand Angular template types and provide accurate and meaningful diagnostics.</p>\n\n<h2 id=\"semantic-versioning\" translation-result=\"on\">语义化版本控制<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"extended-diagnostics#semantic-versioning\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"semantic-versioninglink\">Semantic Versioning<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"extended-diagnostics#semantic-versioning\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">Angular 团队打算在 Angular 的<strong>次要</strong>版本中添加或启用新的扩展诊断（请参阅<a href=\"https://docs.npmjs.com/about-semantic-versioning\">semver</a>）。这意味着升级 Angular 可能会在你现有的代码库中显示新的警告。这使团队能够更快地交付特性，并让开发人员更容易访问扩展诊断。</p><p translation-result=\"on\">但是，设置 <code>\"defaultCategory\": \"error\"</code> 会将此类警告升级为硬错误。这可能会导致次要版本升级引入编译错误，这可能被视为不符合 semver 的重大更改。任何新诊断都可以通过上述<a href=\"extended-diagnostics#configuration\">配置</a>被抑制或降级为警告，因此新诊断的影响对于默认将扩展诊断视为错误的项目应该是最小的。默认为错误是一个非常强大的工具；在确定 <code>error</code> 是否是你项目的正确默认值时，请注意这个 semver 警告。</p><p translation-origin=\"off\">The Angular team intends to add or enable new extended diagnostics in <strong>minor</strong> versions of Angular (see <a href=\"https://docs.npmjs.com/about-semantic-versioning\">semver</a>).\nThis means that upgrading Angular may show new warnings in your existing codebase.\nThis enables the team to deliver features more quickly and to make extended diagnostics more accessible to developers.</p>\n\n<p translation-origin=\"off\">However, setting <code>\"defaultCategory\": \"error\"</code> will promote such warnings to hard errors.\nThis can cause a minor version upgrade to introduce compilation errors, which may be seen as a semver non-compliant breaking change.\nAny new diagnostics can be suppressed or demoted to warnings via the above <a href=\"extended-diagnostics#configuration\">configuration</a>, so the impact of a new diagnostic should be minimal to\nprojects that treat extended diagnostics as errors by default.\nDefaulting to error is a very powerful tool; just be aware of this semver caveat when deciding if <code>error</code> is the right default for your project.</p>\n\n<h2 id=\"new-diagnostics\" translation-result=\"on\">新的诊断<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"extended-diagnostics#new-diagnostics\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"new-diagnosticslink\">New Diagnostics<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"extended-diagnostics#new-diagnostics\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">Angular 团队始终乐于接受有关可以添加的新诊断器的建议。扩展诊断通常应该：</p><p translation-origin=\"off\">The Angular team is always open to suggestions about new diagnostics that could be added.\nExtended diagnostics should generally:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">使用 Angular 模板检测常见的、不够明显的开发人员失误</p><p translation-origin=\"off\">Detect a common, non-obvious developer mistake with Angular templates</p>\n\n</li>\n<li>\n<p translation-result=\"on\">清楚地阐明为什么这种模式会导致错误或意外行为</p><p translation-origin=\"off\">Clearly articulate why this pattern can lead to bugs or unintended behavior</p>\n\n</li>\n<li>\n<p translation-result=\"on\">建议一个或多个明确的解决方案</p><p translation-origin=\"off\">Suggest one or more clear solutions</p>\n\n</li>\n<li>\n<p translation-result=\"on\">假阳性率低（最好是零）</p><p translation-origin=\"off\">Have a low, preferably zero, false-positive rate</p>\n\n</li>\n<li>\n<p translation-result=\"on\">适用于绝大多数 Angular 应用程序（不专属于非官方库）</p><p translation-origin=\"off\">Apply to the vast majority of Angular applications (not specific to an unofficial library)</p>\n\n</li>\n<li>\n<p translation-result=\"on\">提高程序的正确性或性能（而不是风格，风格由 linter 负责）</p><p translation-origin=\"off\">Improve program correctness or performance (not style, that responsibility falls to a linter)</p>\n\n</li>\n</ul>\n<p translation-result=\"on\">如果你对符合这些标准的编译器检查有一个想法，请考虑提交<a href=\"https://github.com/angular/angular/issues/new?template=2-feature-request.yaml\">特性请求</a>。</p><p translation-origin=\"off\">If you have an idea for a compiler check which fits these criteria, consider filing a <a href=\"https://github.com/angular/angular/issues/new?template=2-feature-request.yaml\">feature request</a>.</p>\n\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最后复查时间： 2/28/2022</div>\n</div>\n\n\n<!-- links to this doc:\n - extended-diagnostics/NG8101\n - extended-diagnostics/NG8102\n-->\n<!-- links from this doc:\n - extended-diagnostics#configuration\n - extended-diagnostics#diagnostics\n - extended-diagnostics#extended-diagnostics\n - extended-diagnostics#new-diagnostics\n - extended-diagnostics#semantic-versioning\n - extended-diagnostics#扩展诊断\n - extended-diagnostics#新的诊断\n - extended-diagnostics#诊断\n - extended-diagnostics#语义化版本控制\n - extended-diagnostics#配置\n - extended-diagnostics/NG8101\n - extended-diagnostics/NG8102\n - guide/template-typecheck#strict-mode\n - https://docs.npmjs.com/about-semantic-versioning\n - https://github.com/angular/angular-cn/edit/cn/aio/content/extended-diagnostics/index.md?message=docs%3A%20请简述你的修改...\n - https://github.com/angular/angular/issues/new?template=2-feature-request.yaml\n-->"}