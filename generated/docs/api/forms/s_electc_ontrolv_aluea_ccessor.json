{
  "id": "api/forms/SelectControlValueAccessor",
  "title": "SelectControlValueAccessor",
  "contents": "<article>\n  <div class=\"breadcrumb-container\">\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n            { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.cn//api\", \"name\": \"API\" } },\n            { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.cn/api/forms\", \"name\": \"@angular/forms\" } },\n            { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.cn/api/forms/SelectControlValueAccessor\", \"name\": \"SelectControlValueAccessor\" } }\n          ]\n        }\n      </script>\n        <a href=\"/api\">API</a> > <a href=\"api/forms\">@angular/forms</a>\n    </div>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/aio/packages/forms/src/directives/select_control_value_accessor.ts?message=docs(forms)%3A%20请简述你的修改...#L28-L192\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/angular/angular-cn/tree/14.1.0-next.0/packages/forms/src/directives/select_control_value_accessor.ts#L28-L192\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n  </div>\n  <header class=\"api-header\">\n    <h1 id=\"selectcontrolvalueaccessor\">SelectControlValueAccessor<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/forms/SelectControlValueAccessor#selectcontrolvalueaccessor\"><i class=\"material-icons\">link</i></a></h1>\n    <label class=\"api-type-label directive\">directive</label>\n  </header>\n  <aio-toc class=\"embedded\"></aio-toc>\n\n  <div class=\"api-body\">\n  <section class=\"short-description\">\n    <p translation-result=\"on\">该 <code><a href=\"api/forms/ControlValueAccessor\" class=\"code-anchor\">ControlValueAccessor</a></code> 用于写入 select 控件的值，并监听 select 控件的变化。该值访问器会被\n<code><a href=\"api/forms/FormControlDirective\" class=\"code-anchor\">FormControlDirective</a></code>、<code><a href=\"api/forms/FormControlName\" class=\"code-anchor\">FormControlName</a></code> 和 <code><a href=\"api/forms/NgModel\" class=\"code-anchor\">NgModel</a></code> 指令使用。</p><p translation-origin=\"off\">The <code><a href=\"api/forms/ControlValueAccessor\" class=\"code-anchor\">ControlValueAccessor</a></code> for writing select control values and listening to select control\nchanges. The value accessor is used by the <code><a href=\"api/forms/FormControlDirective\" class=\"code-anchor\">FormControlDirective</a></code>, <code><a href=\"api/forms/FormControlName\" class=\"code-anchor\">FormControlName</a></code>, and\n<code><a href=\"api/forms/NgModel\" class=\"code-anchor\">NgModel</a></code> directives.</p>\n\n\n  </section>\n<h2 id=\"导出自\">导出自<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/forms/SelectControlValueAccessor#导出自\"><i class=\"material-icons\">link</i></a></h2>\n<ul>\n  <li>\n    <a href=\"api/forms/ReactiveFormsModule\">\n      <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box\">ReactiveFormsModule</code-example>\n    </a>\n  </li>\n  <li>\n    <a href=\"api/forms/FormsModule\">\n      <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box\">FormsModule</code-example>\n    </a>\n  </li>\n</ul>\n  \n<section class=\"selector-list\">\n  <h2 id=\"selectors\">选择器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/forms/SelectControlValueAccessor#selectors\"><i class=\"material-icons\">link</i></a></h2>\n  <ul>\n    <li><code>select<i>:not([<a href=\"api/forms/SelectMultipleControlValueAccessor\" class=\"code-anchor\">multiple</a>])</i>[<a href=\"api/forms/FormControlName\" class=\"code-anchor\">formControlName</a>]</code></li>\n    <li><code>select<i>:not([<a href=\"api/forms/SelectMultipleControlValueAccessor\" class=\"code-anchor\">multiple</a>])</i>[formControl]</code></li>\n    <li><code>select<i>:not([<a href=\"api/forms/SelectMultipleControlValueAccessor\" class=\"code-anchor\">multiple</a>])</i>[<a href=\"api/forms/NgModel\" class=\"code-anchor\">ngModel</a>]</code></li>\n  </ul>\n</section>\n\n  \n<section class=\"instance-properties\">\n  <a name=\"properties\"></a>\n  <h2 id=\"instance-properties\">属性<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/forms/SelectControlValueAccessor#instance-properties\"><i class=\"material-icons\">link</i></a></h2>\n  <table class=\"is-full-width list-table property-table\">\n    <thead>\n      <tr>\n        <th>属性</th>\n        <th>说明</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"compareWith\"></a>\n          <code class=\"\"><span class=\"property-binding\">@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</span><br><span class=\"member-name\">compareWith</span>: (o1: any, o2: any) => boolean</code>\n        </td>\n        <td>\n          <span class=\"write-only-property\">只写</span>\n          <div no-translate=\"\"><p translation-result=\"on\">跟踪选项的比较算法，以在检查变更时跟踪其标识。</p><p translation-origin=\"off\">Tracks the option comparison algorithm for tracking identities when\nchecking for changes.</p></div>\n          \n        </td>\n      </tr>\n    </tbody>\n  </table>\n</section>\n\n  \n  <section class=\"description\">\n    <h2 id=\"description\">说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/forms/SelectControlValueAccessor#description\"><i class=\"material-icons\">link</i></a></h2>\n    \n    <h3 id=\"using-select-controls-in-a-reactive-form\" translation-result=\"on\">在响应式表单中使用 select 控件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/forms/SelectControlValueAccessor#using-select-controls-in-a-reactive-form\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"using-select-controls-in-a-reactive-form\">Using select controls in a reactive form<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/forms/SelectControlValueAccessor#using-select-controls-in-a-reactive-form\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">下面的例子演示了如何在响应式表单中使用 select 控件。</p><p translation-origin=\"off\">The following examples show how to use a select control in a reactive form.</p>\n\n<code-example path=\"forms/ts/reactiveSelectControl/reactive_select_control_example.ts\" region=\"Component\">\nimport {<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>} from '@angular/core';\nimport {<a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>, <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>} from '@angular/forms';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'example-app',\n  template: `\n    &#x3C;form [formGroup]=\"form\">\n      &#x3C;select <a href=\"api/forms/FormControlName\" class=\"code-anchor\">formControlName</a>=\"state\">\n        &#x3C;option *<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a>=\"let state of states\" [ngValue]=\"state\">\n          {{ state.abbrev }}\n        &#x3C;/option>\n      &#x3C;/select>\n    &#x3C;/form>\n\n     &#x3C;p><a href=\"api/forms/Form\" class=\"code-anchor\">Form</a> value: {{ form.value | json }}&#x3C;/p>\n     &#x3C;!-- {state: {name: 'New York', abbrev: 'NY'} } -->\n  `,\n})\nexport class ReactiveSelectComp {\n  states = [\n    {name: 'Arizona', abbrev: 'AZ'},\n    {name: 'California', abbrev: 'CA'},\n    {name: 'Colorado', abbrev: 'CO'},\n    {name: 'New York', abbrev: 'NY'},\n    {name: 'Pennsylvania', abbrev: 'PA'},\n  ];\n\n  form = new <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>({\n    state: new <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>(this.states[3]),\n  });\n}\n\n</code-example>\n<h3 id=\"using-select-controls-in-a-template-driven-form\" translation-result=\"on\">在模板驱动表单中使用 select 控件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/forms/SelectControlValueAccessor#using-select-controls-in-a-template-driven-form\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"using-select-controls-in-a-template-driven-form\">Using select controls in a template-driven form<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/forms/SelectControlValueAccessor#using-select-controls-in-a-template-driven-form\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">要在模板驱动表单中使用 <code>select</code>，只要把 <code><a href=\"api/forms/NgModel\" class=\"code-anchor\">ngModel</a></code> 和 <code>name</code> 属性加到 <code>&#x3C;select></code> 标签上即可。</p><p translation-origin=\"off\">To use a select in a template-driven form, simply add an <code><a href=\"api/forms/NgModel\" class=\"code-anchor\">ngModel</a></code> and a <code>name</code>\nattribute to the main <code>&#x3C;select></code> tag.</p>\n\n<code-example path=\"forms/ts/selectControl/select_control_example.ts\" region=\"Component\">\nimport {<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>} from '@angular/core';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'example-app',\n  template: `\n    &#x3C;form #f=\"<a href=\"api/forms/NgForm\" class=\"code-anchor\">ngForm</a>\">\n      &#x3C;select name=\"state\" <a href=\"api/forms/NgModel\" class=\"code-anchor\">ngModel</a>>\n        &#x3C;option value=\"\" disabled>Choose a state&#x3C;/option>\n        &#x3C;option *<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a>=\"let state of states\" [ngValue]=\"state\">\n          {{ state.abbrev }}\n        &#x3C;/option>\n      &#x3C;/select>\n    &#x3C;/form>\n\n     &#x3C;p><a href=\"api/forms/Form\" class=\"code-anchor\">Form</a> value: {{ f.value | json }}&#x3C;/p>\n     &#x3C;!-- example value: {state: {name: 'New York', abbrev: 'NY'} } -->\n  `,\n})\nexport class SelectControlComp {\n  states = [\n    {name: 'Arizona', abbrev: 'AZ'},\n    {name: 'California', abbrev: 'CA'},\n    {name: 'Colorado', abbrev: 'CO'},\n    {name: 'New York', abbrev: 'NY'},\n    {name: 'Pennsylvania', abbrev: 'PA'},\n  ];\n}\n\n</code-example>\n<h3 id=\"customizing-option-selection\" translation-result=\"on\">自定义 <code>option</code> 的选择结果<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/forms/SelectControlValueAccessor#customizing-option-selection\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"customizing-option-selection\">Customizing option selection<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/forms/SelectControlValueAccessor#customizing-option-selection\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">Angular\n使用对象标识作为选项。条目标识可能在其实质性数据没有变化的情况发生变化。比如，如果这些条目是通过\nRPC 的方式从服务端取到的，当重新执行 RPC\n时，就算数据没有变化，第二个响应也会生成一些具有不同对象标识的对象。</p><p translation-origin=\"off\">Angular uses object identity to select option. It's possible for the identities of items\nto change while the data does not. This can happen, for example, if the items are produced\nfrom an RPC to the server, and that RPC is re-run. Even if the data hasn't changed, the\nsecond response will produce objects with different identities.</p>\n\n<p translation-result=\"on\">要想自定义默认的选项比较算法，<code>&#x3C;select></code> 支持一个名叫 <code>compareWith</code> 的输入。\n<code>compareWith</code> 接受一个<strong>函数</strong>，它具有两个参数：<code>option1</code> 和 <code>option2</code>。\n如果指定了 <code>compareWith</code>，则 Angular 会根据该函数的返回值来选取一个选项。</p><p translation-origin=\"off\">To customize the default option comparison algorithm, <code>&#x3C;select></code> supports <code>compareWith</code> input.\n<code>compareWith</code> takes a <strong>function</strong> which has two arguments: <code>option1</code> and <code>option2</code>.\nIf <code>compareWith</code> is given, Angular selects option by the return value of the function.</p>\n\n<code-example language=\"ts\">\nconst selectedCountriesControl = new <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>();\n</code-example>\n<code-example>\n&#x3C;select [compareWith]=\"compareFn\"  [formControl]=\"selectedCountriesControl\">\n    &#x3C;option *<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a>=\"let country of countries\" [ngValue]=\"country\">\n        {{country.name}}\n    &#x3C;/option>\n&#x3C;/select>\n\ncompareFn(c1: Country, c2: Country): boolean {\n    return c1 &#x26;&#x26; c2 ? c1.id === c2.id : c1 === c2;\n}\n</code-example>\n<p translation-result=\"on\">注意：我们要监听 <code>change</code> 事件，这是因为 <code>input</code> 事件不会在 Firefox 和 IE 的 <code>select</code>\n元素上触发： <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1024350\">https://bugzilla.mozilla.org/show_bug.cgi?id=1024350</a>\n<a href=\"https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/4660045/\">https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/4660045/</a></p><p translation-origin=\"off\"><strong>Note:</strong> We listen to the 'change' event because 'input' events aren't fired\nfor selects in IE, see:\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event#browser_compatibility\">https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event#browser_compatibility</a></p>\n\n\n  </section>\n\n  \n  \n  \n  </div>\n</article>\n\n<!-- links to this doc:\n - api/forms\n - api/forms/ControlValueAccessor\n - api/forms/FormControlName\n - api/forms/FormsModule\n - api/forms/NgModel\n - api/forms/NgSelectOption\n - api/forms/ReactiveFormsModule\n - api/forms/SelectMultipleControlValueAccessor\n-->\n<!-- links from this doc:\n - /api\n - api/common/NgForOf\n - api/core/Component\n - api/core/Input\n - api/forms\n - api/forms/ControlValueAccessor\n - api/forms/Form\n - api/forms/FormControl\n - api/forms/FormControlDirective\n - api/forms/FormControlName\n - api/forms/FormGroup\n - api/forms/FormsModule\n - api/forms/NgForm\n - api/forms/NgModel\n - api/forms/ReactiveFormsModule\n - api/forms/SelectControlValueAccessor#customizing-option-selection\n - api/forms/SelectControlValueAccessor#description\n - api/forms/SelectControlValueAccessor#instance-properties\n - api/forms/SelectControlValueAccessor#selectcontrolvalueaccessor\n - api/forms/SelectControlValueAccessor#selectors\n - api/forms/SelectControlValueAccessor#using-select-controls-in-a-reactive-form\n - api/forms/SelectControlValueAccessor#using-select-controls-in-a-template-driven-form\n - api/forms/SelectControlValueAccessor#导出自\n - api/forms/SelectMultipleControlValueAccessor\n - https://bugzilla.mozilla.org/show_bug.cgi?id=1024350\n - https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/4660045/\n - https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event#browser_compatibility\n - https://github.com/angular/angular-cn/edit/aio/packages/forms/src/directives/select_control_value_accessor.ts?message=docs(forms)%3A%20请简述你的修改...#L28-L192\n - https://github.com/angular/angular-cn/tree/14.1.0-next.0/packages/forms/src/directives/select_control_value_accessor.ts#L28-L192\n-->"
}