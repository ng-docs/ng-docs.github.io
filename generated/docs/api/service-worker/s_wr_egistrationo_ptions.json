{"id":"api/service-worker/SwRegistrationOptions","title":"SwRegistrationOptions","contents":"<article>\n  <div class=\"breadcrumb-container\">\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n            { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.cn//api\", \"name\": \"API\" } },\n            { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.cn/api/service-worker\", \"name\": \"@angular/service-worker\" } },\n            { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.cn/api/service-worker/SwRegistrationOptions\", \"name\": \"SwRegistrationOptions\" } }\n          ]\n        }\n      </script>\n        <a href=\"/api\">API</a> &gt; <a href=\"api/service-worker\">@angular/service-worker</a>\n    </div>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/cn/packages/service-worker/src/module.ts?message=docs(service-worker)%3A%20请简述你的修改...#L17-L119\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/angular/angular-cn/tree/15.0.1/packages/service-worker/src/module.ts#L17-L119\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n  </div>\n  <header ng-should-translate=\"\" class=\"api-header\">\n    <h1 id=\"swregistrationoptions\">SwRegistrationOptions<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/service-worker/SwRegistrationOptions#swregistrationoptions\"><i class=\"material-icons\">link</i></a></h1>\n    <label class=\"api-type-label class\">class</label>\n  </header>\n  <aio-toc class=\"embedded\"></aio-toc>\n\n  <div class=\"api-body\">\n  <section ng-should-translate=\"\" class=\"short-description\">\n    <p translation-result=\"on\">可用于在 <code><a href=\"api/service-worker/ServiceWorkerModule#register\" class=\"code-anchor\">ServiceWorkerModule.register()</a></code> 之外为 <code><a href=\"api/service-worker/ServiceWorkerModule\" class=\"code-anchor\">ServiceWorkerModule</a></code> 提供选项的标记。</p><p translation-origin=\"off\">Token that can be used to provide options for <code><a href=\"api/service-worker/ServiceWorkerModule\" class=\"code-anchor\">ServiceWorkerModule</a></code> outside of\n<code><a href=\"api/service-worker/ServiceWorkerModule#register\" class=\"code-anchor\">ServiceWorkerModule.register()</a></code>.</p>\n\n\n    <p no-translate=\"\"><a href=\"api/service-worker/SwRegistrationOptions#description\">查看\"说明\"...</a></p>\n  </section><section ng-should-translate=\"\" class=\"class-overview\">\n<code-example language=\"ts\" hidecopy=\"true\">\nabstract class <a href=\"api/service-worker/SwRegistrationOptions\" class=\"code-anchor\">SwRegistrationOptions</a> {\n  <a class=\"code-anchor\" href=\"api/service-worker/SwRegistrationOptions#enabled\"><span class=\"member-name\">enabled</span>?: boolean</a>\n  <a class=\"code-anchor\" href=\"api/service-worker/SwRegistrationOptions#scope\"><span class=\"member-name\">scope</span>?: string</a>\n  <a class=\"code-anchor\" href=\"api/service-worker/SwRegistrationOptions#registrationStrategy\"><span class=\"member-name\">registrationStrategy</span>?: string | (() =&gt; Observable&lt;unknown&gt;)</a>\n}\n</code-example>\n\n</section>\n\n  \n<section ng-should-translate=\"\" class=\"description\">\n  <h2 id=\"description\">说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/service-worker/SwRegistrationOptions#description\"><i class=\"material-icons\">link</i></a></h2>\n  <p translation-result=\"on\">你可以用此标记来定义一个在运行时生成注册选项的提供者，例如通过函数调用：</p><p translation-origin=\"off\">You can use this token to define a provider that generates the registration options at runtime,\nfor example via a function call:</p>\n\n<code-example path=\"service-worker/registration-options/module.ts\" region=\"registration-options\" header=\"app.module.ts\">\nimport {<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>} from '@angular/core';\nimport {<a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a>} from '@angular/platform-browser';\nimport {<a href=\"api/service-worker/ServiceWorkerModule\" class=\"code-anchor\">ServiceWorkerModule</a>, <a href=\"api/service-worker/SwRegistrationOptions\" class=\"code-anchor\">SwRegistrationOptions</a>} from '@angular/service-worker';\n/* . . . */\n\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  /* . . . */\n  imports: [\n    <a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a>,\n    ServiceWorkerModule.register('ngsw-worker.js'),\n  ],\n  providers: [\n    {\n      provide: <a href=\"api/service-worker/SwRegistrationOptions\" class=\"code-anchor\">SwRegistrationOptions</a>,\n      useFactory: () =&gt; ({enabled: location.search.includes('sw=true')}),\n    },\n  ],\n})\nexport class AppModule {\n}\n\n</code-example>\n</section>\n  \n<section ng-should-translate=\"\" class=\"instance-properties\">\n  <a name=\"properties\"></a>\n  <h2 id=\"instance-properties\">属性<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/service-worker/SwRegistrationOptions#instance-properties\"><i class=\"material-icons\">link</i></a></h2>\n  <table class=\"is-full-width list-table property-table\">\n    <thead>\n      <tr>\n        <th>属性</th>\n        <th>说明</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr class=\"instance-properties\">\n        <td>\n          <a id=\"enabled\"></a>\n          <code class=\"\"><span class=\"member-name\">enabled</span>?: boolean</code>\n        </td>\n        <td>\n          <div no-translate=\"\"><p translation-result=\"on\">ServiceWorker 是否将被注册，并且相关服务（例如 <code><a href=\"api/service-worker/SwPush\" class=\"code-anchor\">SwPush</a></code> 和 <code><a href=\"api/service-worker/SwUpdate\" class=\"code-anchor\">SwUpdate</a></code>\n）将尝试与它进行通信和交互。</p><p translation-origin=\"off\">Whether the ServiceWorker will be registered and the related services (such as <code><a href=\"api/service-worker/SwPush\" class=\"code-anchor\">SwPush</a></code> and\n<code><a href=\"api/service-worker/SwUpdate\" class=\"code-anchor\">SwUpdate</a></code>) will attempt to communicate and interact with it.</p>\n</div>\n          <p translation-result=\"on\">默认值： true</p><p translation-origin=\"off\">Default: true</p>\n\n\n        </td>\n      </tr>\n      <tr class=\"instance-properties\">\n        <td>\n          <a id=\"scope\"></a>\n          <code class=\"\"><span class=\"member-name\">scope</span>?: string</code>\n        </td>\n        <td>\n          <div no-translate=\"\"><p translation-result=\"on\">定义 ServiceWorker 的注册范围的 URL；也就是说，它可以控制的 URL\n范围。调用<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register\">ServiceWorkerContainer#register()</a>时将使用它。</p><p translation-origin=\"off\">A URL that defines the ServiceWorker's registration scope; that is, what range of URLs it can\ncontrol. It will be used when calling\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register\">ServiceWorkerContainer#register()</a>.</p>\n</div>\n          \n        </td>\n      </tr>\n      <tr class=\"instance-properties\">\n        <td>\n          <a id=\"registrationStrategy\"></a>\n          <code class=\"\"><span class=\"member-name\">registrationStrategy</span>?: string | (() =&gt; Observable&lt;unknown&gt;)</code>\n        </td>\n        <td>\n          <div no-translate=\"\"><p translation-result=\"on\">定义 ServiceWorker 注册策略，该策略确定它将何时注册到浏览器。</p><p translation-origin=\"off\">Defines the ServiceWorker registration strategy, which determines when it will be registered\nwith the browser.</p>\n</div>\n          <p translation-result=\"on\">应用程序稳定后注册的默认行为（即一旦没有挂起的微任务和宏任务）旨在尽快注册\nServiceWorker，但不影响应用程序的首次加载。</p><p translation-origin=\"off\">The default behavior of registering once the application stabilizes (i.e. as soon as there are\nno pending micro- and macro-tasks) is designed to register the ServiceWorker as soon as\npossible but without affecting the application's first time load.</p>\n\n<p translation-result=\"on\">不过，在某些情况下，你可能希望对 ServiceWorker\n的注册时间进行更多控制（例如，可能会有长时间运行的超时或轮询间隔，以防止应用程序稳定）。可用的选项是：</p><p translation-origin=\"off\">Still, there might be cases where you want more control over when the ServiceWorker is\nregistered (for example, there might be a long-running timeout or polling interval, preventing\nthe app from stabilizing). The available option are:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><code>registerWhenStable:&lt;timeout&gt;</code> ：一旦应用程序稳定（没有挂起的微/宏任务）后注册，但不迟于\n<code>&lt;timeout&gt;</code> 毫秒。如果应用程序在 <code>&lt;timeout&gt;</code> 毫秒后尚未稳定（例如，由于经常出现的异步任务），则\nServiceWorker 无论如何都会被注册。如果省略 <code>&lt;timeout&gt;</code> ，则 ServiceWorker\n将仅在应用稳定后才会注册。</p><p translation-origin=\"off\"><code>registerWhenStable:&lt;timeout&gt;</code>: Register as soon as the application stabilizes (no pending\nmicro-/macro-tasks) but no later than <code>&lt;timeout&gt;</code> milliseconds. If the app hasn't\nstabilized after <code>&lt;timeout&gt;</code> milliseconds (for example, due to a recurrent asynchronous\ntask), the ServiceWorker will be registered anyway.\nIf <code>&lt;timeout&gt;</code> is omitted, the ServiceWorker will only be registered once the app\nstabilizes.</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><code>registerImmediately</code> ：立即注册。</p><p translation-origin=\"off\"><code>registerImmediately</code>: Register immediately.</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><code>registerWithDelay:&lt;timeout&gt;</code> ：使用 <code>&lt;timeout&gt;</code> 毫秒的延迟进行注册。例如，使用\n<code>registerWithDelay:5000</code> 在 5 秒后注册 ServiceWorker。如果省略 <code>&lt;timeout&gt;</code> ，则默认为 <code>0</code>\n，一旦所有挂起的微任务完成，它将尽快注册 ServiceWorker，但仍然是异步的。</p><p translation-origin=\"off\"><code>registerWithDelay:&lt;timeout&gt;</code>: Register with a delay of <code>&lt;timeout&gt;</code> milliseconds. For\nexample, use <code>registerWithDelay:5000</code> to register the ServiceWorker after 5 seconds. If\n<code>&lt;timeout&gt;</code> is omitted, is defaults to <code>0</code>, which will register the ServiceWorker as soon\nas possible but still asynchronously, once all pending micro-tasks are completed.</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/observables\">Observable</a>工厂函数：返回 <code>Observable</code>\n的函数。该函数将在运行时用于获取和订阅 <code>Observable</code> ，并且一旦发出第一个值，ServiceWorker\n就会被注册。</p><p translation-origin=\"off\">An <a href=\"guide/observables\">Observable</a> factory function: A function that returns an <code>Observable</code>.\nThe function will be used at runtime to obtain and subscribe to the <code>Observable</code> and the\nServiceWorker will be registered as soon as the first value is emitted.</p>\n\n</li>\n</ul>\n<p translation-result=\"on\">默认值：“registerWhenStable:30000”</p><p translation-origin=\"off\">Default: 'registerWhenStable:30000'</p>\n\n\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</section>\n</div>\n</article>\n\n<!-- links to this doc:\n - api/service-worker\n - api/service-worker/ServiceWorkerModule\n - guide/service-worker-communications\n-->\n<!-- links from this doc:\n - /api\n - api/core/NgModule\n - api/platform-browser/BrowserModule\n - api/service-worker\n - api/service-worker/ServiceWorkerModule\n - api/service-worker/ServiceWorkerModule#register\n - api/service-worker/SwPush\n - api/service-worker/SwRegistrationOptions#description\n - api/service-worker/SwRegistrationOptions#enabled\n - api/service-worker/SwRegistrationOptions#instance-properties\n - api/service-worker/SwRegistrationOptions#registrationStrategy\n - api/service-worker/SwRegistrationOptions#scope\n - api/service-worker/SwRegistrationOptions#swregistrationoptions\n - api/service-worker/SwUpdate\n - guide/observables\n - https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register\n - https://github.com/angular/angular-cn/edit/cn/packages/service-worker/src/module.ts?message=docs(service-worker)%3A%20请简述你的修改...#L17-L119\n - https://github.com/angular/angular-cn/tree/15.0.1/packages/service-worker/src/module.ts#L17-L119\n-->"}