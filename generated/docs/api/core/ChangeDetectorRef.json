{
  "id": "api/core/ChangeDetectorRef",
  "title": "ChangeDetectorRef",
  "contents": "\n\n<article>\n  <div class=\"breadcrumb-container\">\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n            { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.cn//api\", \"name\": \"API\" } },\n            { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.cn/api/core\", \"name\": \"@angular/core\" } },\n            { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.cn/api/core/ChangeDetectorRef\", \"name\": \"ChangeDetectorRef\" } }\n          ]\n        }\n      </script>\n        <a href=\"/api\">API</a> > <a href=\"api/core\">@angular/core</a>\n    </div>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/aio/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20请简述你的修改...#L10-L156\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/angular/angular-cn/tree/9.0.0-rc.1/packages/core/src/change_detection/change_detector_ref.ts#L10-L156\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n  </div>\n  \n  <header class=\"api-header\">\n    <h1 id=\"changedetectorref\">ChangeDetectorRef<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#changedetectorref\"><i class=\"material-icons\">link</i></a></h1>\n    \n    <label class=\"api-type-label class\">class</label>\n    \n    \n    \n  </header>\n  \n  <aio-toc class=\"embedded\"></aio-toc>\n\n  <div class=\"api-body\">\n    \n  <section class=\"short-description\">\n    <p translation-result=\"on\">Angular 各种视图的基础类，提供变更检测功能。\n变更检测树会收集要检查的所有视图。\n使用这些方法从树中添加或移除视图、初始化变更检测并显式地把这些视图标记为<em>脏的</em>，意思是它们变了、需要重新渲染。</p><p translation-origin=\"off\">Base class for Angular Views, provides change detection functionality.\nA change-detection tree collects all views that are to be checked for changes.\nUse the methods to add and remove views from the tree, initiate change-detection,\nand explicitly mark views as <em>dirty</em>, meaning that they have changed and need to be rerendered.</p>\n\n\n    \n  </section>\n  \n\n  \n\n  \n  <section class=\"class-overview\">\n<code-example language=\"ts\" hidecopy=\"true\">\nabstract class <a href=\"api/core/ChangeDetectorRef\" class=\"code-anchor\">ChangeDetectorRef</a> {\n  <a class=\"code-anchor\" href=\"api/core/ChangeDetectorRef#markForCheck\">abstract <span class=\"member-name\">markForCheck</span>(): void</a>\n  <a class=\"code-anchor\" href=\"api/core/ChangeDetectorRef#detach\">abstract <span class=\"member-name\">detach</span>(): void</a>\n  <a class=\"code-anchor\" href=\"api/core/ChangeDetectorRef#detectChanges\">abstract <span class=\"member-name\">detectChanges</span>(): void</a>\n  <a class=\"code-anchor\" href=\"api/core/ChangeDetectorRef#checkNoChanges\">abstract <span class=\"member-name\">checkNoChanges</span>(): void</a>\n  <a class=\"code-anchor\" href=\"api/core/ChangeDetectorRef#reattach\">abstract <span class=\"member-name\">reattach</span>(): void</a>\n}\n</code-example>\n\n  \n  \n  <div class=\"descendants class\">\n    <h2 id=\"子类\">子类<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#子类\"><i class=\"material-icons\">link</i></a></h2>\n    \n\n<ul>\n  \n    <li>\n      <code><a href=\"api/core/ViewRef\" class=\"code-anchor\">ViewRef</a></code>\n      \n\n<ul>\n  \n    <li>\n      <code><a href=\"api/core/EmbeddedViewRef\" class=\"code-anchor\">EmbeddedViewRef</a></code>\n      \n\n\n    </li>\n  \n</ul>\n\n\n    </li>\n  \n</ul>\n\n\n  </div>\n  \n\n</section>\n\n\n  \n\n  \n  \n\n  \n\n\n\n\n\n\n\n\n\n\n\n\n<section class=\"instance-methods\">\n  <a name=\"methods\"></a>\n  <h2 id=\"方法\">方法<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#方法\"><i class=\"material-icons\">link</i></a></h2>\n  \n    <a id=\"markForCheck\"></a>\n<table class=\"is-full-width method-table instance-method\">\n  <thead><tr><th>\n    <div class=\"with-github-links\">\n    <h3 id=\"markforcheck\">\n      markForCheck()\n      \n    <a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#markforcheck\"><i class=\"material-icons\">link</i></a></h3>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/aio/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20请简述你的修改...#L76-L92\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/angular/angular-cn/tree/9.0.0-rc.1/packages/core/src/change_detection/change_detector_ref.ts#L76-L92\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n    </div>\n  </th></tr></thead>\n  <tbody>\n    <tr>\n      <td class=\"short-description\">\n        <p translation-result=\"on\">当视图使用 <a href=\"api/core/ChangeDetectionStrategy#OnPush\">OnPush</a>（<code>checkOnce</code>）变更检测策略时，把该视图显式标记为已更改，以便它再次进行检查。</p><p translation-origin=\"off\">When a view uses the <a href=\"api/core/ChangeDetectionStrategy#OnPush\">OnPush</a> (checkOnce)\nchange detection strategy, explicitly marks the view as changed so that\nit can be checked again.</p>\n\n\n      </td>\n    </tr>\n  \n    <tr>\n      <td>\n        <div class=\"overload-info\">\n  \n\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">abstract <span class=\"member-name\">markForCheck</span>(): void</code-example>\n\n  \n\n  <h6 class=\"no-anchor\" id=\"参数\">参数</h6>\n  <p>没有参数。</p>\n\n  \n  <h6 class=\"no-anchor\" id=\"返回值\">返回值</h6>\n  <p><code>void</code></p>\n\n  \n\n\n  \n\n  \n</div>\n      </td>\n    </tr>\n  \n\n  <tr>\n      <td class=\"description\">\n        <p translation-result=\"on\">当输入已更改或视图中发生了事件时，组件通常会标记为脏的（需要重新渲染）。调用此方法会确保即使那些触发器没有被触发，也仍然检查该组件。</p><p translation-origin=\"off\">Components are normally marked as dirty (in need of rerendering) when inputs\nhave changed or events have fired in the view. Call this method to ensure that\na component is checked even if these triggers have not occured.</p>\n\n<!-- TODO: Add a link to a chapter on OnPush components -->\n\n      </td>\n    </tr>\n\n  \n    </tbody>\n</table>\n\n  \n    <a id=\"detach\"></a>\n<table class=\"is-full-width method-table instance-method\">\n  <thead><tr><th>\n    <div class=\"with-github-links\">\n    <h3 id=\"detach\">\n      detach()\n      \n    <a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#detach\"><i class=\"material-icons\">link</i></a></h3>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/aio/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20请简述你的修改...#L93-L112\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/angular/angular-cn/tree/9.0.0-rc.1/packages/core/src/change_detection/change_detector_ref.ts#L93-L112\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n    </div>\n  </th></tr></thead>\n  <tbody>\n    <tr>\n      <td class=\"short-description\">\n        <p translation-result=\"on\">从变更检测树中分离开视图。\n已分离的视图在重新附加上去之前不会被检查。\n与 <code><a href=\"api/core/testing/ComponentFixture#detectChanges\" class=\"code-anchor\">detectChanges()</a></code> 结合使用，可以实现局部变更检测。</p><p translation-origin=\"off\">Detaches this view from the change-detection tree.\nA detached view is  not checked until it is reattached.\nUse in combination with <code><a href=\"api/core/testing/ComponentFixture#detectChanges\" class=\"code-anchor\">detectChanges()</a></code> to implement local change detection checks.</p>\n\n\n      </td>\n    </tr>\n  \n    <tr>\n      <td>\n        <div class=\"overload-info\">\n  \n\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">abstract <span class=\"member-name\">detach</span>(): void</code-example>\n\n  \n\n  <h6 class=\"no-anchor\" id=\"参数-1\">参数</h6>\n  <p>没有参数。</p>\n\n  \n  <h6 class=\"no-anchor\" id=\"返回值-1\">返回值</h6>\n  <p><code>void</code></p>\n\n  \n\n\n  \n\n  \n</div>\n      </td>\n    </tr>\n  \n\n  <tr>\n      <td class=\"description\">\n        <p translation-result=\"on\">即使已分离的视图已标记为脏的，它们在重新附加上去之前也不会被检查。</p><p translation-origin=\"off\">Detached views are not checked during change detection runs until they are\nre-attached, even if they are marked as dirty.</p>\n\n<!-- TODO: Add a link to a chapter on detach/reattach/local digest -->\n<!-- TODO: Add a live demo once ref.detectChanges is merged into master -->\n\n      </td>\n    </tr>\n\n  \n    </tbody>\n</table>\n\n  \n    <a id=\"detectChanges\"></a>\n<table class=\"is-full-width method-table instance-method\">\n  <thead><tr><th>\n    <div class=\"with-github-links\">\n    <h3 id=\"detectchanges\">\n      detectChanges()\n      \n    <a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#detectchanges\"><i class=\"material-icons\">link</i></a></h3>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/aio/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20请简述你的修改...#L113-L125\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/angular/angular-cn/tree/9.0.0-rc.1/packages/core/src/change_detection/change_detector_ref.ts#L113-L125\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n    </div>\n  </th></tr></thead>\n  <tbody>\n    <tr>\n      <td class=\"short-description\">\n        <p translation-result=\"on\">检查该视图及其子视图。与 <a href=\"api/core/ChangeDetectorRef#detach\">detach</a> 结合使用可以实现局部变更检测。</p><p translation-origin=\"off\">Checks this view and its children. Use in combination with <a href=\"api/core/ChangeDetectorRef#detach\">detach</a>\nto implement local change detection checks.</p>\n\n\n      </td>\n    </tr>\n  \n    <tr>\n      <td>\n        <div class=\"overload-info\">\n  \n\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">abstract <span class=\"member-name\">detectChanges</span>(): void</code-example>\n\n  \n\n  <h6 class=\"no-anchor\" id=\"参数-2\">参数</h6>\n  <p>没有参数。</p>\n\n  \n  <h6 class=\"no-anchor\" id=\"返回值-2\">返回值</h6>\n  <p><code>void</code></p>\n\n  \n\n\n  \n\n  \n</div>\n      </td>\n    </tr>\n  \n\n  <tr>\n      <td class=\"description\">\n        \n      </td>\n    </tr>\n\n  \n    </tbody>\n</table>\n\n  \n    <a id=\"checkNoChanges\"></a>\n<table class=\"is-full-width method-table instance-method\">\n  <thead><tr><th>\n    <div class=\"with-github-links\">\n    <h3 id=\"checknochanges\">\n      checkNoChanges()\n      \n    <a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#checknochanges\"><i class=\"material-icons\">link</i></a></h3>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/aio/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20请简述你的修改...#L126-L137\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/angular/angular-cn/tree/9.0.0-rc.1/packages/core/src/change_detection/change_detector_ref.ts#L126-L137\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n    </div>\n  </th></tr></thead>\n  <tbody>\n    <tr>\n      <td class=\"short-description\">\n        <p translation-result=\"on\">检查变更检测器及其子检测器，如果检测到任何更改，则抛出异常。</p><p translation-origin=\"off\">Checks the change detector and its children, and throws if any changes are detected.</p>\n\n\n      </td>\n    </tr>\n  \n    <tr>\n      <td>\n        <div class=\"overload-info\">\n  \n\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">abstract <span class=\"member-name\">checkNoChanges</span>(): void</code-example>\n\n  \n\n  <h6 class=\"no-anchor\" id=\"参数-3\">参数</h6>\n  <p>没有参数。</p>\n\n  \n  <h6 class=\"no-anchor\" id=\"返回值-3\">返回值</h6>\n  <p><code>void</code></p>\n\n  \n\n\n  \n\n  \n</div>\n      </td>\n    </tr>\n  \n\n  <tr>\n      <td class=\"description\">\n        <p translation-result=\"on\">在开发模式下可用来验证正在运行的变更检测器是否引入了其它变更。</p><p translation-origin=\"off\">Use in development mode to verify that running change detection doesn't introduce\nother changes.</p>\n\n\n      </td>\n    </tr>\n\n  \n    </tbody>\n</table>\n\n  \n    <a id=\"reattach\"></a>\n<table class=\"is-full-width method-table instance-method\">\n  <thead><tr><th>\n    <div class=\"with-github-links\">\n    <h3 id=\"reattach\">\n      reattach()\n      \n    <a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#reattach\"><i class=\"material-icons\">link</i></a></h3>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/aio/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20请简述你的修改...#L138-L149\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/angular/angular-cn/tree/9.0.0-rc.1/packages/core/src/change_detection/change_detector_ref.ts#L138-L149\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n    </div>\n  </th></tr></thead>\n  <tbody>\n    <tr>\n      <td class=\"short-description\">\n        <p translation-result=\"on\">把以前分离开的视图重新附加到变更检测树上。\n视图会被默认附加到这棵树上。</p><p translation-origin=\"off\">Re-attaches the previously detached view to the change detection tree.\nViews are attached to the tree by default.</p>\n\n\n      </td>\n    </tr>\n  \n    <tr>\n      <td>\n        <div class=\"overload-info\">\n  \n\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">abstract <span class=\"member-name\">reattach</span>(): void</code-example>\n\n  \n\n  <h6 class=\"no-anchor\" id=\"参数-4\">参数</h6>\n  <p>没有参数。</p>\n\n  \n  <h6 class=\"no-anchor\" id=\"返回值-4\">返回值</h6>\n  <p><code>void</code></p>\n\n  \n\n\n  \n\n  \n</div>\n      </td>\n    </tr>\n  \n\n  <tr>\n      <td class=\"description\">\n        \n      </td>\n    </tr>\n\n  \n    </tbody>\n</table>\n\n  \n</section>\n\n\n\n  \n<section class=\"usage-notes\">\n  <h2 id=\"usage-notes\">使用说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#usage-notes\"><i class=\"material-icons\">link</i></a></h2>\n  <p translation-result=\"on\">下面的例子演示了如何修改默认的变更检测行为，以便在需要时执行显式变更检测。</p><p translation-origin=\"off\">The following examples demonstrate how to modify default change-detection behavior\nto perform explicit detection when needed.</p>\n\n<h3 id=\"use-markforcheck-with-checkonce-strategy\" translation-result=\"on\">使用 <code>markForCheck()</code> 和 <code><a href=\"\" class=\"code-anchor\">CheckOnce</a></code> 策略<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#use-markforcheck-with-checkonce-strategy\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"use-markforcheck-with-checkonce-strategy\">Use <code>markForCheck()</code> with <code><a href=\"\" class=\"code-anchor\">CheckOnce</a></code> strategy<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#use-markforcheck-with-checkonce-strategy\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">下面的例子为组件设置了 <code>OnPush</code> 变更检测策略（<code><a href=\"\" class=\"code-anchor\">CheckOnce</a></code> 而不是默认的 <code><a href=\"\" class=\"code-anchor\">CheckAlways</a></code>），然后每隔一段时间强制进行第二轮检测。\n参见<a href=\"http://plnkr.co/edit/GC512b?p=preview\">在线例子</a>。</p><p translation-origin=\"off\">The following example sets the <code>OnPush</code> change-detection strategy for a component\n(<code><a href=\"\" class=\"code-anchor\">CheckOnce</a></code>, rather than the default <code><a href=\"\" class=\"code-anchor\">CheckAlways</a></code>), then forces a second check\nafter an interval. See <a href=\"http://plnkr.co/edit/GC512b?p=preview\">live demo</a>.</p>\n\n<code-example path=\"core/ts/change_detect/change-detection.ts\" region=\"mark-for-check\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'my-app',\n  template: `Number of ticks: {{numberOfTicks}}`,\n  <a href=\"api/core/Component#changeDetection\" class=\"code-anchor\">changeDetection</a>: <a href=\"api/core/ChangeDetectionStrategy#OnPush\" class=\"code-anchor\">ChangeDetectionStrategy.OnPush</a>,\n})\n\nclass AppComponent {\n  numberOfTicks = 0;\n\n  constructor(private ref: <a href=\"api/core/ChangeDetectorRef\" class=\"code-anchor\">ChangeDetectorRef</a>) {\n    setInterval(() => {\n      this.numberOfTicks++;\n      // require view to be updated\n      this.ref.markForCheck();\n    }, 1000);\n  }\n}\n\n</code-example>\n<h3 id=\"detach-change-detector-to-limit-how-often-check-occurs\" translation-result=\"on\">分离开变更检测器以限制变更检测的发生频度<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#detach-change-detector-to-limit-how-often-check-occurs\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"detach-change-detector-to-limit-how-often-check-occurs\">Detach change detector to limit how often check occurs<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#detach-change-detector-to-limit-how-often-check-occurs\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">下面的例子定义了一个带有只读数据的大型列表，这些数据预计每秒会变化很多次。\n为了提高性能，我们检测和更新列表的频率就应该比实际发生的变化少得多。\n要解决这个问题，就要分离开变更检测器，并每隔五秒钟显式执行一次变更检查。</p><p translation-origin=\"off\">The following example defines a component with a large list of read-only data\nthat is expected to change constantly, many times per second.\nTo improve performance, we want to check and update the list\nless often than the changes actually occur. To do that, we detach\nthe component's change detector and perform an explicit local check every five seconds.</p>\n\n<code-example path=\"core/ts/change_detect/change-detection.ts\" region=\"detach\">\nclass DataListProvider {\n  // in a real application the returned data will be different every <a href=\"\" class=\"code-anchor\">time</a>\n  get data() { return [1, 2, 3, 4, 5]; }\n}\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'giant-list',\n  template: `\n      &#x3C;li *<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a>=\"let d of dataProvider.data\"><a href=\"api/router/Data\" class=\"code-anchor\">Data</a> {{d}}&#x3C;/li>\n    `,\n})\nclass GiantList {\n  constructor(private ref: <a href=\"api/core/ChangeDetectorRef\" class=\"code-anchor\">ChangeDetectorRef</a>, public dataProvider: DataListProvider) {\n    ref.detach();\n    setInterval(() => { this.ref.detectChanges(); }, 5000);\n  }\n}\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app',\n  providers: [DataListProvider],\n  template: `\n      &#x3C;giant-list>&#x3C;/giant-list>\n    `,\n})\nclass App {\n}\n\n</code-example>\n<h3 id=\"reattaching-a-detached-component\" translation-result=\"on\">重新附加一个已分离的组件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#reattaching-a-detached-component\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"reattaching-a-detached-component\">Reattaching a detached component<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/ChangeDetectorRef#reattaching-a-detached-component\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">下面的例子创建了一个用来显示活动数据的组件。\n当 <code>live</code> 属性为 <code>false</code> 时，该组件就把它的变更检测器从主变更检测器树中分离出来，当该属性变为 <code>true</code> 时，则重新附加上它。</p><p translation-origin=\"off\">The following example creates a component displaying live data.\nThe component detaches its change detector from the main change detector tree\nwhen the <code>live</code> property is set to false, and reattaches it when the property\nbecomes true.</p>\n\n<code-example path=\"core/ts/change_detect/change-detection.ts\" region=\"reattach\">\nclass DataProvider {\n  data = 1;\n  constructor() {\n    setInterval(() => { this.data = 2; }, 500);\n  }\n}\n\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({selector: 'live-data', inputs: ['live'], template: '<a href=\"api/router/Data\" class=\"code-anchor\">Data</a>: {{dataProvider.data}}'})\nclass LiveData {\n  constructor(private ref: <a href=\"api/core/ChangeDetectorRef\" class=\"code-anchor\">ChangeDetectorRef</a>, public dataProvider: DataProvider) {}\n\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()\n  set live(value: boolean) {\n    if (value) {\n      this.ref.reattach();\n    } else {\n      this.ref.detach();\n    }\n  }\n}\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app',\n  providers: [DataProvider],\n  template: `\n       Live <a href=\"\" class=\"code-anchor\">Update</a>: &#x3C;input type=\"checkbox\" [(<a href=\"api/forms/NgModel\" class=\"code-anchor\">ngModel</a>)]=\"live\">\n       &#x3C;live-data [live]=\"live\">&#x3C;/live-data>\n     `,\n})\n\nclass App1 {\n  live = true;\n}\n\n</code-example>\n\n</section>\n\n\n\n  </div>\n</article>\n\n<!-- links to this doc:\n - api/core\n - api/core/ApplicationRef\n - api/core/EmbeddedViewRef\n - api/core/ViewRef\n - api/core/global/ngApplyChanges\n - api/core/testing/ComponentFixture\n - api/upgrade/static/downgradeComponent\n - guide/glossary\n - guide/testing\n-->\n<!-- links from this doc:\n - /api\n - api/common/NgForOf\n - api/core\n - api/core/ChangeDetectionStrategy#OnPush\n - api/core/ChangeDetectorRef#changedetectorref\n - api/core/ChangeDetectorRef#checkNoChanges\n - api/core/ChangeDetectorRef#checknochanges\n - api/core/ChangeDetectorRef#detach\n - api/core/ChangeDetectorRef#detach-change-detector-to-limit-how-often-check-occurs\n - api/core/ChangeDetectorRef#detectChanges\n - api/core/ChangeDetectorRef#detectchanges\n - api/core/ChangeDetectorRef#markForCheck\n - api/core/ChangeDetectorRef#markforcheck\n - api/core/ChangeDetectorRef#reattach\n - api/core/ChangeDetectorRef#reattaching-a-detached-component\n - api/core/ChangeDetectorRef#usage-notes\n - api/core/ChangeDetectorRef#use-markforcheck-with-checkonce-strategy\n - api/core/ChangeDetectorRef#子类\n - api/core/ChangeDetectorRef#方法\n - api/core/Component\n - api/core/Component#changeDetection\n - api/core/EmbeddedViewRef\n - api/core/Input\n - api/core/ViewRef\n - api/core/testing/ComponentFixture#detectChanges\n - api/forms/NgModel\n - api/router/Data\n - http://plnkr.co/edit/GC512b?p=preview\n - https://github.com/angular/angular-cn/edit/aio/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20请简述你的修改...#L10-L156\n - https://github.com/angular/angular-cn/edit/aio/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20请简述你的修改...#L113-L125\n - https://github.com/angular/angular-cn/edit/aio/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20请简述你的修改...#L126-L137\n - https://github.com/angular/angular-cn/edit/aio/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20请简述你的修改...#L138-L149\n - https://github.com/angular/angular-cn/edit/aio/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20请简述你的修改...#L76-L92\n - https://github.com/angular/angular-cn/edit/aio/packages/core/src/change_detection/change_detector_ref.ts?message=docs(core)%3A%20请简述你的修改...#L93-L112\n - https://github.com/angular/angular-cn/tree/9.0.0-rc.1/packages/core/src/change_detection/change_detector_ref.ts#L10-L156\n - https://github.com/angular/angular-cn/tree/9.0.0-rc.1/packages/core/src/change_detection/change_detector_ref.ts#L113-L125\n - https://github.com/angular/angular-cn/tree/9.0.0-rc.1/packages/core/src/change_detection/change_detector_ref.ts#L126-L137\n - https://github.com/angular/angular-cn/tree/9.0.0-rc.1/packages/core/src/change_detection/change_detector_ref.ts#L138-L149\n - https://github.com/angular/angular-cn/tree/9.0.0-rc.1/packages/core/src/change_detection/change_detector_ref.ts#L76-L92\n - https://github.com/angular/angular-cn/tree/9.0.0-rc.1/packages/core/src/change_detection/change_detector_ref.ts#L93-L112\n-->"
}