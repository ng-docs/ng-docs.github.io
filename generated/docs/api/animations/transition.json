{"id":"api/animations/transition","title":"transition","contents":"<article>\n  <div class=\"breadcrumb-container\">\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n            { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.cn//api\", \"name\": \"API\" } },\n            { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.cn/api/animations\", \"name\": \"@angular/animations\" } },\n            { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.cn/api/animations/transition\", \"name\": \"transition\" } }\n          ]\n        }\n      </script>\n        <a href=\"/api\">API</a> &gt; <a href=\"api/animations\">@angular/animations</a>\n    </div>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/packages/animations/src/animation_metadata.ts?message=docs(animations)%3A%20请简述你的修改...#L1295-L1523\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/15.0.1/packages/animations/src/animation_metadata.ts#L1295-L1523\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n  </div>\n  <header ng-should-translate=\"\" class=\"api-header\">\n    <h1 id=\"transition\">transition<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#transition\"><i class=\"material-icons\">link</i></a></h1>\n    <label class=\"api-type-label function\">function</label>\n  </header>\n  <aio-toc class=\"embedded\"></aio-toc>\n\n  <div class=\"api-body\">\n  <section ng-should-translate=\"\" class=\"short-description\">\n    <p translation-result=\"on\">声明一个转场动画，以便在满足给定条件时运行一系列动画步骤。该条件是一个逻辑型表达式或一个函数，\n该函数比较以前和现在的动画状态，如果应该开始转场则返回 <code>true</code>。\n当满足所定义的转场动画的状态标准时，就会开始执行相关的动画。</p><p translation-origin=\"off\">Declares an animation transition which is played when a certain specified condition is met.</p>\n\n\n  </section>\n\n  <div class=\"overload-info\">\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\"> <span class=\"member-name\"><a href=\"api/animations/transition\" class=\"code-anchor\">transition</a></span>(stateChangeExpr: string | ((fromState: string, toState: string, element?: any, params?: { [key: string]: any; }) =&gt; boolean), steps: <a href=\"api/animations/AnimationMetadata\" class=\"code-anchor\">AnimationMetadata</a> | <a href=\"api/animations/AnimationMetadata\" class=\"code-anchor\">AnimationMetadata</a>[], options: <a href=\"api/animations/AnimationOptions\" class=\"code-anchor\">AnimationOptions</a> = null): <a href=\"api/animations/AnimationTransitionMetadata\" class=\"code-anchor\">AnimationTransitionMetadata</a></code-example>\n\n  <h6 class=\"no-anchor\" id=\"参数\">参数</h6>\n  <table class=\"is-full-width list-table parameters-table function-overload-parameters\">\n  <tbody>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\">\n        <a id=\"\"></a>\n        <code>stateChangeExpr</code>\n      </td>\n      <td class=\"param-type\"><code>string | ((fromState: string, toState: string, element?: any, params?: { [key: string]: any; }) =&gt; boolean)</code></td>\n      <td class=\"param-description\">\n        <p translation-result=\"on\">具有特定格式的字符串或指定动画转换何时发生的函数（请参阅<a href=\"api/animations/transition#state-change-expression\">状态更改表达式</a>）。</p><p translation-origin=\"off\">A string with a specific format or a function that specifies when the\nanimation transition should occur (see <a href=\"api/animations/transition#state-change-expression\">State Change Expression</a>).</p>\n\n\n      </td>\n    </tr>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\">\n        <a id=\"\"></a>\n        <code>steps</code>\n      </td>\n      <td class=\"param-type\"><code><a href=\"api/animations/AnimationMetadata\" class=\"code-anchor\">AnimationMetadata</a> | <a href=\"api/animations/AnimationMetadata\" class=\"code-anchor\">AnimationMetadata</a>[]</code></td>\n      <td class=\"param-description\">\n        <p translation-result=\"on\">表示动画操作指南的一个或多个动画对象。</p><p translation-origin=\"off\">One or more animation objects that represent the animation's instructions.</p>\n\n\n      </td>\n    </tr>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\">\n        <a id=\"\"></a>\n        <code>options</code>\n      </td>\n      <td class=\"param-type\"><code><a href=\"api/animations/AnimationOptions\" class=\"code-anchor\">AnimationOptions</a></code></td>\n      <td class=\"param-description\">\n        <p translation-result=\"on\">一个选项对象，可用于指定动画的延迟或为其提供自定义参数。</p><p translation-result=\"on\">可选值。默认值为 <code>null</code>。</p><p translation-origin=\"off\">An options object that can be used to specify a delay for the animation or provide\ncustom parameters for it.</p>\n\n\n        \n\n      </td>\n    </tr>\n  </tbody>\n</table>\n  <h6 class=\"no-anchor\" id=\"返回值\">返回值</h6>\n  <p translation-result=\"on\">一个封装了转场数据的对象。</p><p translation-origin=\"off\"><code><a href=\"api/animations/AnimationTransitionMetadata\" class=\"code-anchor\">AnimationTransitionMetadata</a></code>: An object that encapsulates the transition data.</p>\n\n\n</div>\n\n\n\n\n\n<section ng-should-translate=\"\" class=\"usage-notes\">\n  <h2 id=\"usage-notes\">使用说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#usage-notes\"><i class=\"material-icons\">link</i></a></h2>\n  <h3 id=\"state-change-expression\" translation-result=\"on\">状态更改表达式<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#state-change-expression\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">State Change Expression<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#state-change-expression\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">状态更改表达式会指示 Angular 何时运行转换的动画，它可以是</p><p translation-origin=\"off\">The State Change Expression instructs Angular when to run the transition's animations, it can\neither be</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">具有特定语法的字符串</p><p translation-origin=\"off\">a string with a specific syntax</p>\n\n</li>\n<li>\n<p translation-result=\"on\">或一个比较前一个状态和当前状态（绑定到元素触发器的表达式的值）的函数，如果应该发生转换，则返回\n<code>true</code>，否则返回 <code>false</code></p><p translation-origin=\"off\">or a function that compares the previous and current state (value of the expression bound to\nthe element's trigger) and returns <code>true</code> if the transition should occur or <code>false</code> otherwise</p>\n\n</li>\n</ul>\n<p translation-result=\"on\">字符串格式可以是：</p><p translation-origin=\"off\">The string format can be:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><code>fromState =&gt; toState</code>，这表明应该发生转换的动画，然后绑定到触发器元素的表达式从 <code>fromState</code>\n到 <code>toState</code></p><p translation-origin=\"off\"><code>fromState =&gt; toState</code>, which indicates that the transition's animations should occur then the\nexpression bound to the trigger's element goes from <code>fromState</code> to <code>toState</code></p>\n\n<p translation-result=\"on\"><em> 示例：</em></p><p translation-origin=\"off\"><em>Example:</em></p>\n\n<code-example language=\"typescript\">\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('open =&gt; closed', <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('.5s ease-out', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ height: 0 }) ))\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">  <code>fromState &lt;=&gt; toState</code>，这表明应该发生转换的动画，然后绑定到触发器元素的表达式从 <code>fromState</code>\n变为 <code>toState</code>，反之亦然</p><p translation-origin=\"off\"><code>fromState &lt;=&gt; toState</code>, which indicates that the transition's animations should occur then\nthe expression bound to the trigger's element goes from <code>fromState</code> to <code>toState</code> or vice\nversa</p>\n\n<p translation-result=\"on\">  <em> 示例：</em></p><p translation-origin=\"off\">  <em>Example:</em></p>\n\n<code-example language=\"typescript\">\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('enabled &lt;=&gt; disabled', <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s cubic-bezier(0.8,0.3,0,1)'))\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\"><code>:enter</code> / <code>:leave</code> ，这表明转换的动画应该在元素进入或存在 DOM 时发生</p><p translation-origin=\"off\"><code>:enter</code>/<code>:leave</code>, which indicates that the transition's animations should occur when the\nelement enters or exists the DOM</p>\n\n<p translation-result=\"on\"><em> 示例：</em></p><p translation-origin=\"off\"><em>Example:</em></p>\n\n<code-example language=\"typescript\">\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':enter', [\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 0 }),\n    <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('500ms', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 1 }))\n  ])\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">  <code>:increment</code> / <code>:decrement</code>\n，表示当绑定到触发器元素的数值表达式的值增加或减少时，应该发生转换的动画</p><p translation-origin=\"off\"><code>:increment</code>/<code>:decrement</code>, which indicates that the transition's animations should occur when\nthe numerical expression bound to the trigger's element has increased in value or decreased</p>\n\n<p translation-result=\"on\">  <em> 示例：</em></p><p translation-origin=\"off\">  <em>Example:</em></p>\n\n<code-example language=\"typescript\">\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':increment', <a href=\"api/animations/query\" class=\"code-anchor\">query</a>('@counter', <a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>()))\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">上述任何一项的序列除以逗号，这表明只要状态更改表达式之一匹配，就应该发生转换的动画</p><p translation-origin=\"off\">a sequence of any of the above divided by commas, which indicates that transition's animations\nshould occur whenever one of the state change expressions matches</p>\n\n<p translation-result=\"on\"><em> 示例：</em></p><p translation-origin=\"off\"><em>Example:</em></p>\n\n<code-example language=\"typescript\">\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':increment, * =&gt; enabled, :enter', <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s ease', <a href=\"api/animations/keyframes\" class=\"code-anchor\">keyframes</a>([\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ transform: 'scale(1)', offset: 0}),\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ transform: 'scale(1.1)', offset: 0.7}),\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ transform: 'scale(1)', offset: 1})\n  ]))),\n</code-example>\n</li>\n</ul>\n<p translation-result=\"on\">另请注意，在这种情况下：</p><p translation-origin=\"off\">Also note that in such context:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><code>void</code> 可用于表明此元素的不存在</p><p translation-origin=\"off\"><code>void</code> can be used to indicate the absence of the element</p>\n\n</li>\n<li>\n<p translation-result=\"on\">星号可以作为匹配任何状态的通配符</p><p translation-origin=\"off\">asterisks can be used as wildcards that match any state</p>\n\n</li>\n<li>\n<p translation-result=\"on\">（由于上述原因， <code>void =&gt; *</code> 等效于 <code>:enter</code> ，并且 <code>* =&gt; void</code> 等效于 <code>:leave</code> ）</p><p translation-origin=\"off\">(as a consequence of the above, <code>void =&gt; *</code> is equivalent to <code>:enter</code> and <code>* =&gt; void</code> is\nequivalent to <code>:leave</code>)</p>\n\n</li>\n<li>\n<p translation-result=\"on\"><code>true</code> 和 <code>false</code> 也分别匹配表达式值 <code>1</code> 和 <code>0</code> （但不匹配 <em>truthy</em> 和 <em>falsy</em> 值）</p><p translation-origin=\"off\"><code>true</code> and <code>false</code> also match expression values of <code>1</code> and <code>0</code> respectively (but do not match\n<em>truthy</em> and <em>falsy</em> values)</p>\n\n</li>\n</ul>\n<div class=\"alert is-helpful\">\n<p> Be careful about entering end leaving elements as their transitions present a common\npitfall for developers.</p>\n<p> Note that when an element with a trigger enters the DOM its <code>:enter</code> transition always\ngets executed, but its <code>:leave</code> transition will not be executed if the element is removed\nalongside its parent (as it will be removed \"without warning\" before its transition has\na chance to be executed, the only way that such transition can occur is if the element\nis exiting the DOM on its own).</p>\n</div>\n<h3 id=\"animating-to-a-final-state\" translation-result=\"on\">把动画播放到最终状态<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#animating-to-a-final-state\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Animating to a Final State<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#animating-to-a-final-state\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">如果转换中的最后一步是对使用不带 <code><a href=\"api/animations/style\" class=\"code-anchor\">style</a></code> 数据的计时值的 <code><a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>()</code>\n的调用，则该步骤会自动被认为是最终动画弧，以使元素达到最终状态，在这种情况下，Angular\n会自动添加或删除 CSS 样式以确保元素处于正确的最终状态。</p><p translation-origin=\"off\">If the final step in a transition is a call to <code><a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>()</code> that uses a timing value\nwith no <code><a href=\"api/animations/style\" class=\"code-anchor\">style</a></code> data, that step is automatically considered the final animation arc,\nfor the element to reach the final state, in such case Angular automatically adds or removes\nCSS styles to ensure that the element is in the correct final state.</p>\n\n<h3 id=\"usage-examples\" translation-result=\"on\">使用范例<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#usage-examples\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\">Usage Examples<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#usage-examples\"><i class=\"material-icons\">link</i></a></h3>\n\n<ul>\n<li>\n<p translation-result=\"on\">根据触发器的表达式值应用的过渡动画</p><p translation-origin=\"off\">Transition animations applied based on\nthe trigger's expression value</p>\n\n<code-example language=\"HTML\">\n&lt;div [@myAnimationTrigger]=\"myStatusExp\"&gt;\n ...\n&lt;/div&gt;\n</code-example>\n<code-example language=\"typescript\">\n<a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>(\"myAnimationTrigger\", [\n  ..., // states\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(\"on =&gt; off, open =&gt; closed\", <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>(500)),\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(\"* &lt;=&gt; error\", <a href=\"api/animations/query\" class=\"code-anchor\">query</a>('.indicator', <a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>()))\n])\n</code-example>\n</li>\n<li>\n<p translation-result=\"on\">根据自定义逻辑应用的过渡动画，具体取决于触发器的表达式值和提供的参数</p><p translation-origin=\"off\">Transition animations applied based on custom logic dependent\non the trigger's expression value and provided parameters</p>\n\n<code-example language=\"HTML\">\n&lt;div [@myAnimationTrigger]=\"{\n value: stepName,\n params: { target: currentTarget }\n}\"&gt;\n ...\n&lt;/div&gt;\n</code-example>\n<code-example language=\"typescript\">\n<a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>(\"myAnimationTrigger\", [\n  ..., // states\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(\n    (fromState, toState, _element, params) =&gt;\n      ['firststep', 'laststep'].includes(fromState.toLowerCase())\n      &amp;&amp; toState === params?.['target'],\n    <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s')\n  )\n])\n</code-example>\n</li>\n</ul>\n\n</section></div>\n</article>\n\n<!-- links to this doc:\n - api/animations\n - api/animations/AnimationMetadataType\n - api/animations/AnimationOptions\n - api/animations/AnimationTransitionMetadata\n - api/animations/animate\n - api/animations/group\n - api/animations/query\n - api/animations/sequence\n - api/animations/stagger\n - api/animations/state\n - api/animations/trigger\n - api/core/Component\n - guide/animations\n - guide/complex-animation-sequences\n - guide/elements\n - guide/reusable-animations\n - guide/route-animations\n - guide/router-tutorial-toh\n - guide/transition-and-triggers\n-->\n<!-- links from this doc:\n - /api\n - api/animations\n - api/animations/AnimationMetadata\n - api/animations/AnimationOptions\n - api/animations/AnimationTransitionMetadata\n - api/animations/animate\n - api/animations/animateChild\n - api/animations/keyframes\n - api/animations/query\n - api/animations/style\n - api/animations/transition#animating-to-a-final-state\n - api/animations/transition#state-change-expression\n - api/animations/transition#transition\n - api/animations/transition#usage-examples\n - api/animations/transition#usage-notes\n - api/animations/transition#使用范例\n - api/animations/transition#把动画播放到最终状态\n - api/animations/transition#状态更改表达式\n - api/animations/trigger\n - https://github.com/ng-docs/angular-cn/edit/cn/packages/animations/src/animation_metadata.ts?message=docs(animations)%3A%20请简述你的修改...#L1295-L1523\n - https://github.com/ng-docs/angular-cn/tree/15.0.1/packages/animations/src/animation_metadata.ts#L1295-L1523\n-->"}