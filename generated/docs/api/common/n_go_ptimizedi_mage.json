{"id":"api/common/NgOptimizedImage","title":"NgOptimizedImage","contents":"<article>\n  <div class=\"breadcrumb-container\">\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n            { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.cn//api\", \"name\": \"API\" } },\n            { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.cn/api/common\", \"name\": \"@angular/common\" } },\n            { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.cn/api/common/NgOptimizedImage\", \"name\": \"NgOptimizedImage\" } }\n          ]\n        }\n      </script>\n        <a href=\"/api\">API</a> &gt; <a href=\"api/common\">@angular/common</a>\n    </div>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/edit/cn/packages/common/src/directives/ng_optimized_image/ng_optimized_image.ts?message=docs(common)%3A%20请简述你的修改...#L110-L552\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/15.0.1/packages/common/src/directives/ng_optimized_image/ng_optimized_image.ts#L110-L552\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n  </div>\n  <header ng-should-translate=\"\" class=\"api-header\">\n    <h1 id=\"ngoptimizedimage\">NgOptimizedImage<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/common/NgOptimizedImage#ngoptimizedimage\"><i class=\"material-icons\">link</i></a></h1>\n    <label class=\"api-type-label directive\">directive</label>\n  </header>\n  <aio-toc class=\"embedded\"></aio-toc>\n\n  <div class=\"api-body\">\n  <section ng-should-translate=\"\" class=\"short-description\">\n    <p>Directive that improves image loading performance by enforcing best practices.</p>\n\n    <p no-translate=\"\"><a href=\"api/common/NgOptimizedImage#description\">查看\"说明\"...</a></p>\n  </section>\n  \n<section ng-should-translate=\"\" class=\"selector-list\">\n  <h2 id=\"selectors\">选择器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/common/NgOptimizedImage#selectors\"><i class=\"material-icons\">link</i></a></h2>\n  <ul>\n    <li><code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a>[<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>]</code></li>\n  </ul>\n</section>\n\n  \n<section ng-should-translate=\"\" class=\"instance-properties\">\n  <a name=\"properties\"></a>\n  <h2 id=\"instance-properties\">属性<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/common/NgOptimizedImage#instance-properties\"><i class=\"material-icons\">link</i></a></h2>\n  <table class=\"is-full-width list-table property-table\">\n    <thead>\n      <tr>\n        <th>属性</th>\n        <th>说明</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"ngSrc\"></a>\n          <code class=\"\"><span class=\"property-binding\">@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</span><br><span class=\"member-name\"><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a></span>: string</code>\n        </td>\n        <td>\n          <div no-translate=\"\"><p>Name of the source image.\nImage name will be processed by the image loader and the final URL will be applied as the <code>src</code>\nproperty of the image.</p></div>\n          \n        </td>\n      </tr>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"ngSrcset\"></a>\n          <code class=\"\"><span class=\"property-binding\">@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</span><br><span class=\"member-name\">ngSrcset</span>: string</code>\n        </td>\n        <td>\n          <div no-translate=\"\"><p>A comma separated list of width or density descriptors.\nThe image name will be taken from <code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a></code> and combined with the list of width or density\ndescriptors to generate the final <code>srcset</code> property of the image.</p></div>\n          <p>Example:</p>\n<code-example>\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>=\"hello.jpg\" ngSrcset=\"100w, 200w\" /&gt;  =&gt;\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> src=\"path/hello.jpg\" srcset=\"path/hello.jpg?w=100 100w, path/hello.jpg?w=200 200w\" /&gt;\n</code-example>\n\n        </td>\n      </tr>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"sizes\"></a>\n          <code class=\"\"><span class=\"property-binding\">@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</span><br><span class=\"member-name\">sizes</span>?: string</code>\n        </td>\n        <td>\n          <div no-translate=\"\"><p>The base <code>sizes</code> attribute passed through to the <code>&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a>&gt;</code> element.\nProviding sizes causes the image to create an automatic responsive srcset.</p></div>\n          \n        </td>\n      </tr>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"width\"></a>\n          <code class=\"\"><span class=\"property-binding\">@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</span><br><span class=\"member-name\">width</span>: number | undefined</code>\n        </td>\n        <td>\n          <div no-translate=\"\"><p>For responsive images: the intrinsic width of the image in pixels.\nFor fixed size images: the desired rendered width of the image in pixels.</p></div>\n          \n        </td>\n      </tr>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"height\"></a>\n          <code class=\"\"><span class=\"property-binding\">@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</span><br><span class=\"member-name\">height</span>: number | undefined</code>\n        </td>\n        <td>\n          <div no-translate=\"\"><p>For responsive images: the intrinsic height of the image in pixels.\nFor fixed size images: the desired rendered height of the image in pixels.* The intrinsic\nheight of the image in pixels.</p></div>\n          \n        </td>\n      </tr>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"loading\"></a>\n          <code class=\"\"><span class=\"property-binding\">@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</span><br><span class=\"member-name\">loading</span>?: 'lazy' | 'eager' | 'auto'</code>\n        </td>\n        <td>\n          <div no-translate=\"\"><p>The desired loading behavior (lazy, eager, or auto).</p></div>\n          <p>Setting images as loading='eager' or loading='auto' marks them\nas non-priority images. Avoid changing this input for priority images.</p>\n\n        </td>\n      </tr>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"priority\"></a>\n          <code class=\"\"><span class=\"property-binding\">@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</span><br><span class=\"member-name\">priority</span>: boolean</code>\n        </td>\n        <td>\n          <div no-translate=\"\"><p>Indicates whether this image should have a high priority.</p></div>\n          \n        </td>\n      </tr>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"disableOptimizedSrcset\"></a>\n          <code class=\"\"><span class=\"property-binding\">@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</span><br><span class=\"member-name\">disableOptimizedSrcset</span>: boolean</code>\n        </td>\n        <td>\n          <div no-translate=\"\"><p>Disables automatic srcset generation for this image.</p></div>\n          \n        </td>\n      </tr>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"fill\"></a>\n          <code class=\"\"><span class=\"property-binding\">@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</span><br><span class=\"member-name\">fill</span>: boolean</code>\n        </td>\n        <td>\n          <label class=\"api-status-label dev-preview\" title=\"This API is in Developer Preview\">\n            <a href=\"guide/releases#developer-preview\">developer preview</a>\n          </label>\n          \n          <div no-translate=\"\"><p>Sets the image to \"fill mode\", which eliminates the height/width requirement and adds\nstyles such that the image fills its containing element.</p></div>\n          \n        </td>\n      </tr>\n    </tbody>\n  </table>\n</section>\n\n  \n  <section ng-should-translate=\"\" class=\"description\">\n    <h2 id=\"description\">说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/common/NgOptimizedImage#description\"><i class=\"material-icons\">link</i></a></h2>\n    <p><code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> ensures that the loading of the Largest Contentful Paint (LCP) image is\nprioritized by:</p>\n<ul>\n<li>\n<p>Automatically setting the <code>fetchpriority</code> attribute on the <code>&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a>&gt;</code> tag</p>\n</li>\n<li>\n<p>Lazy loading non-priority images by default</p>\n</li>\n<li>\n<p>Asserting that there is a corresponding preconnect link tag in the document head</p>\n</li>\n</ul>\n<p>In addition, the directive:</p>\n<ul>\n<li>\n<p>Generates appropriate asset URLs if a corresponding <code><a href=\"api/common/ImageLoader\" class=\"code-anchor\">ImageLoader</a></code> function is provided</p>\n</li>\n<li>\n<p>Automatically generates a srcset</p>\n</li>\n<li>\n<p>Requires that <code>width</code> and <code>height</code> are set</p>\n</li>\n<li>\n<p>Warns if <code>width</code> or <code>height</code> have been set incorrectly</p>\n</li>\n<li>\n<p>Warns if the image will be visually distorted when rendered</p>\n</li>\n</ul>\n\n    <p>The <code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> directive is marked as <a href=\"guide/standalone-components\">standalone</a> and can\nbe imported directly.</p>\n<p>Follow the steps below to enable and use the directive:</p>\n<ol>\n<li>Import it into the necessary NgModule or a standalone Component.</li>\n<li>Optionally provide an <code><a href=\"api/common/ImageLoader\" class=\"code-anchor\">ImageLoader</a></code> if you use an image hosting service.</li>\n<li>Update the necessary <code>&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a>&gt;</code> tags in templates and replace <code>src</code> attributes with <code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a></code>.</li>\n</ol>\n<p>Using a <code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a></code> allows the directive to control when the <code>src</code> gets set, which triggers an image\ndownload.</p>\n<p>Step 1: import the <code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> directive.</p>\n<code-example language=\"typescript\">\nimport { <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a> } from '@angular/common';\n\n// Include it into the necessary <a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  imports: [<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a>],\n})\nclass AppModule {}\n\n// ... or a standalone <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  standalone: true\n  imports: [<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a>],\n})\nclass MyStandaloneComponent {}\n</code-example>\n<p>Step 2: configure a loader.</p>\n<p>To use the <strong>default loader</strong>: no additional code changes are necessary. The URL returned by the\ngeneric loader will always match the value of \"src\". In other words, this loader applies no\ntransformations to the resource URL and the value of the <code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a></code> attribute will be used as is.</p>\n<p>To use an existing loader for a <strong>third-party image service</strong>: add the provider factory for your\nchosen service to the <code>providers</code> array. In the example below, the Imgix loader is used:</p>\n<code-example language=\"typescript\">\nimport {<a href=\"api/common/provideImgixLoader\" class=\"code-anchor\">provideImgixLoader</a>} from '@angular/common';\n\n// Call the function and add the result to the `providers` array:\nproviders: [\n  <a href=\"api/common/provideImgixLoader\" class=\"code-anchor\">provideImgixLoader</a>(\"https://my.base.url/\"),\n],\n</code-example>\n<p>The <code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> directive provides the following functions:</p>\n<ul>\n<li>\n<p><code><a href=\"api/common/provideCloudflareLoader\" class=\"code-anchor\">provideCloudflareLoader</a></code></p>\n</li>\n<li>\n<p><code><a href=\"api/common/provideCloudinaryLoader\" class=\"code-anchor\">provideCloudinaryLoader</a></code></p>\n</li>\n<li>\n<p><code><a href=\"api/common/provideImageKitLoader\" class=\"code-anchor\">provideImageKitLoader</a></code></p>\n</li>\n<li>\n<p><code><a href=\"api/common/provideImgixLoader\" class=\"code-anchor\">provideImgixLoader</a></code></p>\n</li>\n</ul>\n<p>If you use a different image provider, you can create a custom loader function as described\nbelow.</p>\n<p>To use a <strong>custom loader</strong>: provide your loader function as a value for the <code><a href=\"api/common/IMAGE_LOADER\" class=\"code-anchor\">IMAGE_LOADER</a></code> DI\ntoken.</p>\n<code-example language=\"typescript\">\nimport {<a href=\"api/common/IMAGE_LOADER\" class=\"code-anchor\">IMAGE_LOADER</a>, <a href=\"api/common/ImageLoaderConfig\" class=\"code-anchor\">ImageLoaderConfig</a>} from '@angular/common';\n\n// Configure the loader using the `<a href=\"api/common/IMAGE_LOADER\" class=\"code-anchor\">IMAGE_LOADER</a>` token.\nproviders: [\n  {\n     provide: <a href=\"api/common/IMAGE_LOADER\" class=\"code-anchor\">IMAGE_LOADER</a>,\n     useValue: (config: <a href=\"api/common/ImageLoaderConfig\" class=\"code-anchor\">ImageLoaderConfig</a>) =&gt; {\n       return `https://example.com/${config.src}-${config.width}.jpg}`;\n     }\n  },\n],\n</code-example>\n<p>Step 3: update <code>&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a>&gt;</code> tags in templates to use <code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a></code> instead of <code>src</code>.</p>\n<code-example>\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>=\"logo.png\" width=\"200\" height=\"100\"&gt;\n</code-example>\n\n  </section>\n\n  \n  \n  \n  </div>\n</article>\n\n<!-- links to this doc:\n - api/common\n - api/common/IMAGE_CONFIG\n - api/common/IMAGE_LOADER\n - api/common/ImageLoaderConfig\n - api/core/OnChanges\n - api/core/OnDestroy\n - api/core/OnInit\n - api/platform-browser/DomSanitizer\n - guide/ajs-quick-reference\n - guide/binding-overview\n - guide/binding-syntax\n - guide/docs-style-guide\n - guide/i18n-common-prepare\n - guide/i18n-example\n - guide/image-directive\n - guide/interpolation\n - guide/property-binding\n - guide/security\n - guide/understanding-template-expr-overview\n - guide/update-to-version-15\n - guide/upgrade\n-->\n<!-- links from this doc:\n - /api\n - api/common\n - api/common/IMAGE_LOADER\n - api/common/ImageLoader\n - api/common/ImageLoaderConfig\n - api/common/NgOptimizedImage#description\n - api/common/NgOptimizedImage#instance-properties\n - api/common/NgOptimizedImage#ngoptimizedimage\n - api/common/NgOptimizedImage#selectors\n - api/common/provideCloudflareLoader\n - api/common/provideCloudinaryLoader\n - api/common/provideImageKitLoader\n - api/common/provideImgixLoader\n - api/core/Component\n - api/core/Input\n - api/core/NgModule\n - guide/releases#developer-preview\n - guide/standalone-components\n - https://github.com/ng-docs/angular-cn/edit/cn/packages/common/src/directives/ng_optimized_image/ng_optimized_image.ts?message=docs(common)%3A%20请简述你的修改...#L110-L552\n - https://github.com/ng-docs/angular-cn/tree/15.0.1/packages/common/src/directives/ng_optimized_image/ng_optimized_image.ts#L110-L552\n-->"}